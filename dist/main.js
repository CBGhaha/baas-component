!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.myPlay=e():t.myPlay=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=63)}([function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t){return t&&t.__esModule?t:{default:t}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(4),i=n(3);e.Factory={addGetterSetter:function(t,e,n,i,o){this.addGetter(t,e,n),this.addSetter(t,e,i,o),this.addOverloadedGetterSetter(t,e)},addGetter:function(e,n,i){var o="get"+t.Util._capitalize(n);e.prototype[o]=e.prototype[o]||function(){var t=this.attrs[n];return void 0===t?i:t}},addSetter:function(n,i,o,r){var a="set"+t.Util._capitalize(i);n.prototype[a]||e.Factory.overWriteSetter(n,i,o,r)},overWriteSetter:function(e,n,i,o){var r="set"+t.Util._capitalize(n);e.prototype[r]=function(t){return i&&null!=t&&(t=i.call(this,t,n)),this._setAttr(n,t),o&&o.call(this),this}},addComponentsGetterSetter:function(e,n,o,r,a){var s,l,c=o.length,u=t.Util._capitalize,h="get"+u(n),d="set"+u(n);e.prototype[h]=function(){var t={};for(s=0;s<c;s++)l=o[s],t[l]=this.getAttr(n+u(l));return t};var f=i.getComponentValidator(o);e.prototype[d]=function(t){var e,i=this.attrs[n];for(e in r&&(t=r.call(this,t)),f&&f.call(this,t,n),t)t.hasOwnProperty(e)&&this._setAttr(n+u(e),t[e]);return this._fireChangeEvent(n,i,t),a&&a.call(this),this},this.addOverloadedGetterSetter(e,n)},addOverloadedGetterSetter:function(e,n){var i=t.Util._capitalize(n),o="set"+i,r="get"+i;e.prototype[n]=function(){return arguments.length?(this[o](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter:function(e,n,i,o){t.Util.error("Adding deprecated "+n);var r="get"+t.Util._capitalize(n),a=n+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[r]=function(){t.Util.error(a);var e=this.attrs[n];return void 0===e?i:e},this.addSetter(e,n,o,function(){t.Util.error(a)}),this.addOverloadedGetterSetter(e,n)},backCompat:function(e,n){t.Util.each(n,function(n,i){var o=e.prototype[i],r="get"+t.Util._capitalize(n),a="set"+t.Util._capitalize(n);function s(){o.apply(this,arguments),t.Util.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}e.prototype[n]=s,e.prototype[r]=s,e.prototype[a]=s})},afterSetFilter:function(){this._filterUpToDate=!1}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){(function(n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Math.PI/180,i=function(t){var e=t.indexOf("msie ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)};e._parseUA=function(t){var e=t.toLowerCase(),n=/(chrome)[ /]([\w.]+)/.exec(e)||/(webkit)[ /]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],o=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),r=!!t.match(/IEMobile/i);return{browser:n[1]||"",version:n[2]||"0",isIE:i(e),mobile:o,ieMobile:r}},e.glob=void 0!==n?n:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"4.2.2",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(n){return e.Konva.angleDeg?n*t:n},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return e.Konva.DD.isDragging},isDragReady:function(){return!!e.Konva.DD.node},UA:e._parseUA(e.glob.navigator&&e.glob.navigator.userAgent||""),document:e.glob.document,_injectGlobal:function(t){e.glob.Konva=t},_parseUA:e._parseUA},e._NODES_REGISTRY={},e._registerNode=function(t){e._NODES_REGISTRY[t.prototype.getClassName()]=t,e.Konva[t.prototype.getClassName()]=t}})?i.apply(e,o):i)||(t.exports=r)}).call(this,n(19))},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(2),i=n(4);function o(t){return i.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)?t:i.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(t.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrAutoValidator=function(){if(t.Konva.isUnminified)return function(t,e){var n=i.Util._isNumber(t),r="auto"===t;return n||r||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(t.Konva.isUnminified)return function(t,e){return i.Util._isString(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getFunctionValidator=function(){if(t.Konva.isUnminified)return function(t,e){return i.Util._isFunction(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(t.Konva.isUnminified)return function(t,e){return i.Util._isArray(t)?t.forEach(function(t){i.Util._isNumber(t)||i.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}},e.getBooleanValidator=function(){if(t.Konva.isUnminified)return function(t,e){var n=!0===t||!1===t;return n||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(e){if(t.Konva.isUnminified)return function(t,n){return i.Util.isObject(t)||i.Util.warn(o(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(2),i=function(){function t(){}return t.toCollection=function(e){var n,i=new t,o=e.length;for(n=0;n<o;n++)i.push(e[n]);return i},t._mapMethod=function(e){t.prototype[e]=function(){var t,n=this.length,i=[].slice.call(arguments);for(t=0;t<n;t++)this[t][e].apply(this[t],i);return this}},t.mapMethods=function(e){var n=e.prototype;for(var i in n)t._mapMethod(i)},t}();e.Collection=i,i.prototype=[],i.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},i.prototype.toArray=function(){var t,e=[],n=this.length;for(t=0;t<n;t++)e.push(this[t]);return e};var o=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.m=t&&t.slice()||[1,0,0,1,0,0]}return t.prototype.copy=function(){return new t(this.m)},t.prototype.point=function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},t.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},t.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[0]*e+this.m[2]*n,o=this.m[1]*e+this.m[3]*n,r=this.m[0]*-n+this.m[2]*e,a=this.m[1]*-n+this.m[3]*e;return this.m[0]=i,this.m[1]=o,this.m[2]=r,this.m[3]=a,this},t.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},t.prototype.skew=function(t,e){var n=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,o=this.m[2]+this.m[0]*t,r=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=i,this.m[2]=o,this.m[3]=r,this},t.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=a,this},t.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,o=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=o,this.m[4]=r,this.m[5]=a,this},t.prototype.getMatrix=function(){return this.m},t.prototype.setAbsolutePosition=function(t,e){var n=this.m[0],i=this.m[1],o=this.m[2],r=this.m[3],a=this.m[4],s=this.m[5],l=(n*(e-s)-i*(t-a))/(n*r-i*o),c=(t-a-o*l)/n;return this.translate(c,l)},t}();e.Transform=o;var r=Math.PI/180,a=180/Math.PI,s={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},l=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,c=[];e.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t?0:t>0?1:-1},requestAnimFrame:function(t){c.push(t),1===c.length&&requestAnimationFrame(function(){var t=c;c=[],t.forEach(function(t){t()})})},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){var n,i,o=[],r=t.length,a=e.Util;for(n=0;n<r;n++)i=t[n],a._isNumber(i)?i=Math.round(1e3*i)/1e3:a._isString(i)||(i=i.toString()),o.push(i);return o},_urlToImage:function(e,n){var i=new t.glob.Image;i.onload=function(){n(i)},i.src=e},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in s?{r:(e=s[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=l.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=s[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),n=(e[0],e.slice(1)),i=Number(n[0])/360,o=Number(n[1])/100,r=Number(n[2])/100,a=void 0,s=void 0,l=void 0;if(0===o)return l=255*r,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};for(var c=2*r-(a=r<.5?r*(1+o):r+o-r*o),u=[0,0,0],h=0;h<3;h++)(s=i+1/3*-(h-1))<0&&s++,s>1&&s--,l=6*s<1?c+6*(a-c)*s:2*s<1?a:3*s<2?c+(a-c)*(2/3-s)*6:c,u[h]=255*l;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*r},_radToDeg:function(t){return t*a},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error("Konva error: "+t)},error:function(t){console.error("Konva error: "+t)},warn:function(e){t.Konva.showWarnings&&console.warn("Konva warning: "+e)},extend:function(t,e){function n(){this.constructor=t}n.prototype=e.prototype;var i=t.prototype;for(var o in t.prototype=new n,i)i.hasOwnProperty(o)&&(t.prototype[o]=i[o]);t.__super__=e.prototype,t.super=e},_getControlPoints:function(t,e,n,i,o,r,a){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),l=Math.sqrt(Math.pow(o-n,2)+Math.pow(r-i,2)),c=a*s/(s+l),u=a*l/(s+l),h=n-c*(o-t),d=i-c*(r-e),f=n+u*(o-t),p=i+u*(r-e);return[h,d,f,p]},_expandPoints:function(t,n){var i,o,r=t.length,a=[];for(i=2;i<r-2;i+=2)o=e.Util._getControlPoints(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],n),a.push(o[0]),a.push(o[1]),a.push(t[i]),a.push(t[i+1]),a.push(o[2]),a.push(o[3]);return a},each:function(t,e){for(var n in t)e(n,t[n])},_inRange:function(t,e,n){return e<=t&&t<n},_getProjectionToSegment:function(t,e,n,i,o,r){var a,s,l,c=(t-n)*(t-n)+(e-i)*(e-i);if(0==c)a=t,s=e,l=(o-n)*(o-n)+(r-i)*(r-i);else{var u=((o-t)*(n-t)+(r-e)*(i-e))/c;u<0?(a=t,s=e,l=(t-o)*(t-o)+(e-r)*(e-r)):u>1?(a=n,s=i,l=(n-o)*(n-o)+(i-r)*(i-r)):l=((a=t+u*(n-t))-o)*(a-o)+((s=e+u*(i-e))-r)*(s-r)}return[a,s,l]},_getProjectionToLine:function(t,n,i){var o=e.Util.cloneObject(t),r=Number.MAX_VALUE;return n.forEach(function(a,s){if(i||s!==n.length-1){var l=n[(s+1)%n.length],c=e.Util._getProjectionToSegment(a.x,a.y,l.x,l.y,t.x,t.y),u=c[0],h=c[1],d=c[2];d<r&&(o.x=u,o.y=h,r=d)}}),o},_prepareArrayForTween:function(t,n,i){var o,r=[],a=[];if(t.length>n.length){var s=n;n=t,t=s}for(o=0;o<t.length;o+=2)r.push({x:t[o],y:t[o+1]});for(o=0;o<n.length;o+=2)a.push({x:n[o],y:n[o+1]});var l=[];return a.forEach(function(t){var n=e.Util._getProjectionToLine(t,r,i);l.push(n.x),l.push(n.y)}),l},_prepareToStringify:function(t){var n;for(var i in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(i)&&t[i]&&"object"==typeof t[i])if(n=Object.getOwnPropertyDescriptor(t,i),t[i].visitedByCircularReferenceRemoval||e.Util._isElement(t[i])){if(!n.configurable)return null;delete t[i]}else if(null===e.Util._prepareToStringify(t[i])){if(!n.configurable)return null;delete t[i]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:999}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Shape=void 0;var t=n(33),i=n(8);e.Shape=function(){function e(t,n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.middlePoints=[],this.templayer=t.findOne(".templayer"),this.showlayer=t.findOne(".showlayer"),this.style=n,this.stage=t,this.shape=null,this.isShift=!1,this.isFill=!1,this.clientid=i,this.toolname=o,this.style=n,this.showtype=r,this.pressure=1}return e.prototype.startDataTemp=function(t){},e.prototype.centerDataTemp=function(t){return[t.x,t.y,this.clientid]},e.prototype.endDataTemp=function(t){return[[t.x,t.y,this.clientid,!0]]},e.prototype.pushPoint=function(t){this.middlePoints.push(t.x/this.stage.scale().x),this.middlePoints.push(t.y/this.stage.scale().x)},e.prototype.draw=function(){},e.prototype.endDraw=function(){var e=this.shape.clone();this.toolname===i.DRAWTOOL_PENCIL&&e.sceneFunc(t.sceneFunc),this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),"replayData"===this.showtype||e.draw()},e.prototype.customEndFunc=function(){},e.prototype.destroy=function(){this.shape.remove(),this.shape.destroy()},e}()})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=n(65)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(4),i=n(1),o=n(21),r=n(2),a=n(25),s=n(3);e.ids={},e.names={},e._removeId=function(t,n){t&&e.ids[t]===n&&delete e.ids[t]},e._addName=function(t,n){n&&(e.names[n]||(e.names[n]=[]),e.names[n].push(t))},e._removeName=function(t,n){if(t){var i=e.names[t];if(i){for(var o=0;o<i.length;o++){var r=i[o];r._id===n&&i.splice(o,1)}0===i.length&&delete e.names[t]}}};var l="absoluteOpacity",c="absoluteTransform",u="absoluteScale",h="listening",d="Shape",f="transform",p="visible",y=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" "),g=["scaleXChange.konva","scaleYChange.konva"].join(" "),v=new t.Collection,m=1,b=function(){function n(t){var e=this;this._id=m++,this.eventListeners={},this.attrs={},this.index=0,this.parent=null,this._cache=new Map,this._lastPos=null,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=v,this._dragEventId=null,this.setAttrs(t),this.on(y,function(){e._clearCache(f),e._clearSelfAndDescendantCache(c)}),this.on(g,function(){e._clearSelfAndDescendantCache(u)}),this.on("visibleChange.konva",function(){e._clearSelfAndDescendantCache(p)}),this.on("listeningChange.konva",function(){e._clearSelfAndDescendantCache(h)}),this.on("opacityChange.konva",function(){e._clearSelfAndDescendantCache(l)})}return n.prototype.hasChildren=function(){return!1},n.prototype.getChildren=function(){return v},n.prototype._clearCache=function(t){t?this._cache.delete(t):this._cache.clear()},n.prototype._getCache=function(t,e){var n=this._cache.get(t);return void 0===n&&(n=e.call(this),this._cache.set(t,n)),n},n.prototype._getCanvasCache=function(){return this._cache.get("canvas")},n.prototype._clearSelfAndDescendantCache=function(t){this._clearCache(t),this.isCached()||this.children&&this.children.each(function(e){e._clearSelfAndDescendantCache(t)})},n.prototype.clearCache=function(){return this._cache.delete("canvas"),this._clearSelfAndDescendantCache(),this},n.prototype.cache=function(e){var n=e||{},i={};void 0!==n.x&&void 0!==n.y&&void 0!==n.width&&void 0!==n.height||(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var r=Math.ceil(n.width||i.width),a=Math.ceil(n.height||i.height),s=n.pixelRatio,c=void 0===n.x?i.x:n.x,h=void 0===n.y?i.y:n.y,d=n.offset||0,f=n.drawBorder||!1;if(r&&a){r+=2*d,a+=2*d,c-=d,h-=d;var p=new o.SceneCanvas({pixelRatio:s,width:r,height:a}),y=new o.SceneCanvas({pixelRatio:s,width:r,height:a}),g=new o.HitCanvas({pixelRatio:1,width:r,height:a}),v=p.getContext(),m=g.getContext();return g.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,!1===n.imageSmoothingEnabled&&(p.getContext()._context.imageSmoothingEnabled=!1,y.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),v.save(),m.save(),v.translate(-c,-h),m.translate(-c,-h),this._isUnderCache=!0,this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(u),this.drawScene(p,this,!0),this.drawHit(g,this,!0),this._isUnderCache=!1,v.restore(),m.restore(),f&&(v.save(),v.beginPath(),v.rect(0,0,r,a),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.set("canvas",{scene:p,filter:y,hit:g,x:c,y:h}),this}t.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},n.prototype.isCached=function(){return this._cache.has("canvas")},n.prototype.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},n.prototype._transformedRect=function(t,e){var n,i,o,r,a=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return a.forEach(function(t){var e=s.point(t);void 0===n&&(n=o=e.x,i=r=e.y),n=Math.min(n,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),r=Math.max(r,e.y)}),{x:n,y:i,width:o-n,height:r-i}},n.prototype._drawCachedSceneCanvas=function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var n=this._getCachedSceneCanvas(),i=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/i,n.height/i),t.restore()},n.prototype._drawCachedHitCanvas=function(t){var e=this._getCanvasCache(),n=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0),t.restore()},n.prototype._getCachedSceneCanvas=function(){var e,n,i,o,r=this.filters(),a=this._getCanvasCache(),s=a.scene,l=a.filter,c=l.getContext();if(r){if(!this._filterUpToDate){var u=s.pixelRatio;try{for(e=r.length,c.clear(),c.drawImage(s._canvas,0,0,s.getWidth()/u,s.getHeight()/u),n=c.getImageData(0,0,l.getWidth(),l.getHeight()),i=0;i<e;i++)"function"==typeof(o=r[i])?(o.call(this,n),c.putImageData(n,0,0)):t.Util.error("Filter should be type of function, but got "+typeof o+" instead. Please check correct filters")}catch(e){t.Util.error("Unable to apply filter. "+e.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return s},n.prototype.on=function(t,e){if(3===arguments.length)return this._delegate.apply(this,arguments);var n,i,o,r,a,s=t.split(" "),l=s.length;for(n=0;n<l;n++)i=s[n],o=i.split("."),r=o[0],a=o[1]||"",this.eventListeners[r]||(this.eventListeners[r]=[]),this.eventListeners[r].push({name:a,handler:e});return this},n.prototype.off=function(t,e){var n,i,o,r,a,s,l=(t||"").split(" "),c=l.length;if(!t)for(i in this.eventListeners)this._off(i);for(n=0;n<c;n++)if(o=l[n],r=o.split("."),a=r[0],s=r[1],a)this.eventListeners[a]&&this._off(a,s,e);else for(i in this.eventListeners)this._off(i,s,e);return this},n.prototype.dispatchEvent=function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this},n.prototype.addEventListener=function(t,e){return this.on(t,function(t){e.call(this,t.evt)}),this},n.prototype.removeEventListener=function(t){return this.off(t),this},n.prototype._delegate=function(e,n,i){var o=this;this.on(e,function(e){for(var r=e.target.findAncestors(n,!0,o),a=0;a<r.length;a++)(e=t.Util.cloneObject(e)).currentTarget=r[a],i.call(r[a],e)})},n.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),a.DD._dragElements.delete(this._id),this._remove(),this},n.prototype._clearCaches=function(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(h)},n.prototype._remove=function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)},n.prototype.destroy=function(){e._removeId(this.id(),this);for(var t=(this.name()||"").split(/\s/g),n=0;n<t.length;n++){var i=t[n];e._removeName(i,this._id)}return this.remove(),this},n.prototype.getAttr=function(e){var n="get"+t.Util._capitalize(e);return t.Util._isFunction(this[n])?this[n]():this.attrs[e]},n.prototype.getAncestors=function(){for(var e=this.getParent(),n=new t.Collection;e;)n.push(e),e=e.getParent();return n},n.prototype.getAttrs=function(){return this.attrs||{}},n.prototype.setAttrs=function(e){var n,i;if(!e)return this;for(n in e)"children"!==n&&(i="set"+t.Util._capitalize(n),t.Util._isFunction(this[i])?this[i](e[n]):this._setAttr(n,e[n]));return this},n.prototype.isListening=function(){return this._getCache(h,this._isListening)},n.prototype._isListening=function(){var t=this.listening(),e=this.getParent();return"inherit"===t?!e||e.isListening():t},n.prototype.isVisible=function(){return this._getCache(p,this._isVisible)},n.prototype._isVisible=function(t){var e=this.visible(),n=this.getParent();return"inherit"===e?!n||n===t||n._isVisible(t):t&&t!==n?e&&n._isVisible(t):e},n.prototype.shouldDrawHit=function(){var t=this.getLayer();return!t&&this.isListening()&&this.isVisible()||t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()},n.prototype.show=function(){return this.visible(!0),this},n.prototype.hide=function(){return this.visible(!1),this},n.prototype.getZIndex=function(){return this.index||0},n.prototype.getAbsoluteZIndex=function(){var t,e,n,i,o=this.getDepth(),r=this,a=0;return"Stage"!==r.nodeType&&function s(l){for(t=[],e=l.length,n=0;n<e;n++)i=l[n],a++,i.nodeType!==d&&(t=t.concat(i.getChildren().toArray())),i._id===r._id&&(n=e);t.length>0&&t[0].getDepth()<=o&&s(t)}(r.getStage().getChildren()),a},n.prototype.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},n.prototype.setPosition=function(t){return this.x(t.x),this.y(t.y),this},n.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},n.prototype.getAbsolutePosition=function(e){for(var n=!1,i=this.parent;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!e&&(e=!0);var o=this.getAbsoluteTransform(e).getMatrix(),r=new t.Transform,a=this.offset();return r.m=o.slice(),r.translate(a.x,a.y),r.getTranslation()},n.prototype.setAbsolutePosition=function(t){var e,n=this._clearTransform();return this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,(e=this.getAbsoluteTransform()).invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(n),this},n.prototype._setTransform=function(t){var e;for(e in t)this.attrs[e]=t[e];this._clearCache(f),this._clearSelfAndDescendantCache(c)},n.prototype._clearTransform=function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(f),this._clearSelfAndDescendantCache(c),t},n.prototype.move=function(t){var e=t.x,n=t.y,i=this.x(),o=this.y();return void 0!==e&&(i+=e),void 0!==n&&(o+=n),this.setPosition({x:i,y:o}),this},n.prototype._eachAncestorReverse=function(t,e){var n,i,o=[],r=this.getParent();if(e&&e._id===this._id)t(this);else{for(o.unshift(this);r&&(!e||r._id!==e._id);)o.unshift(r),r=r.parent;for(n=o.length,i=0;i<n;i++)t(o[i])}},n.prototype.rotate=function(t){return this.rotation(this.rotation()+t),this},n.prototype.moveToTop=function(){if(!this.parent)return t.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},n.prototype.moveUp=function(){if(!this.parent)return t.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)},n.prototype.moveDown=function(){if(!this.parent)return t.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)},n.prototype.moveToBottom=function(){if(!this.parent)return t.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},n.prototype.setZIndex=function(e){if(!this.parent)return t.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&t.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this},n.prototype.getAbsoluteOpacity=function(){return this._getCache(l,this._getAbsoluteOpacity)},n.prototype._getAbsoluteOpacity=function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t},n.prototype.moveTo=function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this},n.prototype.toObject=function(){var e,n,i,o,r={},a=this.getAttrs();for(e in r.attrs={},a)n=a[e],t.Util.isObject(n)&&!t.Util._isPlainObject(n)&&!t.Util._isArray(n)||(i="function"==typeof this[e]&&this[e],delete a[e],o=i?i.call(this):null,a[e]=n,o!==n&&(r.attrs[e]=n));return r.className=this.getClassName(),t.Util._prepareToStringify(r)},n.prototype.toJSON=function(){return JSON.stringify(this.toObject())},n.prototype.getParent=function(){return this.parent},n.prototype.findAncestors=function(t,e,n){var i=[];e&&this._isMatch(t)&&i.push(this);for(var o=this.parent;o;){if(o===n)return i;o._isMatch(t)&&i.push(o),o=o.parent}return i},n.prototype.isAncestorOf=function(t){return!1},n.prototype.findAncestor=function(t,e,n){return this.findAncestors(t,e,n)[0]},n.prototype._isMatch=function(e){if(!e)return!1;if("function"==typeof e)return e(this);var n,i,o=e.replace(/ /g,"").split(","),r=o.length;for(n=0;n<r;n++)if(i=o[n],t.Util.isValidSelector(i)||(t.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),t.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),t.Util.warn("Konva is awesome, right?")),"#"===i.charAt(0)){if(this.id()===i.slice(1))return!0}else if("."===i.charAt(0)){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1},n.prototype.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},n.prototype.getStage=function(){return this._getCache("stage",this._getStage)},n.prototype._getStage=function(){var t=this.getParent();return t?t.getStage():void 0},n.prototype.fire=function(t,e,n){return(e=e||{}).target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this},n.prototype.getAbsoluteTransform=function(t){return t?this._getAbsoluteTransform(t):this._getCache(c,this._getAbsoluteTransform)},n.prototype._getAbsoluteTransform=function(e){var n;if(e)return n=new t.Transform,this._eachAncestorReverse(function(t){var e=t.transformsEnabled();"all"===e?n.multiply(t.getTransform()):"position"===e&&n.translate(t.x()-t.offsetX(),t.y()-t.offsetY())},e),n;n=this.parent?this.parent.getAbsoluteTransform().copy():new t.Transform;var i=this.transformsEnabled();return"all"===i?n.multiply(this.getTransform()):"position"===i&&n.translate(this.x()-this.offsetX(),this.y()-this.offsetY()),n},n.prototype.getAbsoluteScale=function(t){return t?this._getAbsoluteScale(t):this._getCache(u,this._getAbsoluteScale)},n.prototype._getAbsoluteScale=function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var n=1,i=1;return this._eachAncestorReverse(function(t){n*=t.scaleX(),i*=t.scaleY()},t),{x:n,y:i}},n.prototype.getAbsoluteRotation=function(){for(var t=this,e=0;t;)e+=t.rotation(),t=t.getParent();return e},n.prototype.getTransform=function(){return this._getCache(f,this._getTransform)},n.prototype._getTransform=function(){var e=new t.Transform,n=this.x(),i=this.y(),o=r.Konva.getAngle(this.rotation()),a=this.scaleX(),s=this.scaleY(),l=this.skewX(),c=this.skewY(),u=this.offsetX(),h=this.offsetY();return 0===n&&0===i||e.translate(n,i),0!==o&&e.rotate(o),0===l&&0===c||e.skew(l,c),1===a&&1===s||e.scale(a,s),0===u&&0===h||e.translate(-1*u,-1*h),e},n.prototype.clone=function(e){var n,i,o,r,a,s=t.Util.cloneObject(this.attrs);for(n in e)s[n]=e[n];var l=new this.constructor(s);for(n in this.eventListeners)for(i=this.eventListeners[n],o=i.length,r=0;r<o;r++)(a=i[r]).name.indexOf("konva")<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(a));return l},n.prototype._toKonvaCanvas=function(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),i=void 0!==t.x?t.x:e.x,r=void 0!==t.y?t.y:e.y,a=t.pixelRatio||1,s=new o.SceneCanvas({width:t.width||e.width||(n?n.width():0),height:t.height||e.height||(n?n.height():0),pixelRatio:a}),l=s.getContext();return l.save(),(i||r)&&l.translate(-1*i,-1*r),this.drawScene(s),l.restore(),s},n.prototype.toCanvas=function(t){return this._toKonvaCanvas(t)._canvas},n.prototype.toDataURL=function(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(i),i},n.prototype.toImage=function(e){if(!e||!e.callback)throw"callback required for toImage method config argument";var n=e.callback;delete e.callback,t.Util._urlToImage(this.toDataURL(e),function(t){n(t)})},n.prototype.setSize=function(t){return this.width(t.width),this.height(t.height),this},n.prototype.getSize=function(){return{width:this.width(),height:this.height()}},n.prototype.getClassName=function(){return this.className||this.nodeType},n.prototype.getType=function(){return this.nodeType},n.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():r.Konva.dragDistance},n.prototype._off=function(t,e,n){var i,o,r,a=this.eventListeners[t];for(i=0;i<a.length;i++)if(o=a[i].name,r=a[i].handler,!("konva"===o&&"konva"!==e||e&&o!==e||n&&n!==r)){if(a.splice(i,1),0===a.length){delete this.eventListeners[t];break}i--}},n.prototype._fireChangeEvent=function(t,e,n){this._fire(t+"Change",{oldVal:e,newVal:n})},n.prototype.setId=function(t){var n=this.id();return e._removeId(n,this),function(t,n){n&&(e.ids[n]=t)}(this,t),this._setAttr("id",t),this},n.prototype.setName=function(t){var n,i,o=(this.name()||"").split(/\s/g),r=(t||"").split(/\s/g);for(i=0;i<o.length;i++)n=o[i],-1===r.indexOf(n)&&n&&e._removeName(n,this._id);for(i=0;i<r.length;i++)n=r[i],-1===o.indexOf(n)&&n&&e._addName(this,n);return this._setAttr("name",t),this},n.prototype.addName=function(t){if(!this.hasName(t)){var e=this.name(),n=e?e+" "+t:t;this.setName(n)}return this},n.prototype.hasName=function(t){if(!t)return!1;var e=this.name();if(!e)return!1;var n=(e||"").split(/\s/g);return-1!==n.indexOf(t)},n.prototype.removeName=function(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.setName(e.join(" "))),this},n.prototype.setAttr=function(e,n){var i=this["set"+t.Util._capitalize(e)];return t.Util._isFunction(i)?i.call(this,n):this._setAttr(e,n),this},n.prototype._setAttr=function(e,n){var i=this.attrs[e];(i!==n||t.Util.isObject(n))&&(null==n?delete this.attrs[e]:this.attrs[e]=n,this._fireChangeEvent(e,i,n))},n.prototype._setComponentAttr=function(t,e,n){var i;void 0!==n&&((i=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,i,n))},n.prototype._fireAndBubble=function(t,e,n){e&&this.nodeType===d&&(e.target=this);var i=("mouseenter"===t||"mouseleave"===t)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n);if(!i){this._fire(t,e);var o=("mouseenter"===t||"mouseleave"===t)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!o&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n):this._fireAndBubble.call(this.parent,t,e))}},n.prototype._fire=function(t,e){var n,i=this.eventListeners[t];if(i)for((e=e||{}).currentTarget=this,e.type=t,n=0;n<i.length;n++)i[n].handler.call(this,e)},n.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},n.prototype._createDragElement=function(t){var e=t?t.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition(),o=n._getPointerById(e)||n._changedPointerPositions[0]||i;a.DD._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-i.x,y:o.y-i.y},dragStatus:"ready",pointerId:e})},n.prototype.startDrag=function(t){a.DD._dragElements.has(this._id)||this._createDragElement(t);var e=a.DD._dragElements.get(this._id);e.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},!0)},n.prototype._setDragPosition=function(e,n){var i=this.getStage()._getPointerById(n.pointerId);if(i){var o={x:i.x-n.offset.x,y:i.y-n.offset.y},r=this.dragBoundFunc();if(void 0!==r){var a=r.call(this,o,e);a?o=a:t.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===o.x&&this._lastPos.y===o.y||(this.setAbsolutePosition(o),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=o}},n.prototype.stopDrag=function(t){var e=a.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),a.DD._endDragBefore(t),a.DD._endDragAfter(t)},n.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()},n.prototype.isDragging=function(){var t=a.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus},n.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var e=this,n=void 0!==t.evt.button,i=!n||r.Konva.dragButtons.indexOf(t.evt.button)>=0;if(i&&!this.isDragging()){var o=!1;a.DD._dragElements.forEach(function(t){e.isAncestorOf(t.node)&&(o=!0)}),o||this._createDragElement(t)}})},n.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();t&&a.DD._dragElements.has(this._id)&&this.stopDrag()}},n.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},n.create=function(e,n){return t.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)},n._createNode=function(e,i){var o,a,s,l=n.prototype.getClassName.call(e),c=e.children;i&&(e.attrs.container=i),r._NODES_REGISTRY[l]||(t.Util.warn('Can not find a node with class name "'+l+'". Fallback to "Shape".'),l="Shape");var u=r._NODES_REGISTRY[l];if(o=new u(e.attrs),c)for(a=c.length,s=0;s<a;s++)o.add(n._createNode(c[s]));return o},n}();e.Node=b,b.prototype.nodeType="Node",b.prototype._attrsAffectingSize=[],i.Factory.addGetterSetter(b,"zIndex"),i.Factory.addGetterSetter(b,"absolutePosition"),i.Factory.addGetterSetter(b,"position"),i.Factory.addGetterSetter(b,"x",0,s.getNumberValidator()),i.Factory.addGetterSetter(b,"y",0,s.getNumberValidator()),i.Factory.addGetterSetter(b,"globalCompositeOperation","source-over",s.getStringValidator()),i.Factory.addGetterSetter(b,"opacity",1,s.getNumberValidator()),i.Factory.addGetterSetter(b,"name","",s.getStringValidator()),i.Factory.addGetterSetter(b,"id","",s.getStringValidator()),i.Factory.addGetterSetter(b,"rotation",0,s.getNumberValidator()),i.Factory.addComponentsGetterSetter(b,"scale",["x","y"]),i.Factory.addGetterSetter(b,"scaleX",1,s.getNumberValidator()),i.Factory.addGetterSetter(b,"scaleY",1,s.getNumberValidator()),i.Factory.addComponentsGetterSetter(b,"skew",["x","y"]),i.Factory.addGetterSetter(b,"skewX",0,s.getNumberValidator()),i.Factory.addGetterSetter(b,"skewY",0,s.getNumberValidator()),i.Factory.addComponentsGetterSetter(b,"offset",["x","y"]),i.Factory.addGetterSetter(b,"offsetX",0,s.getNumberValidator()),i.Factory.addGetterSetter(b,"offsetY",0,s.getNumberValidator()),i.Factory.addGetterSetter(b,"dragDistance",null,s.getNumberValidator()),i.Factory.addGetterSetter(b,"width",0,s.getNumberValidator()),i.Factory.addGetterSetter(b,"height",0,s.getNumberValidator()),i.Factory.addGetterSetter(b,"listening","inherit",function(e){var n=!0===e||!1===e||"inherit"===e;return n||t.Util.warn(e+' is a not valid value for "listening" attribute. The value may be true, false or "inherit".'),e}),i.Factory.addGetterSetter(b,"preventDefault",!0,s.getBooleanValidator()),i.Factory.addGetterSetter(b,"filters",null,function(t){return this._filterUpToDate=!1,t}),i.Factory.addGetterSetter(b,"visible","inherit",function(e){var n=!0===e||!1===e||"inherit"===e;return n||t.Util.warn(e+' is a not valid value for "visible" attribute. The value may be true, false or "inherit".'),e}),i.Factory.addGetterSetter(b,"transformsEnabled","all",s.getStringValidator()),i.Factory.addGetterSetter(b,"size"),i.Factory.addGetterSetter(b,"dragBoundFunc"),i.Factory.addGetterSetter(b,"draggable",!1,s.getBooleanValidator()),i.Factory.backCompat(b,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),t.Collection.mapMethods(b)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.CANVAS_RATIO=9/16,e.CANVAS_WIDTH=800,e.CANVAS_HEIGHT=450,e.EDIT_LABLE_DXY={dx:5,dy:-15},e.RECOVER_NUM=10,e.EDIT_CIRCLE_RADIUS=4,e.DRAWTOOL_PENCIL="brush",e.DRAWTOOL_RECT="rectangle",e.DRAWTOOL_LINE="line",e.DRAWTOOL_LINEARROW="linearrow",e.DRAWTOOL_ELLIPSE="ellipse",e.DRAWTOOL_ERASER="eraser",e.DRAWTOOL_ERASER_RECTANGLE="eraserrectangle",e.DRAWTOOL_TRIANGLE="triangle",e.DRAWTOOL_STAR="star",e.DRAWTOOL_TEXTTOOL="texttool",e.DRAWTOOL_PRESSUREPEN="pressurepen",e.DRAWTOOL_SMOOTHLINE="smoothline",e.DRAWTOOL_ROBOPEN="robopen",e.DRAWTOOL_RECT_EDIT="rectangle_edit",e.DRAWTOOL_CIRCLE_EDIT="circle_edit",e.DRAWTOOL_POLYGON_EDIT="polygon_edit",e.DRAWTOOL_ELLIPSE_EDIT="ellipse_edit",e.DRAWTOOL_SIMPLE_ELLIPSE_EDIT="s_ellipse_edit",e.DRAWTOOL_SIMPLE_TRIANGLE_EDIT="s_triangle_edit",e.DRAWTOOL_LINE_EDIT="line_edit",e.DRAWTOOL_LINEDASH_EDIT="linedash_edit",e.DRAWTOOL_LINEARROW_EDIT="linearrow_edit",e.DRAWTOOL_LINEARROWDASH_EDIT="linearrowdash_edit",e.DRAWTOOL_TEXTTOOL_EDIT="text_edit",e.DRAWTOOL_COORDSYS_EDIT="coord_sys",e.DRAWTOOL_SELCTE_SHAPE="select_shape",e.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE="edit_regular",e.DRAWTOOL_EDIT_SHAPE_DELETE="edit_delete",e.DRAWTOOL_EDIT_PAGE_DELETE="edit_delete_page",e.DRAWTOOL_EDIT_RECOVER="edit_recover"})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(4),a=n(1),s=n(7),l=n(3),c=n(2),u=n(49),h="hasShadow",d="shadowRGBA",f="patternImage",p="linearGradient",y="radialGradient";function g(){return o||(o=r.Util.createCanvasElement().getContext("2d"))}function v(){this._clearCache(h)}function m(){this._clearCache(d)}function b(){this._clearCache(f)}function _(){this._clearCache(p)}function w(){this._clearCache(y)}e.shapes={};var x=function(t){function n(n){for(var i,o=t.call(this,n)||this;!(i=r.Util.getRandomColor())||i in e.shapes;);return o.colorKey=i,e.shapes[i]=o,o.on("shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),o.on("shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),o.on("fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",b),o.on("fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",_),o.on("fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",w),o}return i(n,t),n.prototype.getContext=function(){return this.getLayer().getContext()},n.prototype.getCanvas=function(){return this.getLayer().getCanvas()},n.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},n.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},n.prototype.hasShadow=function(){return this._getCache(h,this._hasShadow)},n.prototype._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},n.prototype._getFillPattern=function(){return this._getCache(f,this.__getFillPattern)},n.prototype.__getFillPattern=function(){if(this.fillPatternImage()){var t=g(),e=t.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");return e}},n.prototype._getLinearGradient=function(){return this._getCache(p,this.__getLinearGradient)},n.prototype.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=g(),n=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),o=e.createLinearGradient(n.x,n.y,i.x,i.y),r=0;r<t.length;r+=2)o.addColorStop(t[r],t[r+1]);return o}},n.prototype._getRadialGradient=function(){return this._getCache(y,this.__getRadialGradient)},n.prototype.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=g(),n=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),o=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),r=0;r<t.length;r+=2)o.addColorStop(t[r],t[r+1]);return o}},n.prototype.getShadowRGBA=function(){return this._getCache(d,this._getShadowRGBA)},n.prototype._getShadowRGBA=function(){if(this.hasShadow()){var t=r.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}},n.prototype.hasFill=function(){return this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())},n.prototype.hasStroke=function(){return this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())},n.prototype.hasHitStroke=function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t},n.prototype.intersects=function(t){var e=this.getStage(),n=e.bufferHitCanvas;return n.getContext().clear(),this.drawHit(n),n.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0},n.prototype.destroy=function(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this},n.prototype._useBufferCanvas=function(t){return!(t&&!this.hasShadow()||!this.perfectDrawEnabled()||1===this.getAbsoluteOpacity()||!this.hasFill()||!this.hasStroke()||!this.getStage())},n.prototype.setStrokeHitEnabled=function(t){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},n.prototype.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},n.prototype.getSelfRect=function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}},n.prototype.getClientRect=function(t){var e=(t=t||{}).skipTransform,n=t.relativeTo,i=this.getSelfRect(),o=!t.skipStroke&&this.hasStroke(),r=o&&this.strokeWidth()||0,a=i.width+r,s=i.height+r,l=!t.skipShadow&&this.hasShadow(),c=l?this.shadowOffsetX():0,u=l?this.shadowOffsetY():0,h=a+Math.abs(c),d=s+Math.abs(u),f=l&&this.shadowBlur()||0,p=h+2*f,y=d+2*f,g=0;Math.round(r/2)!==r/2&&(g=1);var v={width:p+g,height:y+g,x:-Math.round(r/2+f)+Math.min(c,0)+i.x,y:-Math.round(r/2+f)+Math.min(u,0)+i.y};return e?v:this._transformedRect(v,n)},n.prototype.drawScene=function(t,e,n,i){var o,r,a,s=this.getLayer(),l=t||s.getCanvas(),c=l.getContext(),u=this._getCanvasCache(),h=this.sceneFunc(),d=this.hasShadow(),f=this.hasStroke();if(!this.isVisible()&&!n)return this;if(u)return c.save(),s._applyTransform(this,c,e),this._drawCachedSceneCanvas(c),c.restore(),this;if(!h)return this;if(c.save(),this._useBufferCanvas(n)&&!i){if(o=this.getStage(),r=o.bufferCanvas,(a=r.getContext()).clear(),a.save(),a._applyLineJoin(this),!n)if(s)s._applyTransform(this,a,e);else{var p=this.getAbsoluteTransform(e).getMatrix();c.transform(p[0],p[1],p[2],p[3],p[4],p[5])}h.call(this,a,this),a.restore();var y=r.pixelRatio;d&&!l.hitCanvas?(c.save(),c._applyShadow(this),c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(r._canvas,0,0,r.width/y,r.height/y),c.restore()):(c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(r._canvas,0,0,r.width/y,r.height/y))}else{if(c._applyLineJoin(this),!n)if(s)s._applyTransform(this,c,e);else{var g=this.getAbsoluteTransform(e).getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5])}d&&f&&!l.hitCanvas?(c.save(),n||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c._applyShadow(this),h.call(this,c,this),c.restore(),this.hasFill()&&this.shadowForStrokeEnabled()&&h.call(this,c,this)):d&&!l.hitCanvas?(c.save(),n||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c._applyShadow(this),h.call(this,c,this),c.restore()):(n||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),h.call(this,c,this))}return c.restore(),this},n.prototype.drawHit=function(t,e,n){var i=this.getLayer(),o=t||i.hitCanvas,a=o&&o.getContext(),s=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||(console.log(this),r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),!this.shouldDrawHit()&&!n)return this;if(c)return a.save(),i._applyTransform(this,a,e),this._drawCachedHitCanvas(a),a.restore(),this;if(!s)return this;if(a.save(),a._applyLineJoin(this),!n)if(i)i._applyTransform(this,a,e);else{var u=this.getAbsoluteTransform(e).getMatrix();a.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return s.call(this,a,this),a.restore(),this},n.prototype.drawHitFromCache=function(t){void 0===t&&(t=0);var e,n,i,o,a,s=this._getCanvasCache(),l=this._getCachedSceneCanvas(),c=s.hit,u=c.getContext(),h=c.getWidth(),d=c.getHeight();u.clear(),u.drawImage(l._canvas,0,0,h,d);try{for(e=u.getImageData(0,0,h,d),n=e.data,i=n.length,o=r.Util._hexToRgb(this.colorKey),a=0;a<i;a+=4)n[a+3]>t?(n[a]=o.r,n[a+1]=o.g,n[a+2]=o.b,n[a+3]=255):n[a+3]=0;u.putImageData(e,0,0)}catch(t){r.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this},n.prototype.hasPointerCapture=function(t){return u.hasPointerCapture(t,this)},n.prototype.setPointerCapture=function(t){u.setPointerCapture(t,this)},n.prototype.releaseCapture=function(t){u.releaseCapture(t,this)},n}(s.Node);e.Shape=x,x.prototype._fillFunc=function(t){t.fill()},x.prototype._strokeFunc=function(t){t.stroke()},x.prototype._fillFuncHit=function(t){t.fill()},x.prototype._strokeFuncHit=function(t){t.stroke()},x.prototype._centroid=!1,x.prototype.nodeType="Shape",c._registerNode(x),a.Factory.addGetterSetter(x,"stroke",void 0,l.getStringValidator()),a.Factory.addGetterSetter(x,"strokeWidth",2,l.getNumberValidator()),a.Factory.addGetterSetter(x,"hitStrokeWidth","auto",l.getNumberOrAutoValidator()),a.Factory.addGetterSetter(x,"strokeHitEnabled",!0,l.getBooleanValidator()),a.Factory.addGetterSetter(x,"perfectDrawEnabled",!0,l.getBooleanValidator()),a.Factory.addGetterSetter(x,"shadowForStrokeEnabled",!0,l.getBooleanValidator()),a.Factory.addGetterSetter(x,"lineJoin"),a.Factory.addGetterSetter(x,"lineCap"),a.Factory.addGetterSetter(x,"sceneFunc"),a.Factory.addGetterSetter(x,"hitFunc"),a.Factory.addGetterSetter(x,"dash"),a.Factory.addGetterSetter(x,"dashOffset",0,l.getNumberValidator()),a.Factory.addGetterSetter(x,"shadowColor",void 0,l.getStringValidator()),a.Factory.addGetterSetter(x,"shadowBlur",0,l.getNumberValidator()),a.Factory.addGetterSetter(x,"shadowOpacity",1,l.getNumberValidator()),a.Factory.addComponentsGetterSetter(x,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(x,"shadowOffsetX",0,l.getNumberValidator()),a.Factory.addGetterSetter(x,"shadowOffsetY",0,l.getNumberValidator()),a.Factory.addGetterSetter(x,"fillPatternImage"),a.Factory.addGetterSetter(x,"fill",void 0,l.getStringValidator()),a.Factory.addGetterSetter(x,"fillPatternX",0,l.getNumberValidator()),a.Factory.addGetterSetter(x,"fillPatternY",0,l.getNumberValidator()),a.Factory.addGetterSetter(x,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(x,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(x,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(x,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(x,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(x,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(x,"fillEnabled",!0),a.Factory.addGetterSetter(x,"strokeEnabled",!0),a.Factory.addGetterSetter(x,"shadowEnabled",!0),a.Factory.addGetterSetter(x,"dashEnabled",!0),a.Factory.addGetterSetter(x,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(x,"fillPriority","color"),a.Factory.addComponentsGetterSetter(x,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(x,"fillPatternOffsetX",0,l.getNumberValidator()),a.Factory.addGetterSetter(x,"fillPatternOffsetY",0,l.getNumberValidator()),a.Factory.addComponentsGetterSetter(x,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(x,"fillPatternScaleX",1,l.getNumberValidator()),a.Factory.addGetterSetter(x,"fillPatternScaleY",1,l.getNumberValidator()),a.Factory.addComponentsGetterSetter(x,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(x,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(x,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(x,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(x,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(x,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(x,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(x,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(x,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(x,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(x,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(x,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(x,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(x,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(x,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(x,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(x,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(x,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(x,"fillPatternRotation",0),a.Factory.backCompat(x,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),r.Collection.mapMethods(x)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(85);function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==e(t)&&"function"!=typeof t)return{default:t};var n=i();if(n&&n.has(t))return n.get(t);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=r?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=t[a]}return o.default=t,n&&n.set(t,o),o}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=n(67)()})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.zmMovedDom=e.hoverImg=e.makeUUID=e.testdata=void 0,e.getUrlVars=function(t){for(var e,n=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<i.length;o++)e=i[o].split("="),n.push(e[0]),n[e[0]]=e[1];return n[t]},e.hexToRgba=function(t,e){return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")"},e.makeEditPoi=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return console.log("makeEditPoi",n),new Konva.Circle({x:-10,y:-10,name:"editpoi",radius:t.EDIT_CIRCLE_RADIUS,fill:"white",draggable:!1,stroke:e.stroke,shadowEnabled:!1,shadowColor:e.stroke,shadowBlur:10,visible:n,shadowOpacity:1})},e.makeTextPoi=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Konva.Text({x:-10,y:-10,width:20,fill:t.stroke,text:e,stroke:"white",strokeWidth:1,fontSize:12,align:"left",visible:n,fontFamily:"Times New Roman"})},e.makeTransformer=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableMiu;return new Konva.Transformer({rotateEnabled:!1,anchorSize:7,anchorCornerRadius:3,borderStroke:"#298DF8",enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:function(e,n){return console.log("oldBoundBox,newBoundBox",e,n),t&&(n.width<0||n.height<0)?e:n}})},e.reBuildTextStroke=function(t){var e=t.getContext().fillStrokeShape;t.getContext().fillStrokeShape=function(t){t instanceof Konva.Text?(t.getStrokeEnabled()&&this._stroke(t),t.getFillEnabled()&&this._fill(t)):e.call(this,t)}},e.makeMoveHover=function(t){var e=this;t.on("mouseenter",function(t){if(e.stage.canvasaction.isSelectMode()&&e.isSelected){t.cancelBubble=!0;var n=t.target;n.shadowEnabled(!0),e.showlayer.batchDraw(),e.stage.container().style.cursor="url('"+i+"') 5 5,auto",console.log("mouseenter")}}),t.on("mouseleave",function(t){if(e.stage.canvasaction.isSelectMode()&&e.isSelected){var n=t.target;n.shadowEnabled(!1),e.showlayer.batchDraw(),e.stage.container().style.cursor="move"}})},e.getActionItemUid=function(e){e[0],e[1],e[2];var n=e[3];return[t.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,t.DRAWTOOL_EDIT_SHAPE_DELETE].includes(n)?e[5]&&e[5][0]:e[6]&&e[6][0]},e.isMobile=function(){return navigator&&navigator.userAgent&&(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.maxTouchPoints>1)};var t=n(8);e.testdata=[],e.makeUUID=function(){return Number(Math.random().toString().substr(3,length)+Date.now()).toString(36)};var i=e.hoverImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAZCAYAAAA14t7uAAADh0lEQVRIS7WVXUiTURjHj8vlx5y6NiQSFD8QwfAmUURQr0qEBJFdBKLdSGLgZFfrQlmCCJp4I114MZgfixQTImJQmDehoASxlBJTGAvNr23O1Onm2/Mf71nHOW1d9MKfc97zHn7v/zzPc86JY//piRO46PN3tJL8DS3vx2xDBClkMG8BOZMFMPoxPxwM2DVS/NbW1oOCgoJXHo8HsCApIAvgmN1zMKBKUoLf738bCAT2W1tbjaOjo24a88s6jVjBle45OJ5mXSclu93u5xsbG/rc3FwngdtbWlo+0/gv0hEJcKyAu78ULoITaVbK+vr6k5GRkfalpSVpeHj4hNreioqKF/TNRzqU3YvwqImNBKfOzc09XFlZ6WlubmaFhYVsampKUqvVr2tqap4uLy9vy/Bj2T1yEDXuYoyTaFKqzWa7l5mZaamqqgotU6VSMXLO6urqvnV3dxv7+/uXafhACA3gF0IjghNoQprBYCg2Go327Ozsc/Fra2uT+vr6DmZmZrroJ29kOA8Nh4dLUiw3gFPT09Nv7uzsLCYlJcWfniJXf57S0lI2OTkpHR8fW8vLy5/t7e155MSichB3/oPwTkMdoyrUJN3R0dH7oqKiW2traxeyrtVq2fj4uFRWVvapo6PDaLVaMQlVw+Me2lTizgM4haTd3d216fX6O7TsC2AMKBQK1tnZyUwm07bdbjfU19d/oGGEBfBQxYhgbBAV6YbT6Rw0m833LRbLObBGo2E5OTlcUmNjIysuLg66XK7erKysQSGhYTAAACeTNA6HwzQ9Pf2oq6srBKYqYfPz8ywjI+PQ5/NtkTZILq/X6yR9pxV+7enpcVCZIiRITFA83bD7UHKa2dnZZnLd3dTUxJRKJaN3iQATtbW1E/KS+bKxGwHDO/oXQgFjOC8ATqOtfJfKzVJZWckGBgZYQ0PDYl5enjkYDHplECCoBLg7EfohtyRJdAxwqOQo27eplt9RTUtjY2M/q6urHy8sLPygbwBjc4jlBRBX+JgVwSg5gFU6nU67ubn5heJ4NjQ01EYVgIMI0H15yWFncBdF4TpGKABGAhEONR2fHymJ1pKSkpcyDE4RT7i99IwACE/k1YQEwnXi6urqw/z8/EnqY3mA8bjyk40zoraRYLgGHM4hfAcYsJjP4kjHPByA86sKY/yKEu+/K91GA3O4eGNHJuev0MvA0cb/+fr/DeeQji288n1qAAAAAElFTkSuQmCC";e.zmMovedDom=function(t){var e=null,n=0,i=0,o=t.dragHandle,r=t.dragTarget,a=t.parentDom,s=t.cb;function l(t){t.stopPropagation(),(e=r).style.position="absolute","mousedown"==t.type?(n=t.clientX-e.offsetLeft,i=t.clientY-e.offsetTop,console.log("addEventListener mousemove"),window.addEventListener("mousemove",c,!0)):"touchstart"==t.type&&(console.log("touchmove"),n=t.targetTouches[0].clientX-e.offsetLeft,i=t.targetTouches[0].clientY-e.offsetTop,window.addEventListener("touchmove",c,!0))}function c(t){if(t.preventDefault(),t.stopPropagation(),console.log("dragObject move move"),null!=e)if("mousemove"==t.type){var o=t.clientX-n,r=t.clientY-i,l=a?a.getBoundingClientRect().left:0,c=a?a.getBoundingClientRect().top:0;o<l&&(o=l),r<c&&(r=c),a?(r+e.offsetHeight>a.offsetHeight+a.getBoundingClientRect().top&&(r=a.offsetHeight+a.getBoundingClientRect().top-e.offsetHeight),o+e.offsetWidth>a.offsetWidth+a.getBoundingClientRect().left&&(o=a.offsetWidth+a.getBoundingClientRect().left-e.offsetWidth)):(r+e.offsetHeight>e.parentElement.scrollHeight&&(r=e.parentElement.scrollHeight-e.offsetHeight),o+e.offsetWidth>e.parentElement.offsetWidth&&(o=e.parentElement.offsetWidth-e.offsetWidth)),e.style.left=o+"px",e.style.top=r+"px",s&&s({type:"move",x:o,y:r})}else if("touchmove"==t.type){var u=t.targetTouches[0].clientX-n,h=t.targetTouches[0].clientY-i,d=a?a.getBoundingClientRect().left:0,f=a?a.getBoundingClientRect().top:0;u<d&&(u=d),h<f&&(h=f),a?(h+e.offsetHeight>a.offsetHeight+a.getBoundingClientRect().top&&(h=a.offsetHeight+a.getBoundingClientRect().top-e.offsetHeight),u+e.offsetWidth>a.offsetWidth+a.getBoundingClientRect().left&&(u=a.offsetWidth+a.getBoundingClientRect().left-e.offsetWidth)):(h+e.offsetHeight>e.parentElement.scrollHeight&&(h=e.parentElement.scrollHeight-e.offsetHeight),u+e.offsetWidth>e.parentElement.offsetWidth&&(u=e.parentElement.offsetWidth-e.offsetWidth)),e.style.left=u+"px",e.style.top=h+"px",s&&s({type:"move",x:u,y:h})}}function u(t){e&&(e=null,console.log("remove mousemove"),window.removeEventListener("mousemove",c,!0),window.removeEventListener("touchmove",c,!0),s&&s({type:"moveend"})),o&&o.isConnected||(document.removeEventListener("mouseup",u),document.removeEventListener("touchend",u))}console.log("addEventListener mousedown"),o.addEventListener("mousedown",l,!0),r.addEventListener("touchstart",l,!0),document.addEventListener("mouseup",u),document.addEventListener("touchend",u)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(43),n(91),n(92)],void 0===(r="function"==typeof(i=function(t,e,i,o,r){"use strict";var a=n(10),s=n(0);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=s(e),o=s(o),r=a(r);var c=(0,i.createStore)((0,i.combineReducers)(function(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?l(Object(i),!0).forEach(function(n){(0,e.default)(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},r)),(0,i.applyMiddleware)(o.default));t.default=c})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerContext=t.lessonStage=t.lessonProgress=t.pdfHost=t.coursewareTypeMap=t.APP_ID=t.publicKey=void 0,e=i(e),t.publicKey="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKzqjw/P0Vy8CSvRkBpEadYwwYPl8Mk7uOe3IulybIIqVlnsdUJcj3uaYTbXFzk5CSAdvJ9i0MN6mAMYqdTvVEUCAwEAAQ==",t.APP_ID="11783",t.coursewareTypeMap={zml:"zml",pdf:"pdf",draftboard:"draftboard"},t.pdfHost={IMG:"https://image.zmlearn.com/",DOC:"https://doc.zmlearn.com/",OSS:"https://zm-chat-slides.oss-cn-hangzhou.aliyuncs.com/"},t.lessonProgress={pre:"PRE_LESSON",in:"IN_LESSON",after:"AFTER_LESSON",close:"CLOSE_LESSON"},t.lessonStage={started:"LESSON_STARTED",notStart:"LESSON_NOT_START"};const o=e.default.createContext();t.PlayerContext=o})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(57),i=n(202),o=Object.prototype.toString;function r(t){return"[object Array]"===o.call(t)}function a(t){return null!==t&&"object"==typeof t}function s(t){return"[object Function]"===o.call(t)}function l(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),r(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:r,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:s,isStream:function(t){return a(t)&&s(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function t(){var e={};function n(n,i){"object"==typeof e[i]&&"object"==typeof n?e[i]=t(e[i],n):e[i]=n}for(var i=0,o=arguments.length;i<o;i++)l(arguments[i],n);return e},extend:function(t,n,i){return l(n,function(n,o){t[o]=i&&"function"==typeof n?e(n,i):n}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";function e(t,e){var n=function(t){for(var e=t.split(/([#.])/),n="",i="",o=[],r=0;r<e.length;r++){var a=e[r];"#"===a?i=e[++r]:"."===a?o.push(e[++r]):a.length&&(n=a)}return{tag:n||"div",id:i,className:o.join(" ")}}(t),i=n.tag,o=n.id,r=n.className,a=e?document.createElementNS(e,i):document.createElement(i);return o&&(a.id=o),r&&(e?a.setAttribute("class",r):a.className=r),a}function n(t,e){var n=m(t),o=m(e);return e===o&&o.__redom_view&&(e=o.__redom_view),o.parentNode&&(i(0,o,n),n.removeChild(o)),e}function i(t,e,n){var i=e.__redom_lifecycle;if(o(i))e.__redom_lifecycle={};else{var r=n;for(e.__redom_mounted&&l(e,"onunmount");r;){var a=r.__redom_lifecycle||{};for(var s in i)a[s]&&(a[s]-=i[s]);o(a)&&(r.__redom_lifecycle=null),r=r.parentNode}}}function o(t){if(null==t)return!0;for(var e in t)if(t[e])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.html=w,t.list=C,t.listPool=function(t,e,n){return new P(t,e,n)},t.mount=s,t.place=function(t,e){return new D(t,e)},t.router=function(t,e,n){return new A(t,e,n)},t.setAttr=function(t,e,n){d(t,e,n)},t.setChildren=E,t.setData=p,t.setStyle=c,t.setXlink=f,t.svg=L,t.text=y,t.unmount=n,t.s=t.h=t.el=t.Router=t.Place=t.ListPool=t.List=void 0;var r=["onmount","onremount","onunmount"],a="undefined"!=typeof window&&"ShadowRoot"in window;function s(t,e,n,o){var s=m(t),c=m(e);e===c&&c.__redom_view&&(e=c.__redom_view),e!==c&&(c.__redom_view=e);var u=c.__redom_mounted,h=c.parentNode;return u&&h!==s&&i(0,c,h),null!=n?o?s.replaceChild(c,m(n)):s.insertBefore(c,m(n)):s.appendChild(c),function(t,e,n,i){for(var o=e.__redom_lifecycle||(e.__redom_lifecycle={}),s=n===i,c=!1,u=0,h=r;u<h.length;u+=1){var d=h[u];s||t!==e&&d in t&&(o[d]=(o[d]||0)+1),o[d]&&(c=!0)}if(c){var f=n,p=!1;for((s||f&&f.__redom_mounted)&&(l(e,s?"onremount":"onmount"),p=!0);f;){var y=f.parentNode,g=f.__redom_lifecycle||(f.__redom_lifecycle={});for(var v in o)g[v]=(g[v]||0)+o[v];if(p)break;(f.nodeType===Node.DOCUMENT_NODE||a&&f instanceof ShadowRoot||y&&y.__redom_mounted)&&(l(f,s?"onremount":"onmount"),p=!0),f=y}}else e.__redom_lifecycle={}}(e,c,s,h),e}function l(t,e){"onmount"===e||"onremount"===e?t.__redom_mounted=!0:"onunmount"===e&&(t.__redom_mounted=!1);var n=t.__redom_lifecycle;if(n){var i=t.__redom_view,o=0;for(var r in i&&i[e]&&i[e](),n)r&&o++;if(o)for(var a=t.firstChild;a;){var s=a.nextSibling;l(a,e),a=s}}}function c(t,e,n){var i=m(t);if("object"==typeof e)for(var o in e)u(i,o,e[o]);else u(i,e,n)}function u(t,e,n){t.style[e]=null==n?"":n}var h="http://www.w3.org/1999/xlink";function d(t,e,n,i){var o=m(t),r="object"==typeof e;if(r)for(var a in e)d(o,a,e[a],i);else{var s=o instanceof SVGElement,l="function"==typeof n;if("style"===e&&"object"==typeof n)c(o,n);else if(s&&l)o[e]=n;else if("dataset"===e)p(o,n);else if(!s&&(e in o||l)&&"list"!==e)o[e]=n;else{if(s&&"xlink"===e)return void f(o,n);i&&"class"===e&&(n=o.className+" "+n),null==n?o.removeAttribute(e):o.setAttribute(e,n)}}}function f(t,e,n){if("object"==typeof e)for(var i in e)f(t,i,e[i]);else null!=n?t.setAttributeNS(h,e,n):t.removeAttributeNS(h,e,n)}function p(t,e,n){if("object"==typeof e)for(var i in e)p(t,i,e[i]);else null!=n?t.dataset[e]=n:delete t.dataset[e]}function y(t){return document.createTextNode(null!=t?t:"")}function g(t,e,n){for(var i=0,o=e;i<o.length;i+=1){var r=o[i];if(0===r||r){var a=typeof r;"function"===a?r(t):"string"===a||"number"===a?t.appendChild(y(r)):b(m(r))?s(t,r):r.length?g(t,r,n):"object"===a&&d(t,r,null,n)}}}function v(t){return"string"==typeof t?w(t):m(t)}function m(t){return t.nodeType&&t||!t.el&&t||m(t.el)}function b(t){return t&&t.nodeType}var _={};function w(t){for(var e,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];var o=typeof t;if("string"===o)e=S(t).cloneNode(!1);else if(b(t))e=t.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var r=t;e=new(Function.prototype.bind.apply(r,[null].concat(n)))}return g(m(e),n,!0),e}var x=w;t.el=x;var T=w;function S(t){return _[t]||(_[t]=e(t))}function E(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var o=m(t),r=function t(e,n,i){for(var o=i,r=new Array(n.length),a=0;a<n.length;a++)r[a]=n[a]&&m(n[a]);for(var l=0;l<n.length;l++){var c=n[l];if(c){var u=r[l];if(u!==o)if(b(u)){var h=o&&o.nextSibling,d=null!=c.__redom_index,f=d&&h===r[l+1];s(e,c,o,f),f&&(o=h)}else null!=c.length&&(o=t(e,c,o));else o=o.nextSibling}}return o}(t,e,o.firstChild);r;){var a=r.nextSibling;n(t,r),r=a}}t.h=T,w.extend=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=S(t);return w.bind.apply(w,[this,i].concat(e))};var P=function(t,e,n){this.View=t,this.initData=n,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=e&&(this.key="function"==typeof e?e:function(t){return function(e){return e[t]}}(e))};function C(t,e,n,i){return new O(t,e,n,i)}t.ListPool=P,P.prototype.update=function(t,e){for(var n=this.View,i=this.key,o=this.initData,r=null!=i,a=this.lookup,s={},l=new Array(t.length),c=this.views,u=0;u<t.length;u++){var h=t[u],d=void 0;if(r){var f=i(h);d=a[f]||new n(o,h,u,t),s[f]=d,d.__redom_id=f}else d=c[u]||new n(o,h,u,t);d.update&&d.update(h,u,t,e);var p=m(d.el);p.__redom_view=d,l[u]=d}this.oldViews=c,this.views=l,this.oldLookup=a,this.lookup=s};var O=function(t,e,n,i){this.View=e,this.initData=i,this.views=[],this.pool=new P(e,n,i),this.el=v(t),this.keySet=null!=n};t.List=O,O.prototype.update=function(t,e){void 0===t&&(t=[]);var i=this.keySet,o=this.views;this.pool.update(t,e);var r=this.pool,a=r.views,s=r.lookup;if(i)for(var l=0;l<o.length;l++){var c=o[l],u=c.__redom_id;null==s[u]&&(c.__redom_index=null,n(this,c))}for(var h=0;h<a.length;h++){var d=a[h];d.__redom_index=h}E(this,a),i&&(this.lookup=s),this.views=a},O.extend=function(t,e,n,i){return O.bind(O,t,e,n,i)},C.extend=O.extend;var D=function(t,e){this.el=y(""),this.visible=!1,this.view=null,this._placeholder=this.el,t instanceof Node?this._el=t:t.el instanceof Node?(this._el=t,this.view=t):this._View=t,this._initData=e};t.Place=D,D.prototype.update=function(t,e){var i=this._placeholder,o=this.el.parentNode;if(t){if(!this.visible)if(this._el)s(o,this._el,i),n(o,i),this.el=m(this._el),this.visible=t;else{var r=this._View,a=new r(this._initData);this.el=m(a),this.view=a,s(o,a,i),n(o,i)}this.view&&this.view.update&&this.view.update(e)}else if(this.visible){if(this._el)return s(o,i,this._el),n(o,this._el),this.el=i,void(this.visible=t);s(o,i,this.view),n(o,this.view),this.el=i,this.view=null}this.visible=t};var A=function(t,e,n){this.el=v(t),this.Views=e,this.initData=n};t.Router=A,A.prototype.update=function(t,e){if(t!==this.route){var n=this.Views,i=n[t];this.route=t,i&&(i instanceof Node||i.el instanceof Node)?this.view=i:this.view=i&&new i(this.initData,e),E(this.el,[this.view])}this.view&&this.view.update&&this.view.update(e,t)};var k="http://www.w3.org/2000/svg",I={};function L(t){for(var e,n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];var o=typeof t;if("string"===o)e=R(t).cloneNode(!1);else if(b(t))e=t.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var r=t;e=new(Function.prototype.bind.apply(r,[null].concat(n)))}return g(m(e),n,!0),e}var M=L;function R(t){return I[t]||(I[t]=e(t,k))}t.s=M,L.extend=function(t){var e=R(t);return L.bind(this,e)},L.ns=k})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(7),s=n(25),l=n(3),c=n(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=new o.Collection,e}return i(e,t),e.prototype.getChildren=function(t){if(!t)return this.children;var e=new o.Collection;return this.children.each(function(n){t(n)&&e.push(n)}),e},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.remove();return this.children=new o.Collection,this},e.prototype.destroyChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.destroy();return this.children=new o.Collection,this},e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var i=t[0];if(i.getParent())return i.moveTo(this),this;var o=this.children;return this._validateAdd(i),i._clearCaches(),i.index=o.length,i.parent=this,o.push(i),this._fire("add",{child:i}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),t.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return o.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0},e.prototype._generalFind=function(t,e){var n=[];return this._descendants(function(i){var o=i._isMatch(t);return o&&n.push(i),!(!o||!e)}),o.Collection.toCollection(n)},e.prototype._descendants=function(t){for(var e=0;e<this.children.length;e++){var n=this.children[e];if(t(n))return!0;if(n.hasChildren()&&n._descendants(t))return!0}return!1},e.prototype.toObject=function(){var t=a.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),n=e.length,i=0;i<n;i++){var o=e[i];t.children.push(o.toObject())}return t},e.prototype._getDescendants=function(t){for(var e=[],n=t.length,i=0;i<n;i++){var o=t[i];this.isAncestorOf(o)&&e.push(o)}return e},e.prototype.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},e.prototype.clone=function(t){var e=a.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},e.prototype.getAllIntersections=function(t){var e=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(t)&&e.push(n)}),e},e.prototype._setChildrenIndices=function(){this.children.each(function(t,e){t.index=e})},e.prototype.drawScene=function(t,e,n){var i=this.getLayer(),o=t||i&&i.getCanvas(),r=o&&o.getContext(),a=this._getCanvasCache(),s=a&&a.scene;return(this.isVisible()||n)&&(!n&&s?(r.save(),i._applyTransform(this,r,e),this._drawCachedSceneCanvas(r),r.restore()):this._drawChildren(o,"drawScene",e,!1,n,n)),this},e.prototype.drawHit=function(t,e,n){var i=this.getLayer(),o=t||i&&i.hitCanvas,r=o&&o.getContext(),a=this._getCanvasCache(),s=a&&a.hit;return(this.shouldDrawHit(o)||n)&&(!n&&s?(r.save(),i._applyTransform(this,r,e),this._drawCachedHitCanvas(r),r.restore()):this._drawChildren(o,"drawHit",e,!1,n,n)),this},e.prototype._drawChildren=function(t,e,n,i,o,r){var a,s,l=this.getLayer(),c=t&&t.getContext(),u=this.clipWidth(),h=this.clipHeight(),d=this.clipFunc(),f=u&&h||d;if(f&&l){c.save();var p=this.getAbsoluteTransform(n),y=p.getMatrix();c.transform(y[0],y[1],y[2],y[3],y[4],y[5]),c.beginPath(),d?d.call(this,c,this):(a=this.clipX(),s=this.clipY(),c.rect(a,s,u,h)),c.clip(),y=p.copy().invert().getMatrix(),c.transform(y[0],y[1],y[2],y[3],y[4],y[5])}var g="source-over"!==this.globalCompositeOperation()&&!r&&"drawScene"===e;g&&l&&(c.save(),c._applyGlobalCompositeOperation(this)),this.children.each(function(r){r[e](t,n,i,o)}),g&&l&&c.restore(),f&&l&&c.restore()},e.prototype.shouldDrawHit=function(t){if(t&&t.isCache)return!0;var e=this.getLayer(),n=!1;s.DD._dragElements.forEach(function(t){"dragging"===t.dragStatus&&t.node.getLayer()===e&&(n=!0)});var i=!c.Konva.hitOnDragEnabled&&n;return e&&e.hitGraphEnabled()&&this.isVisible()&&!i},e.prototype.getClientRect=function(t){var e,n,i,o,r=(t=t||{}).skipTransform,a=t.relativeTo,s={x:1/0,y:1/0,width:0,height:0},l=this;this.children.each(function(r){if(r.visible()){var a=r.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===a.width&&0===a.height||(void 0===e?(e=a.x,n=a.y,i=a.x+a.width,o=a.y+a.height):(e=Math.min(e,a.x),n=Math.min(n,a.y),i=Math.max(i,a.x+a.width),o=Math.max(o,a.y+a.height)))}});for(var c=this.find("Shape"),u=!1,h=0;h<c.length;h++){var d=c[h];if(d._isVisible(this)){u=!0;break}}return s=u&&void 0!==e?{x:e,y:n,width:i-e,height:o-n}:{x:0,y:0,width:0,height:0},r?s:this._transformedRect(s,a)},e}(a.Node);e.Container=u,r.Factory.addComponentsGetterSetter(u,"clip",["x","y","width","height"]),r.Factory.addGetterSetter(u,"clipX",void 0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"clipY",void 0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"clipWidth",void 0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"clipHeight",void 0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"clipFunc"),o.Collection.mapMethods(u)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,e){return{type:t,payload:e}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(4),a=n(48),s=n(2),l=n(1),c=n(3),u=function(){function t(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=t||{},n=e.pixelRatio||s.Konva.pixelRatio||function(){if(o)return o;var t,e,n=r.Util.createCanvasElement().getContext("2d");return t=s.Konva._global.devicePixelRatio||1,e=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,o=t/e}();this.pixelRatio=n,this._canvas=r.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return t.prototype.getContext=function(){return this.context},t.prototype.getPixelRatio=function(){return this.pixelRatio},t.prototype.setPixelRatio=function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},t.prototype.setWidth=function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio,n=this.getContext()._context;n.scale(e,e)},t.prototype.setHeight=function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio,n=this.getContext()._context;n.scale(e,e)},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.setSize=function(t,e){this.setWidth(t||0),this.setHeight(e||0)},t.prototype.toDataURL=function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return r.Util.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},t}();e.Canvas=u,l.Factory.addGetterSetter(u,"pixelRatio",void 0,c.getNumberValidator());var h=function(t){function e(e){void 0===e&&(e={width:0,height:0});var n=t.call(this,e)||this;return n.context=new a.SceneContext(n),n.setSize(e.width,e.height),n}return i(e,t),e}(u);e.SceneCanvas=h;var d=function(t){function e(e){void 0===e&&(e={width:0,height:0});var n=t.call(this,e)||this;return n.hitCanvas=!0,n.context=new a.HitContext(n),n.setSize(e.width,e.height),n}return i(e,t),e}(u);e.HitCanvas=d})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(66),n(41),n(74)],void 0===(r="function"==typeof(i=function(t,e,i,o){"use strict";var r=n(0),a=n(10);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"createProvider",{enumerable:!0,get:function(){return e.createProvider}}),Object.defineProperty(t,"connectAdvanced",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return o.default}}),e=a(e),i=r(i),o=r(o)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(96)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=o(e),i=o(i),t.default=class extends i.default{constructor(t,n,i){super(),(0,e.default)(this,"controllerName",""),(0,e.default)(this,"acceptAction",{}),(0,e.default)(this,"sentAction",{}),(0,e.default)(this,"socket",null),(0,e.default)(this,"setHandleSendEvent",t=>{this.sendEventHandle=t}),this.controllerName=t,this.acceptAction=n||{},this.sentAction=i||{},this.send=this.send.bind(this)}mountEvent(t){var e=this;this.socket=t,Object.keys(this.acceptAction).forEach(n=>{const i=this.acceptAction[n];t.on(n,async function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];const a=i?await i(e,...o):o;e.emit(n,{data:a})})})}async handleEventMsg(t){const{name:e,data:n}=t,i=this.acceptAction[e];if(i){console.log("%c player- receive:","color:#00FFFF",e,n);const t=await i(this,n);this.emit(e,{data:t})}}async send(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const o=await this.emitSocket(t,...n),r=this.sentAction[t];let a;return r&&(a=await r(this,o)),void 0!==a?a:o}emitSocket(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return console.log("%c player-request:","color:#FFD700",t,n),new Promise(e=>{this.sendEventHandle(t,n,n=>{console.log("%c player-response:","color:#8A2BE2",t,n),e(n)})})}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6)],void 0===(r="function"==typeof(i=function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n,i){(0,e.useEffect)(()=>{const e=t.acceptSignMap[n];return e.forEach(t=>{t.on(n,i)}),()=>{e.forEach(t=>{t.removeListener(n,i)})}},[])}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(2),i=n(4);e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach(function(e){"dragging"===e.dragStatus&&(t=!0)}),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach(function(e){t=e.node}),t},_dragElements:new Map,_drag:function(t){e.DD._dragElements.forEach(function(e,n){var o=e.node,r=o.getStage();r.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=i.Util._getFirstPointerId(t));var a=r._changedPointerPositions.find(function(t){return t.id===e.pointerId});if(a){if("dragging"!==e.dragStatus){var s=o.dragDistance();if(Math.max(Math.abs(a.x-e.startPointerPos.x),Math.abs(a.y-e.startPointerPos.y))<s)return;if(o.startDrag({evt:t}),!o.isDragging())return}o._setDragPosition(t,e),o.fire("dragmove",{type:"dragmove",target:o,evt:t},!0)}})},_endDragBefore:function(n){e.DD._dragElements.forEach(function(i,o){var r=i.node.getStage();if(n&&r.setPointersPositions(n),r._changedPointerPositions.find(function(t){return t.id===i.pointerId})){"dragging"!==i.dragStatus&&"stopped"!==i.dragStatus||(e.DD.justDragged=!0,t.Konva.listenClickTap=!1,i.dragStatus="stopped");var a=i.node.getLayer()||i.node instanceof t.Konva.Stage&&i.node;a&&a.draw()}})},_endDragAfter:function(t){e.DD._dragElements.forEach(function(n,i){"stopped"===n.dragStatus&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:t},!0),"dragging"!==n.dragStatus&&e.DD._dragElements.delete(i)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";function e(){return t.default=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},e.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=e})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,e){return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,i=arguments.length>1?arguments[1]:void 0;return i.type===t?i.payload:n}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(14),n(15)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.preloadImageByUrl=function(t){return new Promise((e,n)=>{const i=new Image;i.src=t,i.onload=()=>{console.log(t,"image ready"),e(!0)},i.onerror=t=>{n(t)}})},t.getTime=function(t){const e="".concat(t%60).padStart(2,0),n="".concat(Math.floor(t%3600/60)).padStart(2,0),i="".concat(Math.floor(t/3600)).padStart(2,0);return"".concat(i,":").concat(n,":").concat(e)},t.calZmlScope=function(){const t=document.getElementById("courseware-player");let e=t.offsetWidth,n=t.offsetHeight;return e/n>16/9?e=n*(16/9):n=e/(16/9),{width:e,height:n}},t.isAudience=function(){const{userInfo:{role:t,progress:n}}=e.default.getState();return t===PLAYER_USER_TYPE.student||t===PLAYER_USER_TYPE.tutor&&n===i.lessonProgress.in},e=o(e)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.dispatch=function(t,e,n){var i=new window.CustomEvent("redom",{bubbles:!0,detail:{type:e,data:n}}),o=t.el||t;o.dispatchEvent(i)},e.listen=function(t,e){var n=t.el||t,i=function(t){var n=t.detail,i=n.type,o=n.data;e[i]&&e[i](o)};return n.addEventListener("redom",i),{destroy:function(){n.removeEventListener("redom",i)}}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.makeShapeInstance=function(e){switch(e){case t.DRAWTOOL_PENCIL:return i.Brush;case t.DRAWTOOL_RECT:return o.Rect;case t.DRAWTOOL_LINE:return r.Line;case t.DRAWTOOL_LINEARROW:return a.LineArrow;case t.DRAWTOOL_ELLIPSE:return s.Ellipse;case t.DRAWTOOL_ERASER:return l.Eraser;case t.DRAWTOOL_ERASER_RECTANGLE:return c.EraserRectangle;case t.DRAWTOOL_TRIANGLE:return u.Triangle;case t.DRAWTOOL_STAR:return h.Star;case t.DRAWTOOL_TEXTTOOL:return d.Text;case t.DRAWTOOL_PRESSUREPEN:return f.PressurePen;case t.DRAWTOOL_SMOOTHLINE:return p.SmoothPen;case t.DRAWTOOL_ROBOPEN:return y.RoboPen;case t.DRAWTOOL_RECT_EDIT:return g.RectEdit;case t.DRAWTOOL_SELCTE_SHAPE:return v.SelectShape;case t.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE:return m.EditRegularShape;case t.DRAWTOOL_POLYGON_EDIT:return b.PolygonEdit;case t.DRAWTOOL_EDIT_SHAPE_DELETE:return _.EditDeleteShape;case t.DRAWTOOL_ELLIPSE_EDIT:return w.EllipseEdit;case t.DRAWTOOL_CIRCLE_EDIT:return x.CircleEdit;case t.DRAWTOOL_SIMPLE_ELLIPSE_EDIT:return T.SimpleEllipseEdit;case t.DRAWTOOL_SIMPLE_TRIANGLE_EDIT:return S.SimpleTriangleEdit;case t.DRAWTOOL_LINE_EDIT:return C.LineEdit;case t.DRAWTOOL_LINEDASH_EDIT:return E.LineDashEdit;case t.DRAWTOOL_LINEARROW_EDIT:return D.LineArrowEdit;case t.DRAWTOOL_LINEARROWDASH_EDIT:return A.LineArrowDashEdit;case t.DRAWTOOL_TEXTTOOL_EDIT:return O.TextEdit;case t.DRAWTOOL_COORDSYS_EDIT:return P.CoordSys;case t.DRAWTOOL_EDIT_PAGE_DELETE:return k.EditDeletePage;case t.DRAWTOOL_EDIT_RECOVER:return I.EditRecover;default:return i.Brush}};var t=n(8),i=n(117),o=n(118),r=n(119),a=n(120),s=n(121),l=n(122),c=n(123),u=n(124),h=n(125),d=n(126),f=n(127),p=n(166),y=n(168),g=n(169),v=n(170),m=n(171),b=n(172),_=n(173),w=n(174),x=n(175),T=n(176),S=n(177),E=n(178),P=n(179),C=n(55),O=n(180),D=n(56),A=n(181),k=n(182),I=n(183)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.sceneFunc=function(t){var e,n,i,o=this.getPoints(),r=o.length,a=this.getTension(),s=this.getClosed(),l=this.getBezier();if(r){if(t.beginPath(),t.moveTo(o[0],o[1]),0!==a&&r>4){for(e=this.getTensionPoints(),n=e.length,i=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i<n-2;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);s||t.quadraticCurveTo(e[n-2],e[n-1],o[r-2],o[r-1])}else if(l)for(i=2;i<r;)t.bezierCurveTo(o[i++],o[i++],o[i++],o[i++],o[i++],o[i++]);else for(i=2;i<r;i+=2){var c=(o[i-2]+o[i])/2,u=(o[i-1]+o[i+1])/2;t.quadraticCurveTo(o[i-2],o[i-1],c,u),t.moveTo(c,u),i==r-2&&t.lineTo(o[i],o[i+1])}s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var i=n(128).Konva;i._injectGlobal(i),e.default=i,t.exports=e.default})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(18),a=n(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to groups.")},e}(r.Container);e.Group=s,s.prototype.nodeType="Group",a._registerNode(s),o.Collection.mapMethods(s)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(2),i=t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return(new Date).getTime()},o=function(){function t(e,n){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=e,this.setLayers(n)}return t.prototype.setLayers=function(t){var e=[];return e=t?t.length>0?t:[t]:[],this.layers=e,this},t.prototype.getLayers=function(){return this.layers},t.prototype.addLayer=function(t){var e,n=this.layers,i=n.length;for(e=0;e<i;e++)if(n[e]._id===t._id)return!1;return this.layers.push(t),!0},t.prototype.isRunning=function(){var e,n=t,i=n.animations,o=i.length;for(e=0;e<o;e++)if(i[e].id===this.id)return!0;return!1},t.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),t._addAnimation(this),this},t.prototype.stop=function(){return t._removeAnimation(this),this},t.prototype._updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},t._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},t._removeAnimation=function(t){var e,n=t.id,i=this.animations,o=i.length;for(e=0;e<o;e++)if(i[e].id===n){this.animations.splice(e,1);break}},t._runFrames=function(){var t,e,n,o,r,a,s,l,c={},u=this.animations;for(o=0;o<u.length;o++)if(t=u[o],e=t.layers,n=t.func,t._updateFrameObject(i()),a=e.length,!n||!1!==n.call(t,t.frame))for(r=0;r<a;r++)void 0!==(s=e[r])._id&&(c[s._id]=s);for(l in c)c.hasOwnProperty(l)&&c[l].draw()},t._animationLoop=function(){var e=t;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},t._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},t.animations=[],t.animIdCounter=0,t.animRunning=!1,t}();e.Animation=o})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){(function(i){var o,r,a;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[],void 0===(a="function"==typeof(o=function(){"use strict";var e=n(16),o=n(205),r={"Content-Type":"application/x-www-form-urlencoded"};function a(t,n){!e.isUndefined(t)&&e.isUndefined(t["Content-Type"])&&(t["Content-Type"]=n)}var s,l={adapter:("undefined"!=typeof XMLHttpRequest?s=n(58):void 0!==i&&(s=n(58)),s),transformRequest:[function(t,n){return o(n,"Content-Type"),e.isFormData(t)||e.isArrayBuffer(t)||e.isBuffer(t)||e.isStream(t)||e.isFile(t)||e.isBlob(t)?t:e.isArrayBufferView(t)?t.buffer:e.isURLSearchParams(t)?(a(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):e.isObject(t)?(a(n,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};e.forEach(["delete","get","head"],function(t){l.headers[t]={}}),e.forEach(["post","put","patch"],function(t){l.headers[t]=e.merge(r)}),t.exports=l})?o.apply(e,r):o)||(t.exports=a)}).call(this,n(204))},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){
/*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  */
"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var r,a,s=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var c in r=Object(arguments[l]))n.call(r,c)&&(s[c]=r[c]);if(e){a=e(r);for(var u=0;u<a.length;u++)i.call(r,a[u])&&(s[a[u]]=r[a[u]])}}return s}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(11)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.storeShape=t.subscriptionShape=void 0;var o=(e=i(e)).default.shape({trySubscribe:e.default.func.isRequired,tryUnsubscribe:e.default.func.isRequired,notifyNestedSubs:e.default.func.isRequired,isSubscribed:e.default.func.isRequired});t.subscriptionShape=o;var r=e.default.shape({subscribe:e.default.func.isRequired,dispatch:e.default.func.isRequired,getState:e.default.func.isRequired});t.storeShape=r})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(39),n(69),n(27),n(28),n(70),n(72),n(6),n(42),n(73),n(40)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s,l,c,u,h){"use strict";var d=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n){var d,g;void 0===n&&(n={});var v=n,m=v.getDisplayName,b=void 0===m?function(t){return"ConnectAdvanced("+t+")"}:m,_=v.methodName,w=void 0===_?"connectAdvanced":_,x=v.renderCountProp,T=void 0===x?void 0:x,S=v.shouldHandleStateChanges,E=void 0===S||S,P=v.storeKey,C=void 0===P?"store":P,O=v.withRef,D=void 0!==O&&O,A=(0,r.default)(v,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),k=C+"Subscription",I=f++,L=((d={})[C]=h.storeShape,d[k]=h.subscriptionShape,d),M=((g={})[k]=h.subscriptionShape,g);return function(n){(0,s.default)((0,c.isValidElementType)(n),"You must pass a component to the function returned by "+w+". Instead received "+JSON.stringify(n));var r=n.displayName||n.name||"Component",h=b(r),d=(0,o.default)({},A,{getDisplayName:b,methodName:w,renderCountProp:T,shouldHandleStateChanges:E,storeKey:C,withRef:D,displayName:h,wrappedComponentName:r,WrappedComponent:n}),f=function(r){function a(t,e){var n;return(n=r.call(this,t,e)||this).version=I,n.state={},n.renderCount=0,n.store=t[C]||e[C],n.propsMode=Boolean(t[C]),n.setWrappedInstance=n.setWrappedInstance.bind((0,i.default)((0,i.default)(n))),(0,s.default)(n.store,'Could not find "'+C+'" in either the context or props of "'+h+'". Either wrap the root component in a <Provider>, or explicitly pass "'+C+'" as a prop to "'+h+'".'),n.initSelector(),n.initSubscription(),n}(0,e.default)(a,r);var c=a.prototype;return c.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return(t={})[k]=e||this.context[k],t},c.componentDidMount=function(){E&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},c.componentWillReceiveProps=function(t){this.selector.run(t)},c.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},c.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=y,this.store=null,this.selector.run=y,this.selector.shouldComponentUpdate=!1},c.getWrappedInstance=function(){return(0,s.default)(D,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+w+"() call."),this.wrappedInstance},c.setWrappedInstance=function(t){this.wrappedInstance=t},c.initSelector=function(){var e=t(this.store.dispatch,d);this.selector=function(t,e){var n={run:function(i){try{var o=t(e.getState(),i);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}(e,this.store),this.selector.run(this.props)},c.initSubscription=function(){if(E){var t=(this.propsMode?this.props:this.context)[k];this.subscription=new u.default(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},c.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(p)):this.notifyNestedSubs()},c.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},c.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},c.addExtraProps=function(t){if(!(D||T||this.propsMode&&this.subscription))return t;var e=(0,o.default)({},t);return D&&(e.ref=this.setWrappedInstance),T&&(e[T]=this.renderCount++),this.propsMode&&this.subscription&&(e[k]=this.subscription),e},c.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return(0,l.createElement)(n,this.addExtraProps(t.props))},a}(l.Component);return f.WrappedComponent=n,f.displayName=h,f.childContextTypes=M,f.contextTypes=L,f.propTypes=L,(0,a.default)(f,n)}},e=d(e),i=d(i),o=d(o),r=d(r),a=d(a),s=d(s),u=d(u);var f=0,p={};function y(){}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=n(71)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(77)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=function t(n,i,o){var s;if("function"==typeof i&&"function"==typeof o||"function"==typeof o&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof i&&void 0===o&&(o=i,i=void 0),void 0!==o){if("function"!=typeof o)throw new Error("Expected the enhancer to be a function.");return o(t)(n,i)}if("function"!=typeof n)throw new Error("Expected the reducer to be a function.");var l=n,c=i,u=[],h=u,d=!1;function f(){h===u&&(h=u.slice())}function p(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function y(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return f(),h.push(t),function(){if(e){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,f();var n=h.indexOf(t);h.splice(n,1)}}}function g(t){if(!a(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,c=l(c,t)}finally{d=!1}for(var e=u=h,n=0;n<e.length;n++){var i=e[n];i()}return t}return g({type:r.INIT}),(s={dispatch:g,subscribe:y,getState:p,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");l=t,g({type:r.REPLACE})}})[e.default]=function(){var t,n=y;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function e(){t.next&&t.next(p())}e();var i=n(e);return{unsubscribe:i}}})[e.default]=function(){return this},t},s},t.combineReducers=function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var o=e[i];"function"==typeof t[o]&&(n[o]=t[o])}var a,l=Object.keys(n);try{!function(t){Object.keys(t).forEach(function(e){var n=t[e],i=n(void 0,{type:r.INIT});if(void 0===i)throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:r.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+r.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(t){a=t}return function(t,e){if(void 0===t&&(t={}),a)throw a;for(var i=!1,o={},r=0;r<l.length;r++){var c=l[r],u=n[c],h=t[c],d=u(h,e);if(void 0===d){var f=s(c,e);throw new Error(f)}o[c]=d,i=i||d!==h}return i?o:t}},t.bindActionCreators=function(t,e){if("function"==typeof t)return l(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),i={},o=0;o<n.length;o++){var r=n[o],a=t[r];"function"==typeof a&&(i[r]=l(a,e))}return i},t.applyMiddleware=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),i=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},r=e.map(function(t){return t(o)});return i=u.apply(void 0,r)(n.dispatch),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){c(t,e,n[e])})}return t}({},n,{dispatch:i})}}},t.compose=u,t.__DO_NOT_USE__ActionTypes=void 0,e=i(e);var o=function(){return Math.random().toString(36).substring(7).split("").join(".")},r={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function a(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function s(t,e){var n=e&&e.type,i=n&&'action "'+String(n)+'"'||"an action";return"Given "+i+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(t,e){return function(){return e(t.apply(this,arguments))}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}t.__DO_NOT_USE__ActionTypes=r})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(45)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);function o(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}Object.defineProperty(t,"__esModule",{value:!0}),t.wrapMapToPropsConstant=function(t){return function(e,n){var i=t(e,n);function o(){return i}return o.dependsOnOwnProps=!1,o}},t.getDependsOnOwnProps=o,t.wrapMapToPropsFunc=function(t,e){return function(e,n){n.displayName;var i=function(t,e){return i.dependsOnOwnProps?i.mapToProps(t,e):i.mapToProps(t)};return i.dependsOnOwnProps=!0,i.mapToProps=function(e,n){i.mapToProps=t,i.dependsOnOwnProps=o(t);var r=i(e,n);return"function"==typeof r&&(i.mapToProps=r,i.dependsOnOwnProps=o(r),r=i(e,n)),r},i}},e=i(e)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(80),n(26)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n,o){(0,e.default)(t)||(0,i.default)(o+"() in "+n+" must return a plain object. Instead received "+t+".")},e=o(e),i=o(i)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(100)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(113),n(14)],void 0===(r="function"==typeof(i=function(t,e,i,o){"use strict";var r=n(0);function a(t){console.log("drawingCb:",t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=r(e),o=r(o);class s{constructor(t,n,i,o){if((0,e.default)(this,"timer",null),(0,e.default)(this,"id",null),(0,e.default)(this,"isbush",!1),(0,e.default)(this,"lastSendData",[]),(0,e.default)(this,"eventControllersInstance",void 0),(0,e.default)(this,"cb",void 0),this.cb=o,this.signalType=n,this.handleSendMassage=this.handleSendMassage.bind(this),this.eventControllersInstance=i,s.zmSketchInstance)return s.zmSketchInstance;this.init(t)}init(t){const{userInfo:e}=o.default.getState();e.role!==PLAYER_USER_TYPE.student?s.zmSketchInstance=Object.freeze((0,i.zmSketchPad)(t,this.handleSendMassage,()=>{this.cb&&this.cb()},{disableScaleStage:!0,drawingProcessCb:a})):s.zmSketchInstance=Object.freeze((0,i.zmSketchPad)(t,()=>{},()=>{this.cb&&this.cb()})),window.addEventListener("resize",this.handleWindowResize)}handleWindowResize(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{s.zmSketchInstance.canvas.resizeDetail()},500)}handleSendMassage(t){console.log("zmSketchInstance-data:",t);const e=t[3];"text_edit"===e&&(t[6][1]=t[6][1].replace(/\\/g,"|")),7===t.length&&(this.isbush="brush"===e,3===this.lastSendData.length&&this.compensation()),this.sendData(t)}compensation(){this.lastSendData.length>0&&this.sendData([...this.lastSendData,!0]),this.lastSendData=[]}sendData(t){this.eventControllersInstance.controllers.whiteBoardController.send(this.signalType,t)}showLayerById(t){this.id=t,this.lastSendData=[],s.zmSketchInstance.canvas.canvasaction.drawOuterStage(),s.zmSketchInstance.canvas.showLayerById(t)}handleScroll(t){s.zmSketchInstance.canvas.stage.y(-t),s.zmSketchInstance.canvas.stage.draw()}destroyed(){window.removeEventListener("resize",this.handleWindowResize),s.zmSketchInstance=null}pushDataToLayer(t,e){s.zmSketchInstance.canvas.pushDataToLayer(t,e||this.id)}}t.default=s,(0,e.default)(s,"zmSketchInstance",null)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(2),a=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],s=function(){function t(t){this.canvas=t,this._context=t._canvas.getContext("2d"),r.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return t.prototype.fillShape=function(t){t.fillEnabled()&&this._fill(t)},t.prototype._fill=function(t){},t.prototype.strokeShape=function(t){t.hasStroke()&&this._stroke(t)},t.prototype._stroke=function(t){},t.prototype.fillStrokeShape=function(t){this.fillShape(t),this.strokeShape(t)},t.prototype.getTrace=function(t){var e,n,i,r,a=this.traceArr,s=a.length,l="";for(e=0;e<s;e++)n=a[e],(i=n.method)?(r=n.args,l+=i,t?l+="()":o.Util._isArray(r[0])?l+="(["+r.join(",")+"])":l+="("+r.join(",")+")"):(l+=n.property,t||(l+="="+n.val)),l+=";";return l},t.prototype.clearTrace=function(){this.traceArr=[]},t.prototype._trace=function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()},t.prototype.reset=function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.clear=function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},t.prototype._applyLineCap=function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},t.prototype._applyOpacity=function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},t.prototype._applyLineJoin=function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},t.prototype.setAttr=function(t,e){this._context[t]=e},t.prototype.arc=function(t,e,n,i,o,r){this._context.arc(t,e,n,i,o,r)},t.prototype.arcTo=function(t,e,n,i,o){this._context.arcTo(t,e,n,i,o)},t.prototype.beginPath=function(){this._context.beginPath()},t.prototype.bezierCurveTo=function(t,e,n,i,o,r){this._context.bezierCurveTo(t,e,n,i,o,r)},t.prototype.clearRect=function(t,e,n,i){this._context.clearRect(t,e,n,i)},t.prototype.clip=function(){this._context.clip()},t.prototype.closePath=function(){this._context.closePath()},t.prototype.createImageData=function(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0},t.prototype.createLinearGradient=function(t,e,n,i){return this._context.createLinearGradient(t,e,n,i)},t.prototype.createPattern=function(t,e){return this._context.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,n,i,o,r){return this._context.createRadialGradient(t,e,n,i,o,r)},t.prototype.drawImage=function(t,e,n,i,o,r,a,s,l){var c=arguments,u=this._context;3===c.length?u.drawImage(t,e,n):5===c.length?u.drawImage(t,e,n,i,o):9===c.length&&u.drawImage(t,e,n,i,o,r,a,s,l)},t.prototype.ellipse=function(t,e,n,i,o,r,a,s){this._context.ellipse(t,e,n,i,o,r,a,s)},t.prototype.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},t.prototype.fill=function(){this._context.fill()},t.prototype.fillRect=function(t,e,n,i){this._context.fillRect(t,e,n,i)},t.prototype.strokeRect=function(t,e,n,i){this._context.strokeRect(t,e,n,i)},t.prototype.fillText=function(t,e,n){this._context.fillText(t,e,n)},t.prototype.measureText=function(t){return this._context.measureText(t)},t.prototype.getImageData=function(t,e,n,i){return this._context.getImageData(t,e,n,i)},t.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},t.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},t.prototype.rect=function(t,e,n,i){this._context.rect(t,e,n,i)},t.prototype.putImageData=function(t,e,n){this._context.putImageData(t,e,n)},t.prototype.quadraticCurveTo=function(t,e,n,i){this._context.quadraticCurveTo(t,e,n,i)},t.prototype.restore=function(){this._context.restore()},t.prototype.rotate=function(t){this._context.rotate(t)},t.prototype.save=function(){this._context.save()},t.prototype.scale=function(t,e){this._context.scale(t,e)},t.prototype.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},t.prototype.getLineDash=function(){return this._context.getLineDash()},t.prototype.setTransform=function(t,e,n,i,o,r){this._context.setTransform(t,e,n,i,o,r)},t.prototype.stroke=function(){this._context.stroke()},t.prototype.strokeText=function(t,e,n,i){this._context.strokeText(t,e,n,i)},t.prototype.transform=function(t,e,n,i,o,r){this._context.transform(t,e,n,i,o,r)},t.prototype.translate=function(t,e){this._context.translate(t,e)},t.prototype._enableTrace=function(){var t,e,n=this,i=a.length,r=o.Util._simplifyArray,s=this.setAttr,l=function(t){var i,o=n[t];n[t]=function(){return e=r(Array.prototype.slice.call(arguments,0)),i=o.apply(n,arguments),n._trace({method:t,args:e}),i}};for(t=0;t<i;t++)l(a[t]);n.setAttr=function(){s.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}},t.prototype._applyGlobalCompositeOperation=function(t){var e=t.getGlobalCompositeOperation();"source-over"!==e&&this.setAttr("globalCompositeOperation",e)},t}();e.Context=s,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(t){Object.defineProperty(s.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})});var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fillColor=function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},e.prototype._fillPattern=function(t){var e=t.getFillPatternX(),n=t.getFillPatternY(),i=r.Konva.getAngle(t.getFillPatternRotation()),o=t.getFillPatternOffsetX(),a=t.getFillPatternOffsetY(),s=t.getFillPatternScaleX(),l=t.getFillPatternScaleY();(e||n)&&this.translate(e||0,n||0),i&&this.rotate(i),(s||l)&&this.scale(s,l),(o||a)&&this.translate(-1*o,-1*a),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fill=function(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)this._fillColor(t);else{var i=t.getFillPatternImage();if(i&&"pattern"===n)this._fillPattern(t);else{var o=t.getFillLinearGradientColorStops();if(o&&"linear-gradient"===n)this._fillLinearGradient(t);else{var r=t.getFillRadialGradientColorStops();r&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):o?this._fillLinearGradient(t):r&&this._fillRadialGradient(t)}}}},e.prototype._strokeLinearGradient=function(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(e.x,e.y,n.x,n.y);if(i){for(var r=0;r<i.length;r+=2)o.addColorStop(i[r],i[r+1]);this.setAttr("strokeStyle",o)}},e.prototype._stroke=function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var o=t.getStrokeLinearGradientColorStops();o?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}},e.prototype._applyShadow=function(t){var e=o.Util,n=e.get(t.getShadowRGBA(),"black"),i=e.get(t.getShadowBlur(),5),r=e.get(t.getShadowOffset(),{x:0,y:0}),a=t.getAbsoluteScale(),s=this.canvas.getPixelRatio(),l=a.x*s,c=a.y*s;this.setAttr("shadowColor",n),this.setAttr("shadowBlur",i*Math.min(Math.abs(l),Math.abs(c))),this.setAttr("shadowOffsetX",r.x*l),this.setAttr("shadowOffsetY",r.y*c)},e}(s);e.SceneContext=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},e.prototype._stroke=function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var i=t.hitStrokeWidth(),o="auto"===i?t.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}},e}(s);e.HitContext=c})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(2),i=new Map,o=void 0!==t.Konva._global.PointerEvent;function r(t){return{evt:t,pointerId:t.pointerId}}function a(t,e){var n=i.get(t);if(n){var a=n.getStage();a&&a.content,i.delete(t),o&&n._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}}e.getCapturedShape=function(t){return i.get(t)},e.createEvent=r,e.hasPointerCapture=function(t,e){return i.get(t)===e},e.setPointerCapture=function(t,e){a(t),e.getStage()&&(i.set(t,e),o&&e._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))},e.releaseCapture=a})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(18),a=n(7),s=n(1),l=n(21),c=function(t){function e(e){var n=t.call(this,e)||this;return n.canvas=new l.SceneCanvas,n._waitingForDraw=!1,n.on("visibleChange",n._checkVisibility),n._checkVisibility(),n.on("imageSmoothingEnabledChange",n._checkSmooth),n._checkSmooth(),n}return i(e,t),e.prototype.createPNGStream=function(){var t=this.canvas._canvas;return t.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this},e.prototype.setZIndex=function(e){t.prototype.setZIndex.call(this,e);var n=this.getStage();return n&&(n.content.removeChild(this.getCanvas()._canvas),e<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){a.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){var t=a.Node.prototype.moveUp.call(this);if(!t)return!1;var e=this.getStage();return!!e&&(e.content.removeChild(this.getCanvas()._canvas),this.index<e.children.length-1?e.content.insertBefore(this.getCanvas()._canvas,e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas),!0)},e.prototype.moveDown=function(){if(a.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(a.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.hitGraphEnabled=function(){return!0},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return a.Node.prototype.remove.call(this),t&&t.parentNode&&o.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var e=t.width,n=t.height;return this.canvas.setSize(e,n),this},e.prototype._toKonvaCanvas=function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),a.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"},e.prototype._checkSmooth=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.getIntersection=function(t,e){return null},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(function(){t.draw(),t._waitingForDraw=!1})),this},e.prototype._applyTransform=function(t,e,n){var i=t.getAbsoluteTransform(n).getMatrix();e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},e}(r.Container);e.BaseLayer=c,c.prototype.nodeType="BaseLayer",s.Factory.addGetterSetter(c,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(c,"clearBeforeDraw",!0),o.Collection.mapMethods(c)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),o=0,e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i};Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),a=n(1),s=n(9),l=n(3),c=n(2),u=function(t){function e(e){var n=t.call(this,e)||this;return n.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")}),n}return i(e,t),e.prototype._sceneFunc=function(t){var e,n,i,o=this.points(),r=o.length,a=this.tension(),s=this.closed(),l=this.bezier();if(r){if(t.beginPath(),t.moveTo(o[0],o[1]),0!==a&&r>4){for(e=this.getTensionPoints(),n=e.length,i=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i<n-2;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);s||t.quadraticCurveTo(e[n-2],e[n-1],o[r-2],o[r-1])}else if(l)for(i=2;i<r;)t.bezierCurveTo(o[i++],o[i++],o[i++],o[i++],o[i++],o[i++]);else for(i=2;i<r;i+=2)t.lineTo(o[i],o[i+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():r.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),e=t.length,n=this.tension(),i=r.Util._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),o=r.Util._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),a=r.Util._expandPoints(t,n),s=[i[2],i[3]].concat(a).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],i[0],i[1],t[0],t[1]]);return s},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,n,i=(t=0!==this.tension()?o([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):this.points())[0],r=t[0],a=t[1],s=t[1],l=0;l<t.length/2;l++)e=t[2*l],n=t[2*l+1],i=Math.min(i,e),r=Math.max(r,e),a=Math.min(a,n),s=Math.max(s,n);return{x:i,y:a,width:r-i,height:s-a}},e}(s.Shape);e.Line=u,u.prototype.className="Line",u.prototype._attrsAffectingSize=["points","bezier","tension"],c._registerNode(u),a.Factory.addGetterSetter(u,"closed",!1),a.Factory.addGetterSetter(u,"bezier",!1),a.Factory.addGetterSetter(u,"tension",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"points",[],l.getNumberArrayValidator()),r.Collection.mapMethods(u)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(2),l=function(t){function e(n){var i=t.call(this,n)||this;i.dataArray=[],i.pathLength=0,i.dataArray=e.parsePathData(i.data()),i.pathLength=0;for(var o=0;o<i.dataArray.length;++o)i.pathLength+=i.dataArray[o].pathLength;return i.on("dataChange.konva",function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength}),i}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.dataArray;t.beginPath();for(var n=!1,i=0;i<e.length;i++){var o=e[i].command,r=e[i].points;switch(o){case"L":t.lineTo(r[0],r[1]);break;case"M":t.moveTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var a=r[0],s=r[1],l=r[2],c=r[3],u=r[4],h=r[5],d=r[6],f=r[7],p=l>c?l:c,y=l>c?1:l/c,g=l>c?c/l:1;t.translate(a,s),t.rotate(d),t.scale(y,g),t.arc(0,0,p,u,u+h,1-f),t.scale(1/y,1/g),t.rotate(-d),t.translate(-a,-s);break;case"z":n=!0,t.closePath()}}n||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach(function(n){if("A"===n.command){var i=n.points[4],o=n.points[5],r=n.points[4]+o,a=Math.PI/180;if(Math.abs(i-r)<a&&(a=Math.abs(i-r)),o<0)for(var s=i-a;s>r;s-=a){var l=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],s,0);t.push(l.x,l.y)}else for(var s=i+a;s<r;s+=a){var l=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],s,0);t.push(l.x,l.y)}}else if("C"===n.command)for(var s=0;s<=1;s+=.01){var l=e.getPointOnCubicBezier(s,n.start.x,n.start.y,n.points[0],n.points[1],n.points[2],n.points[3],n.points[4],n.points[5]);t.push(l.x,l.y)}else t=t.concat(n.points)});for(var n,i,o=t[0],r=t[0],a=t[1],s=t[1],l=0;l<t.length/2;l++)n=t[2*l],i=t[2*l+1],isNaN(n)||(o=Math.min(o,n),r=Math.max(r,n)),isNaN(i)||(a=Math.min(a,i),s=Math.max(s,i));return{x:Math.round(o),y:Math.round(a),width:Math.round(r-o),height:Math.round(s-a)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var n,i=0,o=this.dataArray.length;if(!o)return null;for(;i<o&&t>this.dataArray[i].pathLength;)t-=this.dataArray[i].pathLength,++i;if(i===o)return{x:(n=this.dataArray[i-1].points.slice(-2))[0],y:n[1]};if(t<.01)return{x:(n=this.dataArray[i].points.slice(0,2))[0],y:n[1]};var r=this.dataArray[i],a=r.points;switch(r.command){case"L":return e.getPointOnLine(t,r.start.x,r.start.y,a[0],a[1]);case"C":return e.getPointOnCubicBezier(t/r.pathLength,r.start.x,r.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return e.getPointOnQuadraticBezier(t/r.pathLength,r.start.x,r.start.y,a[0],a[1],a[2],a[3]);case"A":var s=a[0],l=a[1],c=a[2],u=a[3],h=a[4],d=a[5],f=a[6];return h+=d*t/r.pathLength,e.getPointOnEllipticalArc(s,l,c,u,h,f)}return null},e.getLineLength=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},e.getPointOnLine=function(t,e,n,i,o,r,a){void 0===r&&(r=e),void 0===a&&(a=n);var s=(o-n)/(i-e+1e-8),l=Math.sqrt(t*t/(1+s*s));i<e&&(l*=-1);var c,u=s*l;if(i===e)c={x:r,y:a+u};else if((a-n)/(r-e+1e-8)===s)c={x:r+l,y:a+u};else{var h,d,f=this.getLineLength(e,n,i,o);if(f<1e-8)return;var p=(r-e)*(i-e)+(a-n)*(o-n);h=e+(p/=f*f)*(i-e),d=n+p*(o-n);var y=this.getLineLength(r,a,h,d),g=Math.sqrt(t*t-y*y);l=Math.sqrt(g*g/(1+s*s)),i<e&&(l*=-1),c={x:h+l,y:d+(u=s*l)}}return c},e.getPointOnCubicBezier=function(t,e,n,i,o,r,a,s,l){function c(t){return t*t*t}function u(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}var f=s*c(t)+r*u(t)+i*h(t)+e*d(t),p=l*c(t)+a*u(t)+o*h(t)+n*d(t);return{x:f,y:p}},e.getPointOnQuadraticBezier=function(t,e,n,i,o,r,a){function s(t){return t*t}function l(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}var u=r*s(t)+i*l(t)+e*c(t),h=a*s(t)+o*l(t)+n*c(t);return{x:u,y:h}},e.getPointOnEllipticalArc=function(t,e,n,i,o,r){var a=Math.cos(r),s=Math.sin(r),l={x:n*Math.cos(o),y:i*Math.sin(o)};return{x:t+(l.x*a-l.y*s),y:e+(l.x*s+l.y*a)}},e.parsePathData=function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),"|"+n[i]);var o,r=e.split("|"),a=[],s=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<r.length;i++){var h=r[i],d=h.charAt(0);for(h=h.slice(1),s.length=0;o=u.exec(h);)s.push(o[0]);for(var f=[],p=0,y=s.length;p<y;p++){var g=parseFloat(s[p]);isNaN(g)?f.push(0):f.push(g)}for(;f.length>0&&!isNaN(f[0]);){var v,m,b,_,w,x,T,S,E,P,C=null,O=[],D=l,A=c;switch(d){case"l":l+=f.shift(),c+=f.shift(),C="L",O.push(l,c);break;case"L":l=f.shift(),c=f.shift(),O.push(l,c);break;case"m":var k=f.shift(),I=f.shift();if(l+=k,c+=I,C="M",a.length>2&&"z"===a[a.length-1].command)for(var L=a.length-2;L>=0;L--)if("M"===a[L].command){l=a[L].points[0]+k,c=a[L].points[1]+I;break}O.push(l,c),d="l";break;case"M":l=f.shift(),c=f.shift(),C="M",O.push(l,c),d="L";break;case"h":l+=f.shift(),C="L",O.push(l,c);break;case"H":l=f.shift(),C="L",O.push(l,c);break;case"v":c+=f.shift(),C="L",O.push(l,c);break;case"V":c=f.shift(),C="L",O.push(l,c);break;case"C":O.push(f.shift(),f.shift(),f.shift(),f.shift()),l=f.shift(),c=f.shift(),O.push(l,c);break;case"c":O.push(l+f.shift(),c+f.shift(),l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),C="C",O.push(l,c);break;case"S":m=l,b=c,"C"===(v=a[a.length-1]).command&&(m=l+(l-v.points[2]),b=c+(c-v.points[3])),O.push(m,b,f.shift(),f.shift()),l=f.shift(),c=f.shift(),C="C",O.push(l,c);break;case"s":m=l,b=c,"C"===(v=a[a.length-1]).command&&(m=l+(l-v.points[2]),b=c+(c-v.points[3])),O.push(m,b,l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),C="C",O.push(l,c);break;case"Q":O.push(f.shift(),f.shift()),l=f.shift(),c=f.shift(),O.push(l,c);break;case"q":O.push(l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),C="Q",O.push(l,c);break;case"T":m=l,b=c,"Q"===(v=a[a.length-1]).command&&(m=l+(l-v.points[0]),b=c+(c-v.points[1])),l=f.shift(),c=f.shift(),C="Q",O.push(m,b,l,c);break;case"t":m=l,b=c,"Q"===(v=a[a.length-1]).command&&(m=l+(l-v.points[0]),b=c+(c-v.points[1])),l+=f.shift(),c+=f.shift(),C="Q",O.push(m,b,l,c);break;case"A":_=f.shift(),w=f.shift(),x=f.shift(),T=f.shift(),S=f.shift(),E=l,P=c,l=f.shift(),c=f.shift(),C="A",O=this.convertEndpointToCenterParameterization(E,P,l,c,T,S,_,w,x);break;case"a":_=f.shift(),w=f.shift(),x=f.shift(),T=f.shift(),S=f.shift(),E=l,P=c,l+=f.shift(),c+=f.shift(),C="A",O=this.convertEndpointToCenterParameterization(E,P,l,c,T,S,_,w,x)}a.push({command:C||d,points:O,start:{x:D,y:A},pathLength:this.calcLength(D,A,C||d,O)})}"z"!==d&&"Z"!==d||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},e.calcLength=function(t,n,i,o){var r,a,s,l,c=e;switch(i){case"L":return c.getLineLength(t,n,o[0],o[1]);case"C":for(r=0,a=c.getPointOnCubicBezier(0,t,n,o[0],o[1],o[2],o[3],o[4],o[5]),l=.01;l<=1;l+=.01)s=c.getPointOnCubicBezier(l,t,n,o[0],o[1],o[2],o[3],o[4],o[5]),r+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return r;case"Q":for(r=0,a=c.getPointOnQuadraticBezier(0,t,n,o[0],o[1],o[2],o[3]),l=.01;l<=1;l+=.01)s=c.getPointOnQuadraticBezier(l,t,n,o[0],o[1],o[2],o[3]),r+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return r;case"A":r=0;var u=o[4],h=o[5],d=o[4]+h,f=Math.PI/180;if(Math.abs(u-d)<f&&(f=Math.abs(u-d)),a=c.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],u,0),h<0)for(l=u-f;l>d;l-=f)s=c.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],l,0),r+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;else for(l=u+f;l<d;l+=f)s=c.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],l,0),r+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return s=c.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],d,0),r+=c.getLineLength(a.x,a.y,s.x,s.y)}return 0},e.convertEndpointToCenterParameterization=function(t,e,n,i,o,r,a,s,l){var c=l*(Math.PI/180),u=Math.cos(c)*(t-n)/2+Math.sin(c)*(e-i)/2,h=-1*Math.sin(c)*(t-n)/2+Math.cos(c)*(e-i)/2,d=u*u/(a*a)+h*h/(s*s);d>1&&(a*=Math.sqrt(d),s*=Math.sqrt(d));var f=Math.sqrt((a*a*(s*s)-a*a*(h*h)-s*s*(u*u))/(a*a*(h*h)+s*s*(u*u)));o===r&&(f*=-1),isNaN(f)&&(f=0);var p=f*a*h/s,y=f*-s*u/a,g=(t+n)/2+Math.cos(c)*p-Math.sin(c)*y,v=(e+i)/2+Math.sin(c)*p+Math.cos(c)*y,m=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},w=_([1,0],[(u-p)/a,(h-y)/s]),x=[(u-p)/a,(h-y)/s],T=[(-1*u-p)/a,(-1*h-y)/s],S=_(x,T);return b(x,T)<=-1&&(S=Math.PI),b(x,T)>=1&&(S=0),0===r&&S>0&&(S-=2*Math.PI),1===r&&S<0&&(S+=2*Math.PI),[g,v,a,s,w,S,c,r]},e}(a.Shape);e.Path=l,l.prototype.className="Path",l.prototype._attrsAffectingSize=["data"],s._registerNode(l),r.Factory.addGetterSetter(l,"data"),o.Collection.mapMethods(l)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(2),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.cornerRadius(),n=this.width(),i=this.height();if(t.beginPath(),e){var o=0,r=0,a=0,s=0;"number"==typeof e?o=r=a=s=Math.min(e,n/2,i/2):(o=Math.min(e[0],n/2,i/2),r=Math.min(e[1],n/2,i/2),s=Math.min(e[2],n/2,i/2),a=Math.min(e[3],n/2,i/2)),t.moveTo(o,0),t.lineTo(n-r,0),t.arc(n-r,r,r,3*Math.PI/2,0,!1),t.lineTo(n,i-s),t.arc(n-s,i-s,s,0,Math.PI/2,!1),t.lineTo(a,i),t.arc(a,i-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,o),t.arc(o,o,o,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,n,i);t.closePath(),t.fillStrokeShape(this)},e}(a.Shape);e.Rect=l,l.prototype.className="Rect",s._registerNode(l),r.Factory.addGetterSetter(l,"cornerRadius",0),o.Collection.mapMethods(l)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(4),a=n(1),s=n(9),l=n(2),c=n(3),u=n(2),h="Change.konva",d="2d",f=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],p=f.length;function y(){return o||(o=r.Util.createCanvasElement().getContext(d))}String.prototype.trimRight;var g=function(t){function e(e){var n=t.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(e))||this;n._partialTextX=0,n._partialTextY=0;for(var i=0;i<p;i++)n.on(f[i]+h,n._setTextData);return n._setTextData(),n}return i(e,t),e.prototype._sceneFunc=function(t){var e,n=this.padding(),i=this.fontSize(),o=this.lineHeight()*i,r=this.textArr,a=r.length,s=this.verticalAlign(),l=0,c=this.align(),u=this.getWidth(),h=this.letterSpacing(),d=this.fill(),f=this.textDecoration(),p=-1!==f.indexOf("underline"),y=-1!==f.indexOf("line-through"),g=0,g=o/2,v=0,m=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),"middle"===s?l=(this.getHeight()-a*o-2*n)/2:"bottom"===s&&(l=this.getHeight()-a*o-2*n),t.translate(n,l+n),e=0;e<a;e++){var b,_,w,v=0,m=0,x=r[e],T=x.text,S=x.width,E=e!==a-1;if(t.save(),"right"===c?v+=u-S-2*n:"center"===c&&(v+=(u-S-2*n)/2),p&&(t.save(),t.beginPath(),t.moveTo(v,g+m+Math.round(i/2)),b=T.split(" ").length-1,_=0===b,w="justify"===c&&E&&!_?u-2*n:S,t.lineTo(v+Math.round(w),g+m+Math.round(i/2)),t.lineWidth=i/15,t.strokeStyle=d,t.stroke(),t.restore()),y&&(t.save(),t.beginPath(),t.moveTo(v,g+m),b=T.split(" ").length-1,_=0===b,w="justify"===c&&E&&!_?u-2*n:S,t.lineTo(v+Math.round(w),g+m),t.lineWidth=i/15,t.strokeStyle=d,t.stroke(),t.restore()),0!==h||"justify"===c){b=T.split(" ").length-1;for(var P=0;P<T.length;P++){var C=T[P];" "===C&&e!==a-1&&"justify"===c&&(v+=Math.floor((u-2*n-S)/b)),this._partialTextX=v,this._partialTextY=g+m,this._partialText=C,t.fillStrokeShape(this),v+=Math.round(this.measureSize(C).width)+h}}else this._partialTextX=v,this._partialTextY=g+m,this._partialText=T,t.fillStrokeShape(this);t.restore(),a>1&&(g+=o)}},e.prototype._hitFunc=function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var e=r.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this},e.prototype.getWidth=function(){var t="auto"===this.attrs.width||void 0===this.attrs.width;return t?this.getTextWidth()+2*this.padding():this.attrs.width},e.prototype.getHeight=function(){var t="auto"===this.attrs.height||void 0===this.attrs.height;return t?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return r.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var e,n=y(),i=this.fontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:i}},e.prototype._getContextFont=function(){return l.Konva.UA.isIE?this.fontStyle()+" "+this.fontSize()+"px "+this.fontFamily():this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily()},e.prototype._addTextLine=function(t){"justify"===this.align()&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},e.prototype._getTextWidth=function(t){var e=this.letterSpacing(),n=t.length;return y().measureText(t).width+(n?e*(n-1):0)},e.prototype._setTextData=function(){var t=this.text().split("\n"),e=+this.fontSize(),n=0,i=this.lineHeight()*e,o=this.attrs.width,r=this.attrs.height,a="auto"!==o&&void 0!==o,s="auto"!==r&&void 0!==r,l=this.padding(),c=o-2*l,u=r-2*l,h=0,d=this.wrap(),f="none"!==d,p="char"!==d&&f,g=this.ellipsis()&&!f;this.textArr=[],y().font=this._getContextFont();for(var v=g?this._getTextWidth(""):0,m=0,b=t.length;m<b;++m){var _=t[m],w=this._getTextWidth(_);if(a&&w>c)for(;_.length>0;){for(var x=0,T=_.length,S="",E=0;x<T;){var P=x+T>>>1,C=_.slice(0,P+1),O=this._getTextWidth(C)+v;O<=c?(x=P+1,S=C+(g?"":""),E=O):T=P}if(!S)break;if(p){var D,A=_[S.length],k=" "===A||"-"===A;(D=k&&E<=c?S.length:Math.max(S.lastIndexOf(" "),S.lastIndexOf("-"))+1)>0&&(x=D,S=S.slice(0,x),E=this._getTextWidth(S))}if(S=S.trimRight(),this._addTextLine(S),n=Math.max(n,E),h+=i,!f||s&&h+i>u)break;if((_=(_=_.slice(x)).trimLeft()).length>0&&(w=this._getTextWidth(_))<=c){this._addTextLine(_),h+=i,n=Math.max(n,w);break}}else this._addTextLine(_),h+=i,n=Math.max(n,w);if(s&&h+i>u)break}this.textHeight=e,this.textWidth=n},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(s.Shape);e.Text=g,g.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},g.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},g.prototype.className="Text",g.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight"],u._registerNode(g),a.Factory.overWriteSetter(g,"width",c.getNumberOrAutoValidator()),a.Factory.overWriteSetter(g,"height",c.getNumberOrAutoValidator()),a.Factory.addGetterSetter(g,"fontFamily","Arial"),a.Factory.addGetterSetter(g,"fontSize",12,c.getNumberValidator()),a.Factory.addGetterSetter(g,"fontStyle","normal"),a.Factory.addGetterSetter(g,"fontVariant","normal"),a.Factory.addGetterSetter(g,"padding",0,c.getNumberValidator()),a.Factory.addGetterSetter(g,"align","left"),a.Factory.addGetterSetter(g,"verticalAlign","top"),a.Factory.addGetterSetter(g,"lineHeight",1,c.getNumberValidator()),a.Factory.addGetterSetter(g,"wrap","word"),a.Factory.addGetterSetter(g,"ellipsis",!1),a.Factory.addGetterSetter(g,"letterSpacing",0,c.getNumberValidator()),a.Factory.addGetterSetter(g,"text","",c.getStringValidator()),a.Factory.addGetterSetter(g,"textDecoration",""),r.Collection.mapMethods(g)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.LineEdit=void 0;var t=n(5),i=n(8),o=n(12);e.LineEdit=function(t){function e(n,r,a,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r,a,s,l));return c.shape=new Konva.Group({draggable:!1,name:"editshape"}),c.tr=(0,o.makeTransformer)(),c.tr.on("mousedown touchstart",function(t){console.log("tr mousedown"),c.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),c.templayer.add(c.shape),c.line=new Konva.Line(r),c.tempAchor=(0,o.makeEditPoi)(r),o.makeMoveHover.bind(c)(c.tempAchor),c.tempAchor.on("dragmove",function(t){t.cancelBubble=!0;var e=t.target,n=e.parent,o=e.getAttr("pIndex");c.middlePoints[o]=e.x(),c.middlePoints[o+1]=e.y(),n.children[o+2].x(e.x()+i.EDIT_LABLE_DXY.dx),n.children[o+2].y(e.y()+i.EDIT_LABLE_DXY.dy),console.log("tempAchor dragmove",o),c.fireEdit(n,!0),c.reCal(n.findOne("Line"))}),c.tempAchor.on("dragend",function(t){t.cancelBubble=!0;var e=t.target,n=e.getAttr("pIndex");c.stage.canvasaction.localClientId++;var r=e.x(),a=e.y(),s=[r*c.stage.scale().x,a*c.stage.scale().x,c.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.parent.id(),2,n/2],!0];c.stage.canvasaction.sendMessageToOutSider(s),c.stage.canvasaction.pushCatchData(s)}),c.shape.add(c.tempAchor),c.achorTextCode=c.stage.getCharLabel(),c.achorText=(0,o.makeTextPoi)(r,c.achorTextCode),c.shape.add(c.achorText),c.shape.add(c.line),c.firstAchor=null,c.isTempAchor=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return null},e.prototype.moveAchorText=function(t,e){e.points(),t.find("Text")},e.prototype.fitAchorText=function(t,e){},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return[[0,0,this.clientid,this.toolname,[this.style.strokeWidth,0,this.style.stroke,0],[],[this.uid,this.middlePoints.concat(),this.isTempAchor?1:0]]]},e.prototype.pushPoint=function(t){var e=this.middlePoints.length;if(4===e)this.middlePoints[2]=t.x/this.stage.scale().x,this.middlePoints[3]=t.y/this.stage.scale().x,this.isShift&&(Math.abs(this.middlePoints[2]-this.middlePoints[0])<Math.abs(this.middlePoints[3]-this.middlePoints[1])?(this.middlePoints[2]=this.middlePoints[0],this.middlePoints[3]=t.y/this.stage.scale().x):(this.middlePoints[2]=t.x/this.stage.scale().x,this.middlePoints[3]=this.middlePoints[1])),this.shape.children[this.shape.children.length-1].x(this.middlePoints[2]+i.EDIT_LABLE_DXY.dx),this.shape.children[this.shape.children.length-1].y(this.middlePoints[3]+i.EDIT_LABLE_DXY.dy),this.shape.children[this.shape.children.length-2].x(this.middlePoints[2]),this.shape.children[this.shape.children.length-2].y(this.middlePoints[3]),this.reCal(this.line);else{this.middlePoints.push(t.x/this.stage.scale().x),this.middlePoints.push(t.y/this.stage.scale().x);var n=this.tempAchor.clone({pIndex:e});n.x(this.middlePoints[e]),n.y(this.middlePoints[e+1]);var o=this.achorText.clone({pIndex:e,visible:this.isTempAchor});o.x(this.middlePoints[e]+i.EDIT_LABLE_DXY.dx),o.y(this.middlePoints[e+1]+i.EDIT_LABLE_DXY.dy),o.text(this.achorTextCode),this.achorTextCode=this.stage.makeCharLabel(),this.shape.add(n),this.shape.add(o),0===e?this.tempAchor.setAttr("status","fixed"):2===e&&(this.tempAchor.setAttr("status","end"),this.reCal(this.line))}},e.prototype.reCal=function(t){t.points(this.middlePoints)},e.prototype.draw=function(){"replayData"!==this.showtype&&this.templayer.batchDraw()},e.prototype.endDraw=function(){var t=this;this.tempAchor.remove(),this.achorText.remove();var e=this.shape.clone();this.isTempAchor||e.find(".editpoi").forEach(function(t){return t.hide()}),this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),e.me=this,e.id(this.uid),"replayData"===this.showtype||e.draw(),e.on("click",function(n){if(console.log("clicked"),t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?t.unfireEdit(e):(console.log("fireEdit"),t.fireEdit(e));var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}n.cancelBubble=!0}),e.on("mousedown touchstart",function(e){console.log("mousedown",t.stage.canvasaction.isSelectMode()),t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),e.on("dragmove",function(){console.log("dragmove")}),e.on("dragend",function(){if(console.log("dragend"),t.isSelected){t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),0],!0];t.stage.canvasaction.sendMessageToOutSider(a),t.stage.canvasaction.pushCatchData(a)}}),e.on("transform",function(){console.log("transform")}),e.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=e.scaleX(),s=e.scaleY(),l=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)})},e.prototype.fireEdit=function(t,e){var n=this;this.isSelected=!0,t.draggable(!0),e||(this.stage.container().style.cursor="move"),this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){n.stage.container().style.cursor="move"}),t.on("mouseleave",function(){n.stage.container().style.cursor=""}),t.find("Circle").forEach(function(t,e){t.draggable(!0)}),this.showlayer.batchDraw()},e.prototype.unfireEdit=function(t){this.isSelected=!1,t.draggable(!1),this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",t.find("Circle").forEach(function(t){t.draggable(!1)}),this.showlayer.batchDraw()},e.prototype.changeByPoint=function(t,e,n){var o=t.find("Circle"),r=t.find("Text"),a=t.findOne("Line");this.middlePoints[2*n]=e[0],this.middlePoints[2*n+1]=e[1],o&&o[n]&&(o[n].x(e[0]),o[n].y(e[1]),r[n].x(e[0]+i.EDIT_LABLE_DXY.dx),r[n].y(e[1]+i.EDIT_LABLE_DXY.dy),this.reCal(a))},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.LineArrowEdit=void 0;var t=n(5),i=n(8),o=n(12);e.LineArrowEdit=function(t){function e(n,r,a,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r,a,s,l));return c.shape=new Konva.Group({draggable:!1,name:"editshape"}),c.tr=(0,o.makeTransformer)(),c.tr.on("mousedown touchstart",function(t){console.log("tr mousedown"),c.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),c.templayer.add(c.shape),c.line=new Konva.Arrow(Object.assign({},{pointerLength:20,pointerWidth:10,fill:r.stroke},r)),c.tempAchor=(0,o.makeEditPoi)(r),c.tempAchor.on("dragmove",function(t){t.cancelBubble=!0;var e=t.target,n=e.parent,o=e.getAttr("pIndex");c.middlePoints[o]=e.x(),c.middlePoints[o+1]=e.y(),n.children[o+2].x(e.x()+i.EDIT_LABLE_DXY.dx),n.children[o+2].y(e.y()+i.EDIT_LABLE_DXY.dy),console.log("tempAchor dragmove",o),c.fireEdit(n,!0),c.reCal(n.findOne("Arrow"))}),o.makeMoveHover.bind(c)(c.tempAchor),c.tempAchor.on("dragend",function(t){t.cancelBubble=!0;var e=t.target,n=e.getAttr("pIndex");c.stage.canvasaction.localClientId++;var r=e.x(),a=e.y(),s=[r*c.stage.scale().x,a*c.stage.scale().x,c.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.parent.id(),2,n/2],!0];c.stage.canvasaction.sendMessageToOutSider(s),c.stage.canvasaction.pushCatchData(s)}),c.shape.add(c.tempAchor),c.achorTextCode=c.stage.getCharLabel(),c.achorText=(0,o.makeTextPoi)(r,c.achorTextCode),c.shape.add(c.achorText),c.shape.add(c.line),c.firstAchor=null,c.isTempAchor=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return null},e.prototype.moveAchorText=function(t,e){},e.prototype.fitAchorText=function(t,e){},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return[[0,0,this.clientid,this.toolname,[this.style.strokeWidth,0,this.style.stroke,0],[],[this.uid,this.middlePoints.concat(),this.isTempAchor?1:0]]]},e.prototype.pushPoint=function(t){var e=this.middlePoints.length;if(4===e)this.middlePoints[2]=t.x/this.stage.scale().x,this.middlePoints[3]=t.y/this.stage.scale().x,this.isShift&&(Math.abs(this.middlePoints[2]-this.middlePoints[0])<Math.abs(this.middlePoints[3]-this.middlePoints[1])?(this.middlePoints[2]=this.middlePoints[0],this.middlePoints[3]=t.y/this.stage.scale().x):(this.middlePoints[2]=t.x/this.stage.scale().x,this.middlePoints[3]=this.middlePoints[1])),this.shape.children[this.shape.children.length-1].x(this.middlePoints[2]+i.EDIT_LABLE_DXY.dx),this.shape.children[this.shape.children.length-1].y(this.middlePoints[3]+i.EDIT_LABLE_DXY.dy),this.shape.children[this.shape.children.length-2].x(this.middlePoints[2]),this.shape.children[this.shape.children.length-2].y(this.middlePoints[3]),this.reCal(this.line);else{this.middlePoints.push(t.x/this.stage.scale().x),this.middlePoints.push(t.y/this.stage.scale().x);var n=this.tempAchor.clone({pIndex:e});n.x(this.middlePoints[e]),n.y(this.middlePoints[e+1]);var o=this.achorText.clone({pIndex:e,visible:this.isTempAchor});o.x(this.middlePoints[e]+i.EDIT_LABLE_DXY.dx),o.y(this.middlePoints[e+1]+i.EDIT_LABLE_DXY.dy),o.text(this.achorTextCode),this.achorTextCode=this.stage.makeCharLabel(),this.shape.add(n),this.shape.add(o),0===e?this.tempAchor.setAttr("status","fixed"):2===e&&(this.tempAchor.setAttr("status","end"),this.reCal(this.line))}},e.prototype.reCal=function(t){t.points(this.middlePoints)},e.prototype.draw=function(){"replayData"!==this.showtype&&this.templayer.batchDraw()},e.prototype.endDraw=function(){var t=this;this.tempAchor.remove(),this.achorText.remove();var e=this.shape.clone();this.isTempAchor||e.find(".editpoi").forEach(function(t){return t.hide()}),this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),e.me=this,e.id(this.uid),"replayData"===this.showtype||e.draw(),e.on("click",function(n){if(console.log("clicked"),t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?t.unfireEdit(e):(console.log("fireEdit"),t.fireEdit(e));var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}n.cancelBubble=!0}),e.on("mousedown touchstart",function(e){console.log("mousedown",t.stage.canvasaction.isSelectMode()),t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),e.on("dragmove",function(){console.log("dragmove")}),e.on("dragend",function(){if(console.log("dragend"),t.isSelected){t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),0],!0];t.stage.canvasaction.sendMessageToOutSider(a),t.stage.canvasaction.pushCatchData(a)}}),e.on("transform",function(){console.log("transform")}),e.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=e.scaleX(),s=e.scaleY(),l=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)})},e.prototype.fireEdit=function(t,e){var n=this;this.isSelected=!0,t.draggable(!0),e||(this.stage.container().style.cursor="move"),this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){n.stage.container().style.cursor="move"}),t.on("mouseleave",function(){n.stage.container().style.cursor=""}),t.find("Circle").forEach(function(t,e){t.draggable(!0)}),this.showlayer.batchDraw()},e.prototype.unfireEdit=function(t){this.isSelected=!1,t.draggable(!1),this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",t.find("Circle").forEach(function(t){t.draggable(!1)}),this.showlayer.batchDraw()},e.prototype.changeByPoint=function(t,e,n){var o=t.find("Circle"),r=t.find("Text"),a=t.findOne("Arrow");this.middlePoints[2*n]=e[0],this.middlePoints[2*n+1]=e[1],o&&o[n]&&(o[n].x(e[0]),o[n].y(e[1]),r[n].x(e[0]+i.EDIT_LABLE_DXY.dx),r[n].y(e[1]+i.EDIT_LABLE_DXY.dy),this.reCal(a))},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16),i=n(206),o=n(208),r=n(209),a=n(210),s=n(59);t.exports=function(t){return new Promise(function(l,c){var u=t.data,h=t.headers;e.isFormData(u)&&delete h["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",p=t.auth.password||"";h.Authorization="Basic "+btoa(f+":"+p)}if(d.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in d?r(d.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?d.response:d.responseText,o={data:n,status:d.status,statusText:d.statusText,headers:e,config:t,request:d};i(l,c,o),d=null}},d.onerror=function(){c(s("Network Error",t,null,d)),d=null},d.ontimeout=function(){c(s("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",d)),d=null},e.isStandardBrowserEnv()){var y=n(211),g=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;g&&(h[t.xsrfHeaderName]=g)}if("setRequestHeader"in d&&e.forEach(h,function(t,e){void 0===u&&"content-type"===e.toLowerCase()?delete h[e]:d.setRequestHeader(e,t)}),t.withCredentials&&(d.withCredentials=!0),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){d&&(d.abort(),c(t),d=null)}),void 0===u&&(u=null),d.send(u)})}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(207);t.exports=function(t,n,i,o,r){var a=new Error(t);return e(a,n,i,o,r)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(229)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0),r=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.VirtuosoPresentation=t.VirtuosoGrid=t.Virtuoso=t.GroupedVirtuoso=void 0,e=r(e),i=o(i);var a=(0,e.createContext)(void 0);function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e,n){return(h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=Function.bind.apply(t,i),r=new o;return n&&u(r,n.prototype),r}).apply(null,arguments)}function d(t){var e="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return h(t,arguments,c(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u(i,t)})(t)}function f(t){return function(){var e=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t,e){return e(t)}:1===e.length?e[0]:function(t,n){var i=function(t){return n(t)};e.slice().reverse().forEach(function(t){var e=i;i=function(n){return t(n,e)}}),i(t)}}.apply(void 0,arguments);return function(t,e){var n=function(n){return t(function(t){return e(t,n)})};return{subscribe:n,pipe:f(n)}}(t,e)}}function p(t,e){void 0===e&&(e=!0);var n=[],i=t,o=function(t){return n.push(t),void 0!==i&&t(i),function(){n=n.filter(function(e){return e!==t})}};return{next:function(t){e&&t===i||(i=t,n.forEach(function(e){return e(t)}))},subscribe:o,pipe:f(o),subscribers:n}}function y(){var t=[],e=function(e){return t.push(e),function(){t=t.filter(function(t){return t!==e})}};return{next:function(e){t.forEach(function(t){return t(e)})},subscribe:e,pipe:f(e),subscribers:t}}function g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=Array(e.length).fill(!1),o=Array(e.length),r=[],a=function(t){i.every(function(t){return t})&&t.forEach(function(t){return t(o)})};e.forEach(function(t,e){t.subscribe(function(t){i[e]=!0,o[e]=t,a(r)})});var s=function(t){return r.push(t),a([t]),function(){r=r.filter(function(e){return e!==t})}};return{subscribe:s,pipe:f(s)}}function v(t){return function(e,n){n(t(e))}}function m(t){return function(e,n){return n(t)}}function b(t){return function(e,n){t>0?t--:n(e)}}function _(t){return function(e,n){t(e)&&n(e)}}function w(t){var e;return void 0===t&&(t=function(t,e){return t!==e}),function(n,i){t(e,n)&&(e=n,i(n))}}function x(t,e){var n=e;return function(e,i){i(n=t(n,e))}}function T(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=Array(e.length).fill(!1),o=Array(e.length);return e.forEach(function(t,e){t.subscribe(function(t){o[e]=t,i[e]=!0})}),function(t,e){i.every(function(t){return t})&&e([t].concat(o))}}var S=function(t){var e,n,i,o=p(!1);return t.pipe(b(1),w(),m(!0)).subscribe(o.next),t.pipe(b(1),m(!1),(e=200,function(t,o){n=t,i&&clearTimeout(i),i=setTimeout(function(){o(n)},e)})).subscribe(o.next),o},E=new(function(){function t(){this.level=0}var e=t.prototype;return e.rebalance=function(){return this},e.adjust=function(){return this},e.shift=function(){return this},e.remove=function(){return this},e.find=function(){},e.findWith=function(){},e.findMax=function(){return-1/0},e.findMaxValue=function(){},e.insert=function(t,e){return new C({key:t,value:e,level:1})},e.walkWithin=function(){return[]},e.walk=function(){return[]},e.ranges=function(){return[]},e.rangesWithin=function(){return[]},e.empty=function(){return!0},e.isSingle=function(){return!0},e.isInvariant=function(){return!0},e.keys=function(){return[]},t}());Object.freeze(E);var P=function(t){function e(e){return t.call(this,"Unreachable case: "+e)||this}return l(e,t),e}(d(Error)),C=function(){function t(t){var e=t.key,n=t.value,i=t.level,o=t.left,r=void 0===o?E:o,a=t.right,s=void 0===a?E:a;this.key=e,this.value=n,this.level=i,this.left=r,this.right=s}var e=t.prototype;return e.shift=function(t){return this.clone({key:this.key+t,left:this.left.shift(t),right:this.right.shift(t)})},e.remove=function(t){var e=this.left,n=this.right;if(t===this.key){if(e.empty())return n;if(n.empty())return e;var i=e.last(),o=i[0],r=i[1];return this.clone({key:o,value:r,left:e.deleteLast()}).adjust()}return t<this.key?this.clone({left:e.remove(t)}).adjust():this.clone({right:n.remove(t)}).adjust()},e.empty=function(){return!1},e.find=function(t){return t===this.key?this.value:t<this.key?this.left.find(t):this.right.find(t)},e.findWith=function(t){var e=t(this.value);switch(e){case-1:return this.left.findWith(t);case 0:return[this.key,this.value];case 1:return this.right.findWith(t);default:throw new P(e)}},e.findMax=function(t){if(this.key===t)return t;if(this.key<t){var e=this.right.findMax(t);return e===-1/0?this.key:e}return this.left.findMax(t)},e.findMaxValue=function(t){if(this.key===t)return this.value;if(this.key<t){var e=this.right.findMaxValue(t);return void 0===e?this.value:e}return this.left.findMaxValue(t)},e.insert=function(t,e){return t===this.key?this.clone({key:t,value:e}):t<this.key?this.clone({left:this.left.insert(t,e)}).rebalance():this.clone({right:this.right.insert(t,e)}).rebalance()},e.walkWithin=function(t,e){var n=this.key,i=this.value,o=[];return n>t&&(o=o.concat(this.left.walkWithin(t,e))),n>=t&&n<=e&&o.push({key:n,value:i}),n<=e&&(o=o.concat(this.right.walkWithin(t,e))),o},e.walk=function(){return[].concat(this.left.walk(),[{key:this.key,value:this.value}],this.right.walk())},e.last=function(){return this.right.empty()?[this.key,this.value]:this.right.last()},e.deleteLast=function(){return this.right.empty()?this.left:this.clone({right:this.right.deleteLast()}).adjust()},e.clone=function(e){return new t({key:void 0!==e.key?e.key:this.key,value:void 0!==e.value?e.value:this.value,level:void 0!==e.level?e.level:this.level,left:void 0!==e.left?e.left:this.left,right:void 0!==e.right?e.right:this.right})},e.isSingle=function(){return this.level>this.right.level},e.rebalance=function(){return this.skew().split()},e.adjust=function(){var t=this.left,e=this.right,n=this.level;if(e.level>=n-1&&t.level>=n-1)return this;if(n>e.level+1){if(t.isSingle())return this.clone({level:n-1}).skew();if(t.empty()||t.right.empty())throw new Error("Unexpected empty nodes");return t.right.clone({left:t.clone({right:t.right.left}),right:this.clone({left:t.right.right,level:n-1}),level:n})}if(this.isSingle())return this.clone({level:n-1}).split();if(e.empty()||e.left.empty())throw new Error("Unexpected empty nodes");var i=e.left,o=i.isSingle()?e.level-1:e.level;return i.clone({left:this.clone({right:i.left,level:n-1}),right:e.clone({left:i.right,level:o}).split(),level:i.level+1})},e.isInvariant=function(){var t=this.left,e=this.right,n=this.level;return n===t.level+1&&(n===e.level||n===e.level+1)&&!(!e.empty()&&n<=e.right.level)&&t.isInvariant()&&e.isInvariant()},e.keys=function(){return[].concat(this.left.keys(),[this.key],this.right.keys())},e.ranges=function(){return this.toRanges(this.walk())},e.rangesWithin=function(t,e){return this.toRanges(this.walkWithin(t,e))},e.toRanges=function(t){if(0===t.length)return[];for(var e=t[0],n=e.key,i=e.value,o=[],r=1;r<=t.length;r++){var a=t[r],s=a?a.key-1:1/0;o.push({start:n,end:s,value:i}),a&&(n=a.key,i=a.value)}return o},e.split=function(){var t=this.right,e=this.level;return t.empty()||t.right.empty()||t.level!==e||t.right.level!==e?this:t.clone({left:this.clone({right:t.left}),level:e+1})},e.skew=function(){var t=this.left;return t.empty()||t.level!==this.level?this:t.clone({right:this.clone({left:t.right})})},t}(),O=function(){function t(t){this.root=t}t.empty=function(){return new t(E)};var e=t.prototype;return e.find=function(t){return this.root.find(t)},e.findMax=function(t){return this.root.findMax(t)},e.findMaxValue=function(t){if(this.empty())throw new Error("Searching for max value in an empty tree");return this.root.findMaxValue(t)},e.findWith=function(t){return this.root.findWith(t)},e.insert=function(e,n){return new t(this.root.insert(e,n))},e.remove=function(e){return new t(this.root.remove(e))},e.shift=function(e){if(this.empty())return this;var n=this.root.findMaxValue(1/0);return new t(this.root.shift(e).insert(0,n))},e.empty=function(){return this.root.empty()},e.keys=function(){return this.root.keys()},e.walk=function(){return this.root.walk()},e.walkWithin=function(t,e){var n=this.root.findMax(t);return this.root.walkWithin(n,e)},e.ranges=function(){return this.root.ranges()},e.rangesWithin=function(t,e){var n=this.root.findMax(t);return this.root.rangesWithin(n,e)},e.isInvariant=function(){return this.root.isInvariant()},t}(),D=function(){function t(){}var e=t.prototype;return e.transpose=function(t){return t.map(function(t){return{groupIndex:0,index:t.index,offset:t.offset,size:t.size,transposedIndex:t.index,type:"item"}})},t}(),A=function(){function t(t){this.count=t.reduce(function(t,e){return t+e+1},0);for(var e=O.empty(),n=0,i=0,o=t,r=Array.isArray(o),a=0,o=r?o:o[Symbol.iterator]();;){var s;if(r){if(a>=o.length)break;s=o[a++]}else{if((a=o.next()).done)break;s=a.value}var l=s;e=e.insert(i,[n,i]),n++,i+=l+1}this.tree=e}var e=t.prototype;return e.totalCount=function(){return this.count},e.transpose=function(t){var e=this;return t.map(function(t){var n=e.tree.find(t.index);if(n)return{groupIndex:n[0],index:t.index,offset:t.offset,size:t.size,type:"group"};var i=e.tree.findMaxValue(t.index),o=i[0];return{groupIndex:o,index:t.index,offset:t.offset,size:t.size,transposedIndex:t.index-o-1,type:"item"}})},e.groupIndices=function(){return this.tree.keys()},t}(),k=function(t){return t.length>0?t[0].offset:0},I=function(){function t(t,e,n,i){if(void 0===e&&(e=O.empty()),void 0===n&&(n=[]),void 0===i&&(i=0),this.initialTopMostItemIndex=0,this.rangeSize=0,this.maxRangeSize=1/0,this.rangeSizeExceededCallback=function(){},this.rangeTree=t,this.nanIndices=n,this.initialTopMostItemIndex=i,e.empty())for(var o=0,r=t.ranges(),a=!1,s=r,l=Array.isArray(s),c=0,s=l?s:s[Symbol.iterator]();;){var u;if(l){if(c>=s.length)break;u=s[c++]}else{if((c=s.next()).done)break;u=c.value}var h=u,d=h.start,f=h.end,p=h.value;this.rangeSize++,isNaN(p)?(this.nanIndices.push(d),a||(e=e.insert(o,{startIndex:d,endIndex:1/0,size:p})),a=!0):a||(e=e.insert(o,{startIndex:d,endIndex:f,size:p}),o+=(f-d+1)*p)}this.offsetTree=e}t.create=function(){return new t(O.empty())};var e=t.prototype;return e.empty=function(){return this.rangeTree.empty()},e.fromTree=function(e){return new t(e,void 0,void 0,this.initialTopMostItemIndex)},e.insert=function(t,e,n){var i=this.rangeTree;if(i.empty())return this.fromTree(i.insert(0,n));if(this.rangeSize>this.maxRangeSize)return this.rangeSizeExceededCallback(),this.fromTree(O.empty().insert(0,this.getDefaultSize()));if(this.nanIndices.length&&this.nanIndices.indexOf(e)>-1){var o=i.find(this.nanIndices[0]-1);if(o===n)return this.fromTree(O.empty().insert(0,n));for(var r=this.nanIndices,a=Array.isArray(r),s=0,r=a?r:r[Symbol.iterator]();;){var l;if(a){if(s>=r.length)break;l=r[s++]}else{if((s=r.next()).done)break;l=s.value}var c=l;i=i.insert(c,n)}return this.fromTree(i)}var u=i.rangesWithin(t-1,e+1);if(u.some(function(i){return i.start===t&&(i.end===e||i.end===1/0)&&i.value===n}))return this;for(var h=!1,d=!1,f=u,p=Array.isArray(f),y=0,f=p?f:f[Symbol.iterator]();;){var g;if(p){if(y>=f.length)break;g=f[y++]}else{if((y=f.next()).done)break;g=y.value}var v=g,m=v.start,b=v.end,_=v.value;h?(e>=m||n===_)&&(i=i.remove(m)):(d=_!==n,h=!0),b>e&&e>=m&&(_===n||isNaN(_)||(i=i.insert(e+1,_)))}return d&&(i=i.insert(t,n)),i===this.rangeTree?this:this.fromTree(i)},e.insertSpots=function(e,n){if(this.empty()){for(var i=this.rangeTree,o=e,r=Array.isArray(o),a=0,o=r?o:o[Symbol.iterator]();;){var s;if(r){if(a>=o.length)break;s=o[a++]}else{if((a=o.next()).done)break;s=a.value}var l=s;i=i.insert(l,n).insert(l+1,NaN)}return new t(i)}throw new Error("attempting to overwrite non-empty tree")},e.offsetOf=function(t){if(this.offsetTree.empty())return 0;var e=this.offsetTree.findWith(function(e){return e.startIndex>t?-1:e.endIndex<t?1:0});if(e){var n=e[0],i=e[1],o=i.startIndex,r=i.size;return n+(t-o)*r}throw new Error("Requested offset outside of the known ones, index: "+t)},e.itemAt=function(t){var e=this.rangeTree.findMaxValue(t);return{index:t,size:e,offset:NaN}},e.indexRange=function(t,e){if(this.rangeTree.empty())return[{index:this.initialTopMostItemIndex,size:0,offset:NaN}];for(var n=this.rangeTree.rangesWithin(t,e),i=[],o=n,r=Array.isArray(o),a=0,o=r?o:o[Symbol.iterator]();;){var s;if(r){if(a>=o.length)break;s=o[a++]}else{if((a=o.next()).done)break;s=a.value}for(var l=s,c=Math.max(t,l.start),u=void 0===l.end?1/0:l.end,h=Math.min(e,u),d=c;d<=h;d++)i.push({index:d,size:l.value,offset:NaN})}return i},e.range=function(t,e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=1/0),this.offsetTree.empty())return[{index:this.initialTopMostItemIndex,size:0,offset:0}];for(var o=this.offsetTree.rangesWithin(t,e),r=[],a=o,s=Array.isArray(a),l=0,a=s?a:a[Symbol.iterator]();;){var c;if(s){if(l>=a.length)break;c=a[l++]}else{if((l=a.next()).done)break;c=l.value}var u=c,h=u.start,d=u.value,f=d.startIndex,p=d.endIndex,y=d.size,g=h,v=f;if(h<t&&(v+=Math.floor((t-h)/y),g+=(v-f)*y),v<n&&(g+=(n-v)*y,v=n),isNaN(y))return r.push({index:v,size:0,offset:g}),r;p=Math.min(p,i);for(var m=v;m<=p&&!(g>e);m++)r.push({index:m,size:y,offset:g}),g+=y}return r},e.total=function(t){for(var e=this.rangeTree.rangesWithin(0,t),n=0,i=e,o=Array.isArray(i),r=0,i=o?i:i[Symbol.iterator]();;){var a;if(o){if(r>=i.length)break;a=i[r++]}else{if((r=i.next()).done)break;a=r.value}var s=a,l=s.start,c=s.end,u=s.value;c=Math.min(c,t),n+=(c-l+1)*(isNaN(u)?0:u)}return n},e.getOffsets=function(t){var e=this,n=O.empty();return t.forEach(function(t){var i=e.offsetOf(t);n=n.insert(i,t)}),new L(n)},e.setInitialIndex=function(e){return new t(this.rangeTree,this.offsetTree,this.nanIndices,e)},e.getDefaultSize=function(){return this.rangeTree.findMaxValue(1/0)},e.adjustForPrependedItems=function(t){return this.fromTree(this.rangeTree.shift(t))},e.configureMaxRangeSize=function(t,e){this.maxRangeSize=t,this.rangeSizeExceededCallback=e},t}(),L=function(){function t(t){this.tree=t}var e=t.prototype;return e.findMaxValue=function(t){return this.tree.findMaxValue(t)},e.empty=function(){return this.tree.empty()},t}();function M(t){var e=t.totalCount,n=t.itemHeight,i=t.defaultItemHeight,o=t.initialTopMostItemIndex,r=t.viewportHeight$,a=t.scrollTop$,s=t.topList$,l=t.transposer$,c=p(0),u=p(e),h=p(),d=function(t){var e=t.itemHeights$,n=t.viewportHeight$,i=p(),o=p(!1),r=i.subscribe(function(t){e.next([{start:0,end:0,size:30}]),n.next(30*t),o.next(!0),r()});return{initialItemCount$:i,pendingRenderAfterInitial$:o}}({itemHeights$:h,viewportHeight$:r}),f=d.pendingRenderAfterInitial$,m=d.initialItemCount$,b=y(),w=I.create();n&&(w=w.insert(0,0,n)),i&&(w=w.insert(0,0,i)),o&&(w=w.setInitialIndex(o));var x=p(w),S=function(t){var e=t.offsetList$,n=t.scrollTop$,i=t.topList$,o=t.transposer$,r=p([]),a=g(e,r).pipe(v(function(t){var e=t[0],n=t[1];return e.getOffsets(n)}));return g(e,a,n).pipe(_(function(t){return!t[1].empty()&&!t[0].empty()}),T(i,o),v(function(t){var e=t[0],n=e[0],i=e[1],o=e[2],r=t[1],a=t[2],s=i.findMaxValue(Math.max(o,0));if(1===r.length&&r[0].index===s)return r;var l=n.itemAt(s);return a.transpose([l])})).subscribe(i.next),{stickyItems$:r}}({offsetList$:x,scrollTop$:a,topList$:s,transposer$:l}),E=S.stickyItems$,P=g(x,u,c).pipe(v(function(t){var e=t[0],n=t[1],i=t[2];return e.total(n-1)+i}));return n||h.pipe(T(x,E,f)).subscribe(function(t){var e=t[0],n=t[1],i=t[2],o=t[3],r=n;o&&(r=I.create(),o=!1);for(var a=e,s=Array.isArray(a),l=0,a=s?a:a[Symbol.iterator]();;){var c;if(s){if(l>=a.length)break;c=a[l++]}else{if((l=a.next()).done)break;c=l.value}var u=c,h=u.start,d=u.end,f=u.size;r=r.empty()&&h===d&&i.indexOf(h)>-1?r.insertSpots(i,f):r.insert(h,d,f)}r!==n?(x.next(r),b.next([!0,r])):b.next([!1,r])}),{totalCount$:u,offsetList$:x,totalHeight$:P,footerHeight$:c,initialItemCount$:m,itemHeights$:h,stickyItems$:E,heightsChanged$:b}}function R(t){var e,n,i,o=t.isScrolling$,r=t.scrollTop$,a=t.rangeChanged$,s=p(0),l=p(!1),c=p(!1);return o.pipe(_(function(t){return!t}),m(0)).subscribe(s.next),r.pipe((e=100,function(t,o){n=t,i||(i=setTimeout(function(){i=void 0,o(n)},e))}),x(function(t,e){var n=t[1];return[n,e]},[0,0]),v(function(t){var e=t[0],n=t[1];return n-e})).subscribe(s.next),s.pipe(T(c,l,a),_(function(t){var e=t[1];return!!e}),v(function(t){var e=t[0],n=t[1],i=t[2],o=t[3],r=n.exit,a=n.enter;if(i){if(r(e,o))return!1}else if(a(e,o))return!0;return i}),w()).subscribe(l.next),g(l,s,a).pipe(T(c)).subscribe(function(t){var e=t[0],n=e[0],i=e[1],o=e[2],r=t[1];return n&&r&&r.change(i,o)}),{isSeeking$:l,scrollSeekConfiguration$:c,scrollVelocity$:s}}function N(t){var e=t.offsetList$,n=t.topListHeight$,i=t.stickyItems$,o=t.viewportHeight$,r=t.totalCount$,a=t.totalHeight$,s=t.initialTopMostItemIndex,l=t.heightsChanged$,c=t.scrollTop$,u=y(),h=p(!1),d=p(!0),f=y(),g=function(t){var e=t.initialTopMostItemIndex,n=t.scrollToIndex$,i=t.scrollTop$,o=t.scrollTo$,r=t.offsetList$,a=p(!e);return i.pipe(T(o,a)).subscribe(function(t){var e=t[0],n=t[1],i=t[2];e!==n.top||i||setTimeout(function(){a.next(!0)})}),r.pipe(T(a)).subscribe(function(t){t[1]||setTimeout(function(){n.next(e)})}),{scrolledToTopMostItem$:a}}({scrollTo$:f,offsetList$:e,scrollToIndex$:u,scrollTop$:c,initialTopMostItemIndex:s}),m=g.scrolledToTopMostItem$;return l.pipe(T(m)).subscribe(function(t){var e=t[0],n=e[0],i=t[1];!n&&i&&(h.next(!1),d.next(!0))}),u.pipe(T(e,n,i,o,r,a),v(function(t){var e,n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],s=t[5],l=t[6];"number"==typeof n&&(n={index:n,align:"start",behavior:"auto"});var c=n,u=c.index,h=c.align,f=void 0===h?"start":h;u=Math.max(0,u,Math.min(s-1,u));var p=i.offsetOf(u);return"end"===f?p=p-a+i.itemAt(u).size:"center"===f?p=Math.round(p-a/2+i.itemAt(u).size/2):-1===r.indexOf(u)&&(p-=o),d.next(!1),{top:Math.max(0,Math.min(p,Math.floor(l-a))),behavior:null!==(e=n.behavior)&&void 0!==e?e:"auto"}})).subscribe(f.next),c.pipe(T(d)).subscribe(function(t){var e=t[1];e||(d.next(!0),h.next(!0))}),e.pipe(T(h,u)).subscribe(function(t){var e=t[1],n=t[2];e&&u.next(n)}),{scrollToIndex$:u,scrollTo$:f,scrolledToTopMostItem$:m}}function F(t){var e;return function(n){e&&e(),n&&(e=t.subscribe(n))}}function j(t){return t.next}var U=function(t){var n=t.overscan,i=void 0===n?0:n,o=t.totalCount,r=void 0===o?0:o,a=t.itemHeight,l=t.initialTopMostItemIndex,c=t.defaultItemHeight,u=p(new D),h=p(0),d=p(0,!1),f=S(d),m=function(){var t=p([]),e=t.pipe(v(function(t){return t.reduce(function(t,e){return t+e.size},0)})),n=t.pipe(v(function(t){return t.length&&t[t.length-1].index+1}));return{topList$:t,topListHeight$:e,minListIndex$:n}}(),b=m.topList$,E=m.minListIndex$,P=m.topListHeight$,C=M({totalCount:r,itemHeight:a,defaultItemHeight:c,initialTopMostItemIndex:l,viewportHeight$:h,scrollTop$:d,transposer$:u,topList$:b}),O=C.stickyItems$,I=C.initialItemCount$,L=C.itemHeights$,U=C.offsetList$,z=C.totalCount$,W=C.footerHeight$,G=C.totalHeight$,B=C.heightsChanged$,H=function(t){var e=t.transposer$,n=t.stickyItems$,i=t.totalCount$,o=p(),r=n.pipe();return o.subscribe(function(t){var o=new A(t);e.next(o),i.next(o.totalCount()),n.next(o.groupIndices())}),{groupCounts$:o,groupIndices$:r}}({totalCount$:z,transposer$:u,stickyItems$:O}),V=H.groupCounts$,Y=H.groupIndices$,K=function(t){var e,n=t.totalHeight$,i=t.viewportHeight$,o=t.scrollTop$,r=p(!1);return g(o,i,n).pipe(v(function(t){var e=t[0],n=t[1],i=t[2];return 0!==n&&e===i-n})).subscribe(function(t){clearTimeout(e),t?r.next(!0):e=setTimeout(function(){return r.next(!1)})}),{scrolledToBottom$:r}}({totalHeight$:G,viewportHeight$:h,scrollTop$:d}),X=K.scrolledToBottom$,q=N({initialTopMostItemIndex:l,scrollTop$:d,offsetList$:U,viewportHeight$:h,totalHeight$:G,stickyItems$:O,totalCount$:z,topListHeight$:P,heightsChanged$:B}),$=q.scrolledToTopMostItem$,Q=q.scrollToIndex$,J=q.scrollTo$,Z=function(t){var e=t.overscan,n=t.viewportHeight$,i=t.scrollTop$,o=t.topListHeight$,r=t.footerHeight$,a=t.minListIndex$,s=t.totalCount$,l=t.offsetList$,c=t.scrolledToTopMostItem$,u=t.transposer$,h=t.totalHeight$,d=p(0),f=y(),m=p([]),b=p(0);g(i,h,n).pipe(v(function(t){var e=t[0],n=t[1],i=t[2];return Math.max(0,Math.min(e,n-i))})).subscribe(b.next),g(n,b,o,d,r,a,s,l,c,u).pipe(x(function(t,n){var i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=t.length;if(0===c)return[];var p=k(t),y=p-o+a-s-r,g=Math.max(c-1,0),v=f>0&&(t[0].index<l||t[f-1].index>g);if(y<i||v){var m=o+i+2*e-1;t=d.transpose(u.range(o,m,l,g))}if(p>o){var b=Math.max(o-2*e,0),_=o+i-1;t=d.transpose(u.range(b,_,l,g))}return t.length>1&&!h?[]:t},[]),w()).subscribe(m.next);var _=g(m,i,o).pipe(v(function(t){var e=t[0];return k(e)})),S=0;return m.pipe(v(function(t){return t.length?t[t.length-1].index:0})).pipe(T(s)).subscribe(function(t){var e=t[0],n=t[1];0!==n&&e===n-1&&S!==e&&(S=e,f.next(e))}),{list$:m,listOffset$:_,listHeight$:d,endReached$:f}}({overscan:i,viewportHeight$:h,scrollTop$:d,totalHeight$:G,topListHeight$:P,footerHeight$:W,minListIndex$:E,totalCount$:z,offsetList$:U,scrolledToTopMostItem$:$,transposer$:u}),tt=Z.listHeight$,et=Z.list$,nt=Z.listOffset$,it=Z.endReached$,ot=function(t){var e=t.offsetList$,n=t.scrollTop$,i=t.scrollTo$,o=y(),r=p(!1);return o.pipe(T(e,n,r)).subscribe(function(t){var n=t[0],o=t[1],a=t[2];t[3]||o.empty()||(r.next(!0),e.next(o.adjustForPrependedItems(n)),setTimeout(function(){i.next({top:n*o.getDefaultSize()+a}),r.next(!1)}))}),{adjustForPrependedItems$:o,adjustmentInProgress$:r}}({offsetList$:U,scrollTop$:d,scrollTo$:J}),rt=ot.adjustForPrependedItems$,at=ot.adjustmentInProgress$,st=function(t){var e=t.list$,n=t.offsetList$,i=t.scrollTop$,o=t.scrollTo$,r=p(null),a=p(1/0);return n.pipe(T(a,i,e)).subscribe(function(t){var e=t[0],n=t[1],i=t[2],o=t[3];return e.configureMaxRangeSize(n,function(){r.next({index:o[0].index,offset:i-o[0].offset})})}),n.pipe(T(r)).subscribe(function(t){var e=t[0],n=t[1];if(null!==n){var i=e.offsetOf(n.index)+n.offset;o.next({top:i}),r.next(null)}}),{maxRangeSize$:a}}({scrollTo$:J,offsetList$:U,scrollTop$:d,list$:et}),lt=st.maxRangeSize$,ct=function(t){var e=t.topList$,n=t.transposer$,i=t.viewportHeight$,o=t.totalCount$,r=t.offsetList$,a=p();return g(r,a,o,i).pipe(_(function(t){return t[1]>0&&t[3]>0}),T(n),v(function(t){var e=t[0],n=e[0],i=e[1],o=e[2],r=t[1],a=Math.max(0,Math.min(i-1,o));return r.transpose(n.indexRange(0,a))})).subscribe(e.next),{topItemCount$:a}}({offsetList$:U,totalCount$:z,transposer$:u,viewportHeight$:h,topList$:b}),ut=ct.topItemCount$,ht=function(t){var e=t.scrollToIndex$,n=t.scrolledToBottom$,i=t.totalCount$,o=p(!1);return g(o,i).pipe(T(n)).subscribe(function(t){var n=t[0],i=n[0],o=n[1],r=t[1];i&&r&&setTimeout(function(){e.next({index:o-1,align:"end",behavior:"auto"})})}),{followOutput$:o}}({totalCount$:z,scrollToIndex$:Q,scrolledToBottom$:X}),dt=ht.followOutput$,ft=nt.pipe(v(function(t){return-t})),pt=y();et.pipe(T(at),_(function(t){var e=t[0],n=t[1];return 0!==e.length&&!n}),v(function(t){var e=t[0],n=e[0].index,i=e[e.length-1].index;return{startIndex:n,endIndex:i}}),w(function(t,e){return!t||t.startIndex!==e.startIndex||t.endIndex!==e.endIndex})).subscribe(pt.next);var yt=R({scrollTop$:d,isScrolling$:f,rangeChanged$:pt}),gt=yt.isSeeking$,vt=yt.scrollVelocity$,mt=yt.scrollSeekConfiguration$,bt=G.pipe(v(function(t){return Math.min(t,15e6)})),_t=g(G,bt,h).pipe(v(function(t){var e=t[0],n=t[1],i=t[2];return e===n?1:(e-i)/(n-i)})),wt=p(0,!1),xt=g(nt,_t).pipe(v(function(t){var e=t[0],n=t[1];return e/n}));g(wt,_t).pipe(v(function(t){var e=t[0],n=t[1];return e*n})).subscribe(d.next);var Tt=p(function(t){return t}),St=p(function(t,e){return t}),Et=p(function(t){return t}),Pt=p("div"),Ct=p("div"),Ot=p(!1),Dt=p(Symbol("data-key"));return g(St,Et,mt,Tt,Pt,Ct,Dt).pipe(v(function(t){var n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],l=t[5];return{render:function(t,c){var u,h=c.key,d=c.renderPlaceholder,f=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}(c,["key","renderPlaceholder"]);return r&&(h=r(t.index)),"group"===t.type?e.default.createElement(l,s({key:h},f),i(t.groupIndex)):(u=o&&d?e.default.createElement(o.placeholder,{height:f["data-known-size"],index:t.index}):n(t.transposedIndex),e.default.createElement(a,s({},f,{key:h}),u))}}})).subscribe(Ot.next),{groupCounts:j(V),itemHeights:j(L),footerHeight:j(W),listHeight:j(tt),viewportHeight:j(h),scrollTop:j(wt),topItemCount:j(ut),totalCount:j(z),scrollToIndex:j(Q),initialItemCount:j(I),followOutput:j(dt),adjustForPrependedItems:j(rt),maxRangeSize:j(lt),scrollSeekConfiguration:j(mt),renderProp:j(St),groupRenderProp:j(Et),computeItemKey:j(Tt),itemContainer:j(Pt),groupContainer:j(Ct),dataKey:j(Dt),itemRender:F(Ot),list:F(et),isSeeking:F(gt),scrollVelocity:F(vt),itemsRendered:F(et),topList:F(b),listOffset:F(xt),totalHeight:F(bt),endReached:F(it),atBottomStateChange:F(X),totalListHeightChanged:F(G),rangeChanged:F(pt),isScrolling:F(f),stickyItems:F(O),groupIndices:F(Y),stickyItemsOffset:F(ft),scrollTo:F(J)}},z={top:0,position:"absolute",height:"100%",width:"100%"},W=function(t,n,o){var r=(0,e.useRef)(null),a=(0,e.useRef)(0),s=new i.default(function(e){var n=Math.round(e[0].contentRect.height);o&&(a.current=window.requestAnimationFrame(function(){var t=e[0].target;document.body.contains(t)&&o(t)})),t(n)});return(0,e.useEffect)(function(){return function(){return window.cancelAnimationFrame(a.current)}},[]),function(t){t?(s.observe(t),n&&n(t),r.current=t):(s.unobserve(r.current),r.current=null)}};function G(t,n){var i=(0,e.useState)(function(t,e){return function(){var n=e;return t(function(t){n=t}),n}}(t,n)),o=i[0],r=i[1];return(0,e.useEffect)(function(){return t(r),function(){return t(void 0)}},[t]),o}var B,H,V,Y=(B=function(){var t=document.createElement("div");return t.style.position="-webkit-sticky","-webkit-sticky"===t.style.position?"-webkit-sticky":"sticky"},V=!1,function(){return V||(V=!0,H=B()),H}),K=function(t){var n=t.height;return e.default.createElement("div",{style:{height:n+"px",position:"absolute",top:0}},"")},X=e.default.memo(function(){var t=(0,e.useContext)(a),n=t.isSeeking,i=t.topList,o=t.list,r=t.itemRender,s=G(o,[]),l=G(i,[]),c=G(r,!1),u=G(n,!1),h=[],d=0,f=[],p=l.reduce(function(t,e){return t+e.size},0);return l.forEach(function(t,e){var n=t.index;f.push(n);var i={top:d+"px",marginTop:0===e?-p+"px":void 0,zIndex:2,position:Y()},o={key:n,"data-index":n,"data-known-size":t.size,renderPlaceholder:u,style:i};c&&h.push(c.render(t,o)),d+=t.size}),s.forEach(function(t){f.indexOf(t.index)>-1||c&&h.push(c.render(t,{key:t.index,"data-index":t.index,"data-known-size":t.size,renderPlaceholder:u}))}),e.default.createElement(e.default.Fragment,null,h)}),q={height:"40rem",overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative",outline:"none"},$=function(t){var n=t.className,i=t.style,o=t.reportScrollTop,r=t.scrollTo,a=t.children,s=(0,e.useRef)(null),l=(0,e.useRef)(null),c=(0,e.useRef)(),u=(0,e.useCallback)(function(t){var e=t.target.scrollTop;c.current=e,null!==l.current?l.current===e&&(l.current=null,o(e)):o(e)},[o]),h=(0,e.useCallback)(function(t){t?(t.addEventListener("scroll",u,{passive:!0}),s.current=t):s.current&&s.current.removeEventListener("scroll",u)},[u]);return r(function(t){c.current!==t.top&&("smooth"===t.behavior&&(l.current=t.top),s.current&&s.current.scrollTo(t))}),e.default.createElement("div",{ref:h,style:i,tabIndex:0,className:n},a)},Q=function(t){var n=t.children,i=t.style,o=t.className,r=t.ScrollContainer,a=void 0===r?$:r,l=t.scrollTop,c=t.scrollTo;return e.default.createElement(a,{style:s({},q,{},i),reportScrollTop:l,scrollTo:c,className:o},n)},J=function(t){var n=t.children,i=t.footerRef;return e.default.createElement("footer",{ref:i},n)},Z=function(t){var n=t.children,i=t.listRef,o=t.style;return e.default.createElement("div",{ref:i,style:o},n)},tt=function(t){var n=t.footer,i=t.FooterContainer,o=void 0===i?J:i,r=W((0,e.useContext)(a).footerHeight);return e.default.createElement(o,{footerRef:r},n())},et=function(t){var n=t.fixedItemHeight,i=t.children,o=t.ListContainer,r=(0,e.useContext)(a),s=r.listHeight,l=r.itemHeights,c=r.listOffset,u=G(c,0),h={marginTop:u+"px"},d=W(s,function(){},function(t){if(!n){var e=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var o=t.item(n);if(o&&void 0!==o.dataset.index){var r=parseInt(o.dataset.index),a=parseInt(o.dataset.knownSize),s=o.offsetHeight;if(s!==a){var l=e[e.length-1];0===e.length||l.size!==s||l.end!==r-1?e.push({start:r,end:r,size:s}):e[e.length-1].end++}}}return e}(t.children);l(e)}});return e.default.createElement(o,{listRef:d,style:h},i)},nt=function(t){var n=t.style,i=t.footer,o=t.fixedItemHeight,r=t.ScrollContainer,s=t.ListContainer,l=t.FooterContainer,c=t.className,u=(0,e.useContext)(a),h=u.scrollTo,d=u.scrollTop,f=u.totalHeight,p=u.viewportHeight,y=G(f,0),g=W(p);return e.default.createElement(Q,{style:n,ScrollContainer:r,className:c,scrollTo:h,scrollTop:function(t){d(Math.max(t,0))}},e.default.createElement("div",{ref:g,style:z},e.default.createElement(et,{fixedItemHeight:o,ListContainer:s},e.default.createElement(X,null),i&&e.default.createElement(tt,{footer:i,FooterContainer:l}))),e.default.createElement(K,{height:y}))},it={},ot=e.default.memo(function(t){var n=t.contextValue,i=t.style,o=t.className,r=t.footer,s=t.itemHeight,l=t.ScrollContainer,c=t.ListContainer,u=t.FooterContainer;return e.default.createElement(a.Provider,{value:n},e.default.createElement(nt,{style:i||it,className:o,footer:r,fixedItemHeight:void 0!==s,ScrollContainer:l,FooterContainer:u,ListContainer:c||Z}))});t.VirtuosoPresentation=ot;var rt=(0,e.forwardRef)(function(t,n){var i=(0,e.useState)(function(){return U(t)}),o=i[0];return(0,e.useImperativeHandle)(n,function(){return{scrollToIndex:function(t){o.scrollToIndex(t)},adjustForPrependedItems:function(t){o.adjustForPrependedItems(t)}}},[o]),(0,e.useEffect)(function(){return o.isScrolling(t.scrollingStateChange),o.atBottomStateChange(t.atBottomStateChange),o.endReached(t.endReached),o.topItemCount(t.topItems||0),o.totalCount(t.totalCount),t.initialItemCount&&o.initialItemCount(t.initialItemCount),o.itemsRendered(t.itemsRendered),o.totalListHeightChanged(t.totalListHeightChanged),o.followOutput(!!t.followOutput),o.maxRangeSize(t.maxHeightCacheSize||1/0),o.rangeChanged(t.rangeChanged),o.scrollSeekConfiguration(t.scrollSeek),o.computeItemKey(t.computeItemKey||function(t){return t}),o.itemContainer(t.ItemContainer||"div"),o.renderProp(t.item),o.dataKey(t.dataKey),function(){o.itemsRendered(void 0),o.totalListHeightChanged(void 0)}},[o,t.scrollingStateChange,t.atBottomStateChange,t.endReached,t.topItems,t.totalCount,t.initialItemCount,t.itemsRendered,t.totalListHeightChanged,t.followOutput,t.maxHeightCacheSize,t.rangeChanged,t.scrollSeek,t.item,t.ItemContainer,t.computeItemKey,t.dataKey]),e.default.createElement(ot,{contextValue:o,style:t.style,className:t.className,footer:t.footer,itemHeight:t.itemHeight,ScrollContainer:t.ScrollContainer,FooterContainer:t.FooterContainer,ListContainer:t.ListContainer})});t.Virtuoso=rt,rt.displayName="Virtuoso";var at=(0,e.forwardRef)(function(t,n){var i=(0,e.useState)(U(t)),o=i[0];return(0,e.useImperativeHandle)(n,function(){return{scrollToIndex:function(t){o.scrollToIndex(t)}}},[o]),(0,e.useEffect)(function(){return o.endReached(t.endReached),o.rangeChanged(t.rangeChanged),o.atBottomStateChange(t.atBottomStateChange),o.isScrolling(t.scrollingStateChange),o.groupCounts(t.groupCounts),o.groupIndices(t.groupIndices),o.itemsRendered(t.itemsRendered),o.totalListHeightChanged(t.totalListHeightChanged),o.renderProp(t.item),o.groupRenderProp(t.group),o.itemContainer(t.ItemContainer||"div"),o.groupContainer(t.GroupContainer||"div"),o.scrollSeekConfiguration(t.scrollSeek),function(){o.itemsRendered(void 0),o.totalListHeightChanged(void 0)}},[o,t.endReached,t.rangeChanged,t.atBottomStateChange,t.scrollingStateChange,t.groupCounts,t.groupIndices,t.itemsRendered,t.totalListHeightChanged,t.item,t.group,t.GroupContainer,t.ItemContainer,t.scrollSeek]),e.default.createElement(ot,{contextValue:o,style:t.style,className:t.className,footer:t.footer,itemHeight:t.itemHeight,ScrollContainer:t.ScrollContainer,FooterContainer:t.FooterContainer,ListContainer:t.ListContainer})});t.GroupedVirtuoso=at,at.displayName="GroupedVirtuoso";var st=Math.ceil,lt=Math.floor,ct=Math.min,ut=Math.max,ht=function(t){return st(t)-t<.03?st(t):lt(t)},dt=function(t){void 0===t&&(t=0);var e=p([0,0,void 0,void 0]),n=p(0),i=p(0),o=p(0),r=p([0,ut(t-1,0)]),a=p(0),s=p(0),l=y();g(e,i,o,n).pipe(T(r)).subscribe(function(t){var e=t[0],n=e[0],i=n[0],o=n[1],l=n[2],c=n[3],u=e[1],h=e[2],d=e[3],f=t[1];if(void 0!==l&&void 0!==c){if(0===d)return r.next([0,-1]),void s.next(0);var p=f[0],y=f[1],g=ht(i/l),v=function(t,e){return void 0===e&&(e=lt),e(t/g)},m=function(t){var e=t?[0,h]:[h,0],n=e[0],i=e[1],a=g*lt((u-n)/c),l=g*st((u+o+i)/c)-1;l=ct(d-1,l),a=ct(l,ut(0,a)),r.next([a,l]),s.next(v(a)*c)},b=c*v(p),_=c*v(y)+c;d<y-1?m(!0):b>u?m(!1):_<u+o&&m(!0),a.next(c*v(d,st))}});var c=l.pipe(T(e,n),v(function(t){var e=t[0],n=t[1],i=n[0],o=n[1],r=n[2],a=n[3],s=t[2];if(void 0===r||void 0===a)return{top:0,behavior:"auto"};"number"==typeof e&&(e={index:e,align:"start"});var l=e,c=l.index,u=l.align,h=void 0===u?"start":u;c=Math.max(0,c,Math.min(s-1,c));var d=ht(i/r),f=lt(c/d)*a;return"end"===h?f=f-o+a:"center"===h&&(f=Math.round(f-o/2+a/2)),{top:f,behavior:"auto"}})),u=S(i),h=y(),d=0;return r.pipe(T(n)).subscribe(function(t){var e=t[0],n=e[1],i=t[1];0!==i&&n===i-1&&d!==n&&(d=n,h.next(n))}),{gridDimensions:j(e),totalCount:j(n),scrollTop:j(i),overscan:j(o),scrollToIndex:j(l),itemRange:F(r),totalHeight:F(a),listOffset:F(s),scrollTo:F(c),isScrolling:F(u),endReached:F(h)}},ft=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state=dt(e.props.initialItemCount),e}l(n,t),n.getDerivedStateFromProps=function(t,e){return e.overscan(t.overscan||0),e.totalCount(t.totalCount),e.isScrolling(t.scrollingStateChange),e.endReached(t.endReached),null};var i=n.prototype;return i.scrollToIndex=function(t){this.state.scrollToIndex(t)},i.render=function(){return e.default.createElement(pt,Object.assign({},this.props,{engine:this.state}))},n}(e.default.PureComponent);t.VirtuosoGrid=ft;var pt=function(t){var n,o,r,a,s=t.ScrollContainer,l=t.ItemContainer,c=void 0===l?"div":l,u=t.ListContainer,h=void 0===u?"div":u,d=t.className,f=t.item,p=t.itemClassName,y=void 0===p?"virtuoso-grid-item":p,g=t.listClassName,v=void 0===g?"virtuoso-grid-list":g,m=t.engine,b=t.style,_=void 0===b?{height:"40rem"}:b,w=m.itemRange,x=m.listOffset,T=m.totalHeight,S=m.gridDimensions,E=m.scrollTo,P=m.scrollTop,C=G(T,0),O=G(x,0),D={marginTop:O+"px"},A=G(w,[0,0]),k=(n=function(t){var e=t.element,n=t.width,i=t.height,o=e.firstChild.firstChild;S([n,i,o.offsetWidth,o.offsetHeight])},o=(0,e.useRef)(null),r=(0,e.useRef)([0,0]),a=new i.default(function(t){var e=t[0].contentRect,i=e.width,o=e.height;r.current[0]===i&&r.current[1]===o||(r.current=[i,o],n({element:t[0].target,width:Math.round(i),height:Math.round(o)}))}),function(t){t?(a.observe(t),o.current=t):(a.unobserve(o.current),o.current=null)});return e.default.createElement(Q,{style:_,ScrollContainer:s,className:d,scrollTo:E,scrollTop:P},e.default.createElement("div",{ref:k,style:z},e.default.createElement(h,{style:D,className:v},function(t,n,i,o){for(var r=t[0],a=t[1],s=[],l=r;l<=a;l++)s.push(e.default.createElement(o,{key:l,className:i},n(l)));return s}(A,f,y,c))),e.default.createElement(K,{height:C}))}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(64),n(6),n(22),n(86),n(87),n(88),n(14),n(46),n(103),n(105),n(239)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s,l,c,u,h,d,f){"use strict";var p=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=p(e),o=p(o),l=p(l),c=p(c),u=p(u),d=p(d),window.PLAYER_USER_TYPE={student:"STUDENT",teacher:"TEACHER",tutor:"TUTOR"},t.default=class{constructor(t,n){(0,e.default)(this,"eventListeners",{}),(0,e.default)(this,"eventControllersInstance",void 0),(0,e.default)(this,"dom",void 0),this.dom=t,"string"!=typeof n&&n?(n.role&&(n.role=n.role.toUpperCase()),this.init(n)):this.init({role:(n||"student").toUpperCase()})}init(t){this.eventControllersInstance=new l.default((t,e,n)=>{const i=this.eventListeners[t];i&&i.length>0?i.forEach(t=>{t(e,n)}):console.warn("",t,e)},t)}triggleEvent(t,e){this.eventControllersInstance.handleEventMsg({name:t,data:e})}on(t,e){this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(e)}removeEventListener(t,e){if(this.eventListeners[t]){const n=this.eventListeners[t].findIndex(e);this.eventListeners[t].splice(n,1)}}removeAllEventListener(t){this.eventListeners[t]&&delete this.eventListeners[t]}render(t){!function(t,e,n){u.default.render(o.default.createElement(h.AppContainer,null,o.default.createElement(r.Provider,{store:c.default},o.default.createElement("div",{id:"courseware-player",style:{width:"100%",height:"100%"}},t))),e,()=>{n&&n()})}(o.default.createElement(d.default,{eventControllersInstance:this.eventControllersInstance}),this.dom,t)}setRole(t){this.init(t),this.render()}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){(function(n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";!function(e){var n,i=Object.prototype,o=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag",c="object"==typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{(u=e.regeneratorRuntime=c?t.exports:{}).wrap=_;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",y={},g={};g[a]=function(){return this};var v=Object.getPrototypeOf,m=v&&v(v(k([])));m&&m!==i&&o.call(m,a)&&(g=m);var b=S.prototype=x.prototype=Object.create(g);T.prototype=b.constructor=S,S.constructor=T,S[l]=T.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===T||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(b),t},u.awrap=function(t){return{__await:t}},E(P.prototype),P.prototype[s]=function(){return this},u.AsyncIterator=P,u.async=function(t,e,n,i){var o=new P(_(t,e,n,i));return u.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},E(b),b[l]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=k,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,o){return s.type="throw",s.arg=t,e.next=i,o&&(e.method="next",e.arg=n),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;D(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:k(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),y}}}function _(t,e,n,i){var o=e&&e.prototype instanceof x?e:x,r=Object.create(o.prototype),a=new A(i||[]);return r._invoke=function(t,e,n){var i=h;return function(o,r){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===o)throw r;return I()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=w(t,e,n);if("normal"===l.type){if(i=n.done?p:d,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=p,n.method="throw",n.arg=l.arg)}}}(t,n,a),r}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function T(){}function S(){}function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function P(t){function n(e,i,r,a){var s=w(t[e],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,r,a)},function(t){n("throw",t,r,a)}):Promise.resolve(c).then(function(t){l.value=t,r(l)},a)}a(s.arg)}var i;"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=function(t,e){function o(){return new Promise(function(i,o){n(t,e,i,o)})}return i=i?i.then(o,o):o()}}function C(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,C(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=w(i,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(o.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return r.next=r}}return{next:I}}function I(){return{value:n,done:!0}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:void 0)})?i.apply(e,o):i)||(t.exports=r)}).call(this,n(19))},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){
/** @license React v16.8.6
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
"use strict";var e=n(38),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,r=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,u=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function v(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=0;i<e;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);!function(t,e,n,i,o,r,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,o,r,a,s],c=0;(t=Error(e.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||m}function w(){}function x(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||m}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&v("85"),this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=_.prototype;var T=x.prototype=new w;T.constructor=x,e(T,_.prototype),T.isPureReactComponent=!0;var S={current:null},E={current:null},P=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function O(t,e,n){var i=void 0,r={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)P.call(e,i)&&!C.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:o,type:t,key:a,ref:s,props:r,_owner:E.current}}function D(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var A=/\/+/g,k=[];function I(t,e,n,i){if(k.length){var o=k.pop();return o.result=t,o.keyPrefix=e,o.func=n,o.context=i,o.count=0,o}return{result:t,keyPrefix:e,func:n,context:i,count:0}}function L(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>k.length&&k.push(t)}function M(t,e,n){return null==t?0:function t(e,n,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case r:l=!0}}if(l)return i(a,e,""===n?"."+R(e,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){s=e[c];var u=n+R(s,c);l+=t(s,u,i,a)}else if(null===e||"object"!=typeof e?u=null:u="function"==typeof(u=g&&e[g]||e["@@iterator"])?u:null,"function"==typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)s=s.value,u=n+R(s,c++),l+=t(s,u,i,a);else"object"===s&&v("31","[object Object]"===(i=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":i,"");return l}(t,"",e,n)}function R(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function N(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var i=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?j(t,i,n,function(t){return t}):null!=t&&(D(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(A,"$&/")+"/")+n)),i.push(t))}function j(t,e,n,i,o){var r="";null!=n&&(r=(""+n).replace(A,"$&/")+"/"),e=I(e,r,i,o),M(t,F,e),L(e)}function U(){var t=S.current;return null===t&&v("321"),t}var z={Children:{map:function(t,e,n){if(null==t)return t;var i=[];return j(t,i,null,e,n),i},forEach:function(t,e,n){if(null==t)return t;e=I(null,null,e,n),M(t,N,e),L(e)},count:function(t){return M(t,function(){return null},null)},toArray:function(t){var e=[];return j(t,e,null,function(t){return t}),e},only:function(t){return D(t)||v("143"),t}},createRef:function(){return{current:null}},Component:_,PureComponent:x,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:u,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:d,render:t}},lazy:function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return U().useCallback(t,e)},useContext:function(t,e){return U().useContext(t,e)},useEffect:function(t,e){return U().useEffect(t,e)},useImperativeHandle:function(t,e,n){return U().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return U().useLayoutEffect(t,e)},useMemo:function(t,e){return U().useMemo(t,e)},useReducer:function(t,e,n){return U().useReducer(t,e,n)},useRef:function(t){return U().useRef(t)},useState:function(t){return U().useState(t)},Fragment:a,StrictMode:s,Suspense:f,createElement:O,cloneElement:function(t,n,i){null==t&&v("267",t);var r=void 0,a=e({},t.props),s=t.key,l=t.ref,c=t._owner;if(null!=n){void 0!==n.ref&&(l=n.ref,c=E.current),void 0!==n.key&&(s=""+n.key);var u=void 0;for(r in t.type&&t.type.defaultProps&&(u=t.type.defaultProps),n)P.call(n,r)&&!C.hasOwnProperty(r)&&(a[r]=void 0===n[r]&&void 0!==u?u[r]:n[r])}if(1==(r=arguments.length-2))a.children=i;else if(1<r){u=Array(r);for(var h=0;h<r;h++)u[h]=arguments[h+2];a.children=u}return{$$typeof:o,type:t.type,key:s,ref:l,props:a,_owner:c}},createFactory:function(t){var e=O.bind(null,t);return e.type=t,e},isValidElement:D,version:"16.8.6",unstable_ConcurrentMode:h,unstable_Profiler:l,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentOwner:E,assign:e}},W={default:z},G=W&&z||W;t.exports=G.default||G})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(39),n(6),n(11),n(40),n(26)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a){"use strict";var s=n(0);function l(t){var n;void 0===t&&(t="store");var a=t+"Subscription",s=function(n){(0,e.default)(r,n);var o=r.prototype;function r(e,i){var o;return(o=n.call(this,e,i)||this)[t]=e.store,o}return o.getChildContext=function(){var e;return(e={})[t]=this[t],e[a]=null,e},o.render=function(){return i.Children.only(this.props.children)},r}(i.Component);return s.propTypes={store:r.storeShape.isRequired,children:o.default.element.isRequired},s.childContextTypes=((n={})[t]=r.storeShape.isRequired,n[a]=r.subscriptionShape,n),s}Object.defineProperty(t,"__esModule",{value:!0}),t.createProvider=l,t.default=void 0,e=s(e),o=s(o),a=s(a);var c=l();t.default=c})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(68);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,n,i,o,r,a){if(a!==e){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function n(){return t}t.isRequired=t;var r={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:n,element:t,elementType:t,instanceOf:n,node:t,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(42),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function s(t){return e.isMemo(t)?r:a[t.$$typeof]||i}a[e.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,i){if("string"!=typeof n){if(f){var r=d(n);r&&r!==f&&t(e,r,i)}var a=c(n);u&&(a=a.concat(u(n)));for(var p=s(e),y=s(n),g=0;g<a.length;++g){var v=a[g];if(!(o[v]||i&&i[v]||y&&y[v]||p&&p[v])){var m=h(n,v);try{l(e,v,m)}catch(t){}}}return e}return e}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){
/** @license React v16.8.6
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t="function"==typeof Symbol&&Symbol.for,n=t?Symbol.for("react.element"):60103,i=t?Symbol.for("react.portal"):60106,o=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,h=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,f=t?Symbol.for("react.memo"):60115,p=t?Symbol.for("react.lazy"):60116;function y(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case c:case u:case o:case a:case r:case d:return t;default:switch(t=t&&t.$$typeof){case l:case h:case s:return t;default:return e}}case p:case f:case i:return e}}}function g(t){return y(t)===u}e.typeOf=y,e.AsyncMode=c,e.ConcurrentMode=u,e.ContextConsumer=l,e.ContextProvider=s,e.Element=n,e.ForwardRef=h,e.Fragment=o,e.Lazy=p,e.Memo=f,e.Portal=i,e.Profiler=a,e.StrictMode=r,e.Suspense=d,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===u||t===a||t===r||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===p||t.$$typeof===f||t.$$typeof===s||t.$$typeof===l||t.$$typeof===h)},e.isAsyncMode=function(t){return g(t)||y(t)===c},e.isConcurrentMode=g,e.isContextConsumer=function(t){return y(t)===l},e.isContextProvider=function(t){return y(t)===s},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===n},e.isForwardRef=function(t){return y(t)===h},e.isFragment=function(t){return y(t)===o},e.isLazy=function(t){return y(t)===p},e.isMemo=function(t){return y(t)===f},e.isPortal=function(t){return y(t)===i},e.isProfiler=function(t){return y(t)===a},e.isStrictMode=function(t){return y(t)===r},e.isSuspense=function(t){return y(t)===d}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t,e,n,i,o,r,a,s){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,o,r,a,s],u=0;(l=new Error(e.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=null,n={notify:function(){}},i=function(){function t(t,e,i){this.store=t,this.parentSub=e,this.onStateChange=i,this.unsubscribe=null,this.listeners=n}var i=t.prototype;return i.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},i.notifyNestedSubs=function(){this.listeners.notify()},i.isSubscribed=function(){return Boolean(this.unsubscribe)},i.trySubscribe=function(){var t,n;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(t=[],n=[],{clear:function(){n=e,t=e},notify:function(){for(var e=t=n,i=0;i<e.length;i++)e[i]()},get:function(){return n},subscribe:function(i){var o=!0;return n===t&&(n=t.slice()),n.push(i),function(){o&&t!==e&&(o=!1,n===t&&(n=t.slice()),n.splice(n.indexOf(i),1))}}}))},i.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=n)},t}();t.default=i})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(27),n(28),n(41),n(75),n(76),n(81),n(82),n(83)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s,l,c){"use strict";var u=n(0);function h(t,e,n){for(var i=e.length-1;i>=0;i--){var o=e[i](t);if(o)return o}return function(e,i){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+i.wrappedComponentName+".")}}function d(t,e){return t===e}function f(t){var n=void 0===t?{}:t,u=n.connectHOC,f=void 0===u?o.default:u,p=n.mapStateToPropsFactories,y=void 0===p?s.default:p,g=n.mapDispatchToPropsFactories,v=void 0===g?a.default:g,m=n.mergePropsFactories,b=void 0===m?l.default:m,_=n.selectorFactory,w=void 0===_?c.default:_;return function(t,n,o,a){void 0===a&&(a={});var s=a,l=s.pure,c=void 0===l||l,u=s.areStatesEqual,p=void 0===u?d:u,g=s.areOwnPropsEqual,m=void 0===g?r.default:g,_=s.areStatePropsEqual,x=void 0===_?r.default:_,T=s.areMergedPropsEqual,S=void 0===T?r.default:T,E=(0,i.default)(s,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),P=h(t,y,"mapStateToProps"),C=h(n,v,"mapDispatchToProps"),O=h(o,b,"mergeProps");return f(w,(0,e.default)({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:P,initMapDispatchToProps:C,initMergeProps:O,pure:c,areStatesEqual:p,areOwnPropsEqual:m,areStatePropsEqual:x,areMergedPropsEqual:S},E))}}Object.defineProperty(t,"__esModule",{value:!0}),t.createConnect=f,t.default=void 0,e=u(e),i=u(i),o=u(o),r=u(r),a=u(a),s=u(s),l=u(l),c=u(c);var p=f();t.default=p})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,i){if(n(t,i))return!0;if("object"!=typeof t||null===t||"object"!=typeof i||null===i)return!1;var o=Object.keys(t),r=Object.keys(i);if(o.length!==r.length)return!1;for(var a=0;a<o.length;a++)if(!e.call(i,o[a])||!n(t[o[a]],i[o[a]]))return!1;return!0};var e=Object.prototype.hasOwnProperty;function n(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(43),n(44)],void 0===(r="function"==typeof(i=function(t,e,n){"use strict";function i(t){return"function"==typeof t?(0,n.wrapMapToPropsFunc)(t,"mapDispatchToProps"):void 0}function o(t){return t?void 0:(0,n.wrapMapToPropsConstant)(function(t){return{dispatch:t}})}function r(t){return t&&"object"==typeof t?(0,n.wrapMapToPropsConstant)(function(n){return(0,e.bindActionCreators)(t,n)}):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.whenMapDispatchToPropsIsFunction=i,t.whenMapDispatchToPropsIsMissing=o,t.whenMapDispatchToPropsIsObject=r,t.default=void 0;var a=[i,o,r];t.default=a})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){(function(t,i){var o,r,a,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,s=function(e,o){"use strict";var r,a=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o=a(o),r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:i;var s=(0,o.default)(r);e.default=s},r=[e,n(79)],void 0===(a="function"==typeof(o=s)?o.apply(e,r):o)||(i.exports=a)}).call(this,n(19),n(78)(t))},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){if("object"!=typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(44)],void 0===(r="function"==typeof(i=function(t,e){"use strict";function n(t){return"function"==typeof t?(0,e.wrapMapToPropsFunc)(t,"mapStateToProps"):void 0}function i(t){return t?void 0:(0,e.wrapMapToPropsConstant)(function(){return{}})}Object.defineProperty(t,"__esModule",{value:!0}),t.whenMapStateToPropsIsFunction=n,t.whenMapStateToPropsIsMissing=i,t.default=void 0;var o=[n,i];t.default=o})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(27),n(45)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0);function r(t,n,i){return(0,e.default)({},i,t,n)}function a(t){return function(e,n){n.displayName;var i,o=n.pure,r=n.areMergedPropsEqual,a=!1;return function(e,n,s){var l=t(e,n,s);return a?o&&r(l,i)||(i=l):(a=!0,i=l),i}}}function s(t){return"function"==typeof t?a(t):void 0}function l(t){return t?void 0:function(){return r}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultMergeProps=r,t.wrapMergePropsFunc=a,t.whenMergePropsIsFunction=s,t.whenMergePropsIsOmitted=l,t.default=void 0,e=o(e),i=o(i);var c=[s,l];t.default=c})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(28),n(84)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0);function r(t,e,n,i){return function(o,r){return n(t(o,r),e(i,r),r)}}function a(t,e,n,i,o){var r,a,s,l,c,u=o.areStatesEqual,h=o.areOwnPropsEqual,d=o.areStatePropsEqual,f=!1;function p(o,f){var p,y,g=!h(f,a),v=!u(o,r);return r=o,a=f,g&&v?(s=t(r,a),e.dependsOnOwnProps&&(l=e(i,a)),c=n(s,l,a)):g?(t.dependsOnOwnProps&&(s=t(r,a)),e.dependsOnOwnProps&&(l=e(i,a)),c=n(s,l,a)):v?(p=t(r,a),y=!d(p,s),s=p,y&&(c=n(s,l,a)),c):c}return function(o,u){return f?p(o,u):(s=t(r=o,a=u),l=e(i,a),c=n(s,l,a),f=!0,c)}}Object.defineProperty(t,"__esModule",{value:!0}),t.impureFinalPropsSelectorFactory=r,t.pureFinalPropsSelectorFactory=a,t.default=function(t,n){var i=n.initMapStateToProps,o=n.initMapDispatchToProps,s=n.initMergeProps,l=(0,e.default)(n,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),c=i(t,l),u=o(t,l),h=s(t,l);return(l.pure?a:r)(c,u,h,t,l)},e=o(e),i=o(i)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(26)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);function o(t,n,i){if(!t)throw new Error("Unexpected value for "+n+" in "+i+".");"mapStateToProps"!==n&&"mapDispatchToProps"!==n||t.hasOwnProperty("dependsOnOwnProps")||(0,e.default)("The selector for "+n+" of "+i+" did not specify a value for dependsOnOwnProps.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,e,n,i){o(t,"mapStateToProps",i),o(e,"mapDispatchToProps",i),o(n,"mergeProps",i)},e=i(e)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";const t=new Proxy({},{get:(t,e,n)=>(function(t){const e=localStorage.getItem(t);try{return JSON.parse(e)}catch(t){return e}})(e),set:(t,e,n,i)=>(function(t,e){null===e?localStorage.removeItem(t):localStorage.setItem(t,"string"==typeof e?e:JSON.stringify(e))}(e,n),!0)});window.zmLocalStorage=t})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";const t=new Proxy({},{get:(t,e,n)=>(function(t){const e=sessionStorage.getItem(t);try{return JSON.parse(e)}catch(t){return e}})(e),set:(t,e,n,i)=>(function(t,e){null===e?sessionStorage.removeItem(t):sessionStorage.setItem(t,"string"==typeof e?e:JSON.stringify(e))}(e,n),!0)});window.zmSessionStorage=t})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(89),n(14),n(20)],void 0===(r="function"==typeof(i=function(t,e,i,o,r){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=a(e),i=a(i),o=a(o),r=a(r);var s=class{constructor(t,n){(0,e.default)(this,"controllers",i.default),(0,e.default)(this,"acceptSignMap",{}),(0,e.default)(this,"sendSignMap",{}),(0,e.default)(this,"sendEventHandle",null),(0,e.default)(this,"handleEventMsg",t=>{const{name:e}=t,n=this.acceptSignMap[e];n&&n.forEach(e=>{e.handleEventMsg(t)})}),o.default.dispatch((0,r.default)("userInfo",n)),this.sendEventHandle=t,Object.keys(i.default).forEach(e=>{const n=i.default[e];n.setHandleSendEvent(t);const{acceptAction:o,sentAction:r}=n;o&&Object.keys(o).forEach(t=>{this.acceptSignMap[t]=[...this.acceptSignMap[t]||[],n]}),r&&Object.keys(r).forEach(t=>{this.sendSignMap[t]=n})})}async send(t){if(this.sendSignMap[t]){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return await this.sendSignMap[t].send(t,...n)}return!1}handleWebSocket(t){Object.values(i.default).forEach(e=>{e.mountEvent(t)})}};t.default=s})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(90),n(97),n(98),n(99)],void 0===(r="function"==typeof(i=function(t,e,i,o,r){"use strict";var a=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=a(e),i=a(i),o=a(o),r=a(r);var s={[e.WHITEBOARD_CONTROLLER]:e.default,[i.PALETTE_CONTROLLER]:i.default,[o.OTHER_CONTROLLER]:o.default,[r.ZMG_CONTROLLER]:r.default};t.default=s})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(14),n(20),n(23)],void 0===(r="function"==typeof(i=function(t,e,i,o){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.WHITEBOARD_CONTROLLER=void 0,e=r(e),i=r(i),o=r(o),t.WHITEBOARD_CONTROLLER="whiteBoardController";const a={whiteboard_data(t,e){let{data:n}=e;const i=n[3]||"";if(i&&"!switch-slide"===i){const e=n[4][0];t.emit("setPage",e)}if(i&&"!load-slides"===i){const e=n[4][0];t.emit("changeCouerseId",e)}if(n[2]>-1&&t.emit("drawTool",{action:"pushDataToLayer",payload:[n]}),i&&"zmlMessage"===i){const[e,i]=n[4];t.emit("zmlMessage",{action:e,data:i})}return n},closeZMLExam:()=>!0},s={getCoursewareList(){},current_whiteboard_data:(t,e)=>e,whiteboard_data(){},draw_tools_data(){},whiteboard_page(t){e.default.dispatch((0,i.default)("isZmlExaming",!1));try{const t=[];let e={};for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o[0].forEach(n=>{if(n.data[2]>-1)t.push(n.data);else{const[t,i]=n.data[4];"zmlMessage"===n.data[3]&&(e[t]||(e[t]=[]),"questionOperation"===t||"animationMessage"===t?e[t].push(i):e[t]=[i])}}),{drawToolDatas:t,zmlMessageDatas:e}}catch(t){console.log(t)}},zmlIsDoAnswer:(t,e)=>e};var l=new o.default("whiteBoardController",a,s);t.default=l})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function r(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?o(Object(i),!0).forEach(function(n){(0,e.default)(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){let{dispatch:e}=t;return t=>n=>{let{promise:i,callback:o}=n.payload||{};i?i.then(t=>{o&&o(t.data),e(r(r({},n),{},{payload:t.data}))},t=>{o&&o(t),e(r(r({},n),{},{payload:t}))}):t(n)}},e=i(e)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(93),n(94),n(95)],void 0===(r="function"==typeof(i=function(t,e,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){"default"!==n&&"__esModule"!==n&&(n in t&&t[n]===e[n]||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}}))}),Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}),Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))})})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(29)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.systemForbidChat=t.selfForbidChat=t.forbidChatMap=t.allForbidChat=void 0;const o=(0,(e=i(e)).default)("allForbidChat",!1);t.allForbidChat=o;const r=(0,e.default)("forbidChatMap",{});t.forbidChatMap=r;const a=(0,e.default)("selfForbidChat",!1);t.selfForbidChat=a;const s=(0,e.default)("systemForbidChat",!1);t.systemForbidChat=s})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(29)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.zmlCoverEleList=t.isZmlExaming=t.userInfo=t.studentsMap=t.lessonProgress=void 0;const o=(0,(e=i(e)).default)("lessonProgress","");t.lessonProgress=o;const r=(0,e.default)("studentsMap",null);t.studentsMap=r;const a=(0,e.default)("userInfo",{});t.userInfo=a;const s=(0,e.default)("isZmlExaming",!1);t.isZmlExaming=s;const l=(0,e.default)("zmlCoverEleList",[]);t.zmlCoverEleList=l})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(29)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.hasAnswerStudentNum=void 0;const o=(0,(e=i(e)).default)("hasAnswerStudentNum",0);t.hasAnswerStudentNum=o})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(t,e,i,r,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new o(i,r||t,a),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,i,o=[];if(0===this._eventsCount)return o;for(i in t=this._events)e.call(t,i)&&o.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},s.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,a=new Array(r);o<r;o++)a[o]=i[o].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},s.prototype.emit=function(t,e,i,o,r,a){var s=n?n+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,o),!0;case 5:return u.fn.call(u.context,e,i,o,r),!0;case 6:return u.fn.call(u.context,e,i,o,r,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,i);break;case 4:u[c].fn.call(u[c].context,e,i,o);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(t,e,n){return r(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return r(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,i,o){var r=n?n+t:t;if(!this._events[r])return this;if(!e)return a(this,r),this;var s=this._events[r];if(s.fn)s.fn!==e||o&&!s.once||i&&s.context!==i||a(this,r);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||o&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[r]=1===c.length?c[0]:c:a(this,r)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(23)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function a(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r(Object(i),!0).forEach(function(n){(0,e.default)(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PALETTE_CONTROLLER=void 0,e=o(e),i=o(i),t.PALETTE_CONTROLLER="paletteController";const s=a(a(a({point:t=>({kind:{action:t.type,cursorIcon:null},style:{},mark:!1}),select_shape:t=>({kind:{action:t.type,cursorIcon:"select_shapecursor"},style:{},mark:!1}),brush:t=>({kind:{action:t.type,cursorIcon:"pencursor-".concat(t.color.replace("#",""))},style:{strokeWidth:t.strokeWidth,stroke:t.color},mark:!1}),eraser:t=>({kind:{action:t.type,cursorIcon:"erasercursor"},style:{strokeWidth:t.radius},mark:!1}),polygon_edit:t=>({kind:{action:t.type,cursorIcon:"polygon_editcursor"},style:{strokeWidth:t.strokeWidth,stroke:t.color},mark:t.mark})},(()=>{const t={};return["ellipse","rectangle","triangle","circle_edit","ellipse_edit"].forEach(e=>{t[e]=t=>({kind:{action:t.type,cursorIcon:"shapecursor"},style:{strokeWidth:t.strokeWidth,stroke:t.color,fill:t.color,isFill:t.fill},mark:t.mark})}),t})()),(()=>{const t={};return["line","linearrow","linedash","line_edit","linearrow_edit","linedash_edit"].forEach(e=>{t[e]=t=>({kind:{action:t.type,cursorIcon:"line_editcursor"},style:{strokeWidth:t.strokeWidth,stroke:t.color},mark:t.mark})}),t})()),{},{coord_sys:t=>({kind:{action:t.type,cursorIcon:"coord_syscursor"},style:{strokeWidth:t.strokeWidth,stroke:t.color},mark:!1}),text_edit:t=>({kind:{action:t.type,cursorIcon:"text_editcursor"},style:{fontSize:t.strokeWidth,stroke:t.color},mark:t.isMark})},(()=>{const t={};return["eraserrectangle","deleteSelectData","deletePageData"].forEach(e=>{t[e]=t=>({kind:{action:t.type,cursorIcon:null},style:{}})}),t})()),l={PALETTE_EVENT(t,e){const n=s[e.type](e);return n},COURSE_EVENT:(t,e)=>e};var c=new i.default("paletteController",l,{});t.default=c})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(23),n(14),n(20)],void 0===(r="function"==typeof(i=function(t,e,i,o,r){"use strict";var a=n(0);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function l(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?s(Object(i),!0).forEach(function(n){(0,e.default)(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OTHER_CONTROLLER=void 0,e=a(e),i=a(i),o=a(o),r=a(r),t.OTHER_CONTROLLER="otherController";const c={theme(t,e){let{theme:n="black "}=e;const i=zmSessionStorage["app-theme"];document.body.classList.remove(i),document.body.classList.add("".concat(n,"-theme")),zmSessionStorage["app-theme"]="".concat(n,"-theme")},aiReplayVideo:(t,e)=>e,user_connect(t,e){if(e&&"STUDENT"===e.role){const{studentsMap:t}=o.default.getState();return o.default.dispatch((0,r.default)("studentsMap",l(l({},t),{},{[e.userId]:e}))),l(l({},e),{},{id:e.userId})}return!1},user_disconnect(t,e){if(e&&"STUDENT"===e.role){const{studentsMap:t}=o.default.getState();try{delete t[e.userId]}catch(t){console.log(t)}return o.default.dispatch((0,r.default)("studentsMap",l({},t))),l(l({},e),{},{id:e.userId})}return!1}},u={current_user_connect(t,e){if(e){const{teacher:t,tutors:n,students:i}=e;return o.default.dispatch((0,r.default)("studentsMap",i)),e}},zmlLoadfail:(t,e)=>e,zmlCoursePageTotal:(t,e)=>e,zmlLoadSuccess:(t,e)=>e,zmgLoadSuccess:()=>res,getVideoDisable:(t,e)=>e,playerTrackEvent:(t,e)=>e,QtAction:(t,e)=>e};var h=new i.default("otherController",c,u);t.default=h})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(23),n(14),n(20)],void 0===(r="function"==typeof(i=function(t,e,i,o){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ZMG_CONTROLLER=void 0,e=r(e),i=r(i),o=r(o),t.ZMG_CONTROLLER="zmgController";const a={zmg_data(t,e){let{data:n}=e;return t.emit("zmgMessage",n),"controllerChange"===n.action&&i.default.dispatch((0,o.default)("isZmlExaming",-1==+n.data)),n},respondHistory(t,e){if(e&&e.data){const{packets:t}=e.data;let n=!1;t.forEach(t=>{"controllerChange"===t.action&&(n=-1==+t.data)}),i.default.dispatch((0,o.default)("isZmlExaming",n))}return e},zmgLocalhost:(t,e)=>e},s={zmg_data(){},zmgGetHistory(){},get_zmgLocalhost:(t,e)=>e};var l=new e.default("zmgController",a,s);t.default=l})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){
/** @license React v16.8.6
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
"use strict";var e=n(6),i=n(38),o=n(101);function r(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=0;i<e;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);!function(t,e,n,i,o,r,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,o,r,a,s],c=0;(t=Error(e.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}e||r("227");var a=!1,s=null,l=!1,c=null,u={onError:function(t){a=!0,s=t}};function h(t,e,n,i,o,r,l,c,h){a=!1,s=null,function(t,e,n,i,o,r,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(t){this.onError(t)}}.apply(u,arguments)}var d=null,f={};function p(){if(d)for(var t in f){var e=f[t],n=d.indexOf(t);if(-1<n||r("96",t),!g[n])for(var i in e.extractEvents||r("97",t),g[n]=e,n=e.eventTypes){var o=void 0,a=n[i],s=e,l=i;v.hasOwnProperty(l)&&r("99",l),v[l]=a;var c=a.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&y(c[o],s,l);o=!0}else a.registrationName?(y(a.registrationName,s,l),o=!0):o=!1;o||r("98",i,t)}}}function y(t,e,n){m[t]&&r("100",t),m[t]=e,b[t]=e.eventTypes[n].dependencies}var g=[],v={},m={},b={},_=null,w=null,x=null;function T(t,e,n){var i=t.type||"unknown-event";t.currentTarget=x(n),function(t,e,n,i,o,u,d,f,p){if(h.apply(this,arguments),a){if(a){var y=s;a=!1,s=null}else r("198"),y=void 0;l||(l=!0,c=y)}}(i,e,void 0,t),t.currentTarget=null}function S(t,e){return null==e&&r("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function E(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var P=null;function C(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var i=0;i<e.length&&!t.isPropagationStopped();i++)T(t,e[i],n[i]);else e&&T(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}var O={injectEventPluginOrder:function(t){d&&r("101"),d=Array.prototype.slice.call(t),p()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];f.hasOwnProperty(e)&&f[e]===i||(f[e]&&r("102",e),f[e]=i,n=!0)}n&&p()}};function D(t,e){var n=t.stateNode;if(!n)return null;var i=_(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(t=t.type,i=!("button"===t||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}return t?null:(n&&"function"!=typeof n&&r("231",e,typeof n),n)}function A(t){if(null!==t&&(P=S(P,t)),t=P,P=null,t&&(E(t,C),P&&r("95"),l))throw t=c,l=!1,c=null,t}var k=Math.random().toString(36).slice(2),I="__reactInternalInstance$"+k,L="__reactEventHandlers$"+k;function M(t){if(t[I])return t[I];for(;!t[I];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[I]).tag||6===t.tag?t:null}function R(t){return!(t=t[I])||5!==t.tag&&6!==t.tag?null:t}function N(t){if(5===t.tag||6===t.tag)return t.stateNode;r("33")}function F(t){return t[L]||null}function j(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function U(t,e,n){(e=D(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=S(n._dispatchListeners,e),n._dispatchInstances=S(n._dispatchInstances,t))}function z(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=j(e);for(e=n.length;0<e--;)U(n[e],"captured",t);for(e=0;e<n.length;e++)U(n[e],"bubbled",t)}}function W(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=D(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=S(n._dispatchListeners,e),n._dispatchInstances=S(n._dispatchInstances,t))}function G(t){t&&t.dispatchConfig.registrationName&&W(t._targetInst,null,t)}function B(t){E(t,z)}var H=!("undefined"==typeof window||!window.document||!window.document.createElement);function V(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Y={animationend:V("Animation","AnimationEnd"),animationiteration:V("Animation","AnimationIteration"),animationstart:V("Animation","AnimationStart"),transitionend:V("Transition","TransitionEnd")},K={},X={};function q(t){if(K[t])return K[t];if(!Y[t])return t;var e,n=Y[t];for(e in n)if(n.hasOwnProperty(e)&&e in X)return K[t]=n[e];return t}H&&(X=document.createElement("div").style,"AnimationEvent"in window||(delete Y.animationend.animation,delete Y.animationiteration.animation,delete Y.animationstart.animation),"TransitionEvent"in window||delete Y.transitionend.transition);var $=q("animationend"),Q=q("animationiteration"),J=q("animationstart"),Z=q("transitionend"),tt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),et=null,nt=null,it=null;function ot(){if(it)return it;var t,e,n=nt,i=n.length,o="value"in et?et.value:et.textContent,r=o.length;for(t=0;t<i&&n[t]===o[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===o[r-e];e++);return it=o.slice(t,1<e?1-e:void 0)}function rt(){return!0}function at(){return!1}function st(t,e,n,i){for(var o in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(o)&&((e=t[o])?this[o]=e(n):"target"===o?this.target=i:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?rt:at,this.isPropagationStopped=at,this}function lt(t,e,n,i){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,t,e,n,i),o}return new this(t,e,n,i)}function ct(t){t instanceof this||r("279"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function ut(t){t.eventPool=[],t.getPooled=lt,t.release=ct}i(st.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=rt)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=rt)},persist:function(){this.isPersistent=rt},isPersistent:at,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=at,this._dispatchInstances=this._dispatchListeners=null}}),st.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},st.extend=function(t){function e(){}function n(){return o.apply(this,arguments)}var o=this;e.prototype=o.prototype;var r=new e;return i(r,n.prototype),n.prototype=r,n.prototype.constructor=n,n.Interface=i({},o.Interface,t),n.extend=o.extend,ut(n),n},ut(st);var ht=st.extend({data:null}),dt=st.extend({data:null}),ft=[9,13,27,32],pt=H&&"CompositionEvent"in window,yt=null;H&&"documentMode"in document&&(yt=document.documentMode);var gt=H&&"TextEvent"in window&&!yt,vt=H&&(!pt||yt&&8<yt&&11>=yt),mt=String.fromCharCode(32),bt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},_t=!1;function wt(t,e){switch(t){case"keyup":return-1!==ft.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function xt(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Tt=!1,St={eventTypes:bt,extractEvents:function(t,e,n,i){var o=void 0,r=void 0;if(pt)t:{switch(t){case"compositionstart":o=bt.compositionStart;break t;case"compositionend":o=bt.compositionEnd;break t;case"compositionupdate":o=bt.compositionUpdate;break t}o=void 0}else Tt?wt(t,n)&&(o=bt.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=bt.compositionStart);return o?(vt&&"ko"!==n.locale&&(Tt||o!==bt.compositionStart?o===bt.compositionEnd&&Tt&&(r=ot()):(nt="value"in(et=i)?et.value:et.textContent,Tt=!0)),o=ht.getPooled(o,e,n,i),r?o.data=r:null!==(r=xt(n))&&(o.data=r),B(o),r=o):r=null,(t=gt?function(t,e){switch(t){case"compositionend":return xt(e);case"keypress":return 32!==e.which?null:(_t=!0,mt);case"textInput":return(t=e.data)===mt&&_t?null:t;default:return null}}(t,n):function(t,e){if(Tt)return"compositionend"===t||!pt&&wt(t,e)?(t=ot(),it=nt=et=null,Tt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vt&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=dt.getPooled(bt.beforeInput,e,n,i)).data=t,B(e)):e=null,null===r?e:null===e?r:[r,e]}},Et=null,Pt=null,Ct=null;function Ot(t){if(t=w(t)){"function"!=typeof Et&&r("280");var e=_(t.stateNode);Et(t.stateNode,t.type,e)}}function Dt(t){Pt?Ct?Ct.push(t):Ct=[t]:Pt=t}function At(){if(Pt){var t=Pt,e=Ct;if(Ct=Pt=null,Ot(t),e)for(t=0;t<e.length;t++)Ot(e[t])}}function kt(t,e){return t(e)}function It(t,e,n){return t(e,n)}function Lt(){}var Mt=!1;function Rt(t,e){if(Mt)return t(e);Mt=!0;try{return kt(t,e)}finally{Mt=!1,(null!==Pt||null!==Ct)&&(Lt(),At())}}var Nt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ft(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Nt[t.type]:"textarea"===e}function jt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Ut(t){if(!H)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}function zt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Wt(t){t._valueTracker||(t._valueTracker=function(t){var e=zt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(t){i=""+t,r.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Gt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=zt(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}var Bt=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Bt.hasOwnProperty("ReactCurrentDispatcher")||(Bt.ReactCurrentDispatcher={current:null});var Ht=/^(.*)[\\\/]/,Vt="function"==typeof Symbol&&Symbol.for,Yt=Vt?Symbol.for("react.element"):60103,Kt=Vt?Symbol.for("react.portal"):60106,Xt=Vt?Symbol.for("react.fragment"):60107,qt=Vt?Symbol.for("react.strict_mode"):60108,$t=Vt?Symbol.for("react.profiler"):60114,Qt=Vt?Symbol.for("react.provider"):60109,Jt=Vt?Symbol.for("react.context"):60110,Zt=Vt?Symbol.for("react.concurrent_mode"):60111,te=Vt?Symbol.for("react.forward_ref"):60112,ee=Vt?Symbol.for("react.suspense"):60113,ne=Vt?Symbol.for("react.memo"):60115,ie=Vt?Symbol.for("react.lazy"):60116,oe="function"==typeof Symbol&&Symbol.iterator;function re(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=oe&&t[oe]||t["@@iterator"])?t:null}function ae(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case Zt:return"ConcurrentMode";case Xt:return"Fragment";case Kt:return"Portal";case $t:return"Profiler";case qt:return"StrictMode";case ee:return"Suspense"}if("object"==typeof t)switch(t.$$typeof){case Jt:return"Context.Consumer";case Qt:return"Context.Provider";case te:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ne:return ae(t.type);case ie:if(t=1===t._status?t._result:null)return ae(t)}return null}function se(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var i=t._debugOwner,o=t._debugSource,r=ae(t.type);n=null,i&&(n=ae(i.type)),i=r,r="",o?r=" (at "+o.fileName.replace(Ht,"")+":"+o.lineNumber+")":n&&(r=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+r}e+=n,t=t.return}while(t);return e}var le=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ce=Object.prototype.hasOwnProperty,ue={},he={};function de(t,e,n,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fe[t]=new de(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fe[e]=new de(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){fe[t]=new de(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fe[t]=new de(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fe[t]=new de(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){fe[t]=new de(t,3,!0,t,null)}),["capture","download"].forEach(function(t){fe[t]=new de(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){fe[t]=new de(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){fe[t]=new de(t,5,!1,t.toLowerCase(),null)});var pe=/[\-:]([a-z])/g;function ye(t){return t[1].toUpperCase()}function ge(t,e,n,i){var o=fe.hasOwnProperty(e)?fe[e]:null,r=null!==o?0===o.type:!i&&2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]);r||(function(t,e,n,i){if(null==e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,o,i)&&(n=null),i||null===o?function(t){return!!ce.call(he,t)||!ce.call(ue,t)&&(le.test(t)?he[t]=!0:(ue[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=null===n?3!==o.type&&"":n:(e=o.attributeName,i=o.attributeNamespace,null===n?t.removeAttribute(e):(o=o.type,n=3===o||4===o&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}function ve(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function me(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function be(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=ve(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function _e(t,e){null!=(e=e.checked)&&ge(t,"checked",e,!1)}function we(t,e){_e(t,e);var n=ve(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?Te(t,e.type,n):e.hasOwnProperty("defaultValue")&&Te(t,e.type,ve(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function xe(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Te(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pe,ye);fe[e]=new de(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pe,ye);fe[e]=new de(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pe,ye);fe[e]=new de(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(t){fe[t]=new de(t,1,!1,t.toLowerCase(),null)});var Se={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ee(t,e,n){return(t=st.getPooled(Se.change,t,e,n)).type="change",Dt(n),B(t),t}var Pe=null,Ce=null;function Oe(t){A(t)}function De(t){var e=N(t);if(Gt(e))return t}function Ae(t,e){if("change"===t)return e}var ke=!1;function Ie(){Pe&&(Pe.detachEvent("onpropertychange",Le),Ce=Pe=null)}function Le(t){"value"===t.propertyName&&De(Ce)&&Rt(Oe,t=Ee(Ce,t,jt(t)))}function Me(t,e,n){"focus"===t?(Ie(),Ce=n,(Pe=e).attachEvent("onpropertychange",Le)):"blur"===t&&Ie()}function Re(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return De(Ce)}function Ne(t,e){if("click"===t)return De(e)}function Fe(t,e){if("input"===t||"change"===t)return De(e)}H&&(ke=Ut("input")&&(!document.documentMode||9<document.documentMode));var je={eventTypes:Se,_isInputEventSupported:ke,extractEvents:function(t,e,n,i){var o=e?N(e):window,r=void 0,a=void 0,s=o.nodeName&&o.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===o.type?r=Ae:Ft(o)?ke?r=Fe:(r=Re,a=Me):(s=o.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(r=Ne),r&&(r=r(t,e)))return Ee(r,n,i);a&&a(t,o,e),"blur"===t&&(t=o._wrapperState)&&t.controlled&&"number"===o.type&&Te(o,"number",o.value)}},Ue=st.extend({view:null,detail:null}),ze={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function We(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=ze[t])&&!!e[t]}function Ge(){return We}var Be=0,He=0,Ve=!1,Ye=!1,Ke=Ue.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ge,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Be;return Be=t.screenX,Ve?"mousemove"===t.type?t.screenX-e:0:(Ve=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=He;return He=t.screenY,Ye?"mousemove"===t.type?t.screenY-e:0:(Ye=!0,0)}}),Xe=Ke.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),qe={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},$e={eventTypes:qe,extractEvents:function(t,e,n,i){var o="mouseover"===t||"pointerover"===t,r="mouseout"===t||"pointerout"===t;if(o&&(n.relatedTarget||n.fromElement)||!r&&!o)return null;if(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,r?(r=e,e=(e=n.relatedTarget||n.toElement)?M(e):null):r=null,r===e)return null;var a=void 0,s=void 0,l=void 0,c=void 0;"mouseout"===t||"mouseover"===t?(a=Ke,s=qe.mouseLeave,l=qe.mouseEnter,c="mouse"):"pointerout"!==t&&"pointerover"!==t||(a=Xe,s=qe.pointerLeave,l=qe.pointerEnter,c="pointer");var u=null==r?o:N(r);if(o=null==e?o:N(e),(t=a.getPooled(s,r,n,i)).type=c+"leave",t.target=u,t.relatedTarget=o,(n=a.getPooled(l,e,n,i)).type=c+"enter",n.target=o,n.relatedTarget=u,i=e,r&&i)t:{for(o=i,c=0,a=e=r;a;a=j(a))c++;for(a=0,l=o;l;l=j(l))a++;for(;0<c-a;)e=j(e),c--;for(;0<a-c;)o=j(o),a--;for(;c--;){if(e===o||e===o.alternate)break t;e=j(e),o=j(o)}e=null}else e=null;for(o=e,e=[];r&&r!==o&&(null===(c=r.alternate)||c!==o);)e.push(r),r=j(r);for(r=[];i&&i!==o&&(null===(c=i.alternate)||c!==o);)r.push(i),i=j(i);for(i=0;i<e.length;i++)W(e[i],"bubbled",t);for(i=r.length;0<i--;)W(r[i],"captured",n);return[t,n]}};function Qe(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e}var Je=Object.prototype.hasOwnProperty;function Ze(t,e){if(Qe(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!Je.call(e,n[i])||!Qe(t[n[i]],e[n[i]]))return!1;return!0}function tn(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function en(t){2!==tn(t)&&r("188")}function nn(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=tn(t))&&r("188"),1===e?null:t;for(var n=t,i=e;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return en(o),t;if(s===i)return en(o),e;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var l=o.child;l;){if(l===n){s=!0,n=o,i=a;break}if(l===i){s=!0,i=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=o;break}if(l===i){s=!0,i=a,n=o;break}l=l.sibling}s||r("189")}}n.alternate!==i&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var on=st.extend({animationName:null,elapsedTime:null,pseudoElement:null}),rn=st.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),an=Ue.extend({relatedTarget:null});function sn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},un=Ue.extend({key:function(t){if(t.key){var e=ln[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=sn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?cn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ge,charCode:function(t){return"keypress"===t.type?sn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?sn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),hn=Ke.extend({dataTransfer:null}),dn=Ue.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ge}),fn=st.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),pn=Ke.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),yn=[["abort","abort"],[$,"animationEnd"],[Q,"animationIteration"],[J,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[Z,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],gn={},vn={};function mn(t,e){var n=t[0],i="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[n],isInteractive:e},gn[t]=e,vn[n]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){mn(t,!0)}),yn.forEach(function(t){mn(t,!1)});var bn={eventTypes:gn,isInteractiveTopLevelEventType:function(t){return void 0!==(t=vn[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,i){var o=vn[t];if(!o)return null;switch(t){case"keypress":if(0===sn(n))return null;case"keydown":case"keyup":t=un;break;case"blur":case"focus":t=an;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ke;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=dn;break;case $:case Q:case J:t=on;break;case Z:t=fn;break;case"scroll":t=Ue;break;case"wheel":t=pn;break;case"copy":case"cut":case"paste":t=rn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Xe;break;default:t=st}return B(e=t.getPooled(o,e,n,i)),e}},_n=bn.isInteractiveTopLevelEventType,wn=[];function xn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var i;for(i=n;i.return;)i=i.return;if(!(i=3!==i.tag?null:i.stateNode.containerInfo))break;t.ancestors.push(n),n=M(i)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var o=jt(t.nativeEvent);i=t.topLevelType;for(var r=t.nativeEvent,a=null,s=0;s<g.length;s++){var l=g[s];l&&(l=l.extractEvents(i,e,r,o))&&(a=S(a,l))}A(a)}}var Tn=!0;function Sn(t,e){if(!e)return null;var n=(_n(t)?Pn:Cn).bind(null,t);e.addEventListener(t,n,!1)}function En(t,e){if(!e)return null;var n=(_n(t)?Pn:Cn).bind(null,t);e.addEventListener(t,n,!0)}function Pn(t,e){It(Cn,t,e)}function Cn(t,e){if(Tn){var n=jt(e);if(null===(n=M(n))||"number"!=typeof n.tag||2===tn(n)||(n=null),wn.length){var i=wn.pop();i.topLevelType=t,i.nativeEvent=e,i.targetInst=n,t=i}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Rt(xn,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>wn.length&&wn.push(t)}}}var On={},Dn=0,An="_reactListenersID"+(""+Math.random()).slice(2);function kn(t){return Object.prototype.hasOwnProperty.call(t,An)||(t[An]=Dn++,On[t[An]]={}),On[t[An]]}function In(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Ln(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mn(t,e){var n,i=Ln(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=Ln(i)}}function Rn(){for(var t=window,e=In();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;t=e.contentWindow,e=In(t.document)}return e}function Nn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function Fn(t){var e=Rn(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==i&&Nn(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var o=n.textContent.length,r=Math.min(i.start,o);i=void 0===i.end?r:Math.min(i.end,o),!t.extend&&r>i&&(o=i,i=r,r=o),o=Mn(n,r);var a=Mn(n,i);o&&a&&(1!==t.rangeCount||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(o.node,o.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jn=H&&"documentMode"in document&&11>=document.documentMode,Un={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zn=null,Wn=null,Gn=null,Bn=!1;function Hn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Bn||null==zn||zn!==In(n)?null:(n="selectionStart"in(n=zn)&&Nn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Gn&&Ze(Gn,n)?null:(Gn=n,(t=st.getPooled(Un.select,Wn,t,e)).type="select",t.target=zn,B(t),t))}var Vn={eventTypes:Un,extractEvents:function(t,e,n,i){var o,r=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(o=!r)){t:{r=kn(r),o=b.onSelect;for(var a=0;a<o.length;a++){var s=o[a];if(!r.hasOwnProperty(s)||!r[s]){r=!1;break t}}r=!0}o=!r}if(o)return null;switch(r=e?N(e):window,t){case"focus":(Ft(r)||"true"===r.contentEditable)&&(zn=r,Wn=e,Gn=null);break;case"blur":Gn=Wn=zn=null;break;case"mousedown":Bn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Bn=!1,Hn(n,i);case"selectionchange":if(jn)break;case"keydown":case"keyup":return Hn(n,i)}return null}};function Yn(t,n){return t=i({children:void 0},n),(n=function(t){var n="";return e.Children.forEach(t,function(t){null!=t&&(n+=t)}),n}(n.children))&&(t.children=n),t}function Kn(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ve(n),e=null,o=0;o<t.length;o++){if(t[o].value===n)return t[o].selected=!0,void(i&&(t[o].defaultSelected=!0));null!==e||t[o].disabled||(e=t[o])}null!==e&&(e.selected=!0)}}function Xn(t,e){return null!=e.dangerouslySetInnerHTML&&r("91"),i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qn(t,e){var n=e.value;null==n&&(n=e.defaultValue,null!=(e=e.children)&&(null!=n&&r("92"),Array.isArray(e)&&(1>=e.length||r("93"),e=e[0]),n=e),null==n&&(n="")),t._wrapperState={initialValue:ve(n)}}function $n(t,e){var n=ve(e.value),i=ve(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function Qn(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}O.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_=F,w=R,x=N,O.injectEventPluginsByName({SimpleEventPlugin:bn,EnterLeaveEventPlugin:$e,ChangeEventPlugin:je,SelectEventPlugin:Vn,BeforeInputEventPlugin:St});var Jn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Zn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ti(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Zn(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ei,ni=void 0,ii=(ei=function(t,e){if(t.namespaceURI!==Jn.svg||"innerHTML"in t)t.innerHTML=e;else{for((ni=ni||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=ni.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return ei(t,e)})}:ei);function oi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ri={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ai=["Webkit","ms","Moz","O"];function si(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function li(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),o=si(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}Object.keys(ri).forEach(function(t){ai.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});var ci=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ui(t,e){e&&(ci[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&r("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&r("60"),"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||r("61")),null!=e.style&&"object"!=typeof e.style&&r("62",""))}function hi(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function di(t,e){var n=kn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=b[e];for(var i=0;i<e.length;i++){var o=e[i];if(!n.hasOwnProperty(o)||!n[o]){switch(o){case"scroll":En("scroll",t);break;case"focus":case"blur":En("focus",t),En("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Ut(o)&&En(o,t);break;case"invalid":case"submit":case"reset":break;default:-1===tt.indexOf(o)&&Sn(o,t)}n[o]=!0}}}function fi(){}var pi=null,yi=null;function gi(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function vi(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var mi="function"==typeof setTimeout?setTimeout:void 0,bi="function"==typeof clearTimeout?clearTimeout:void 0,_i=o.unstable_scheduleCallback,wi=o.unstable_cancelCallback;function xi(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Ti(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var Si=[],Ei=-1;function Pi(t){0>Ei||(t.current=Si[Ei],Si[Ei]=null,Ei--)}function Ci(t,e){Si[++Ei]=t.current,t.current=e}var Oi={},Di={current:Oi},Ai={current:!1},ki=Oi;function Ii(t,e){var n=t.type.contextTypes;if(!n)return Oi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o,r={};for(o in n)r[o]=e[o];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Li(t){return null!=(t=t.childContextTypes)}function Mi(t){Pi(Ai),Pi(Di)}function Ri(t){Pi(Ai),Pi(Di)}function Ni(t,e,n){Di.current!==Oi&&r("168"),Ci(Di,e),Ci(Ai,n)}function Fi(t,e,n){var o=t.stateNode;if(t=e.childContextTypes,"function"!=typeof o.getChildContext)return n;for(var a in o=o.getChildContext())a in t||r("108",ae(e)||"Unknown",a);return i({},n,o)}function ji(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Oi,ki=Di.current,Ci(Di,e),Ci(Ai,Ai.current),!0}function Ui(t,e,n){var i=t.stateNode;i||r("169"),n?(e=Fi(t,e,ki),i.__reactInternalMemoizedMergedChildContext=e,Pi(Ai),Pi(Di),Ci(Di,e)):Pi(Ai),Ci(Ai,n)}var zi=null,Wi=null;function Gi(t){return function(e){try{return t(e)}catch(t){}}}function Bi(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Hi(t,e,n,i){return new Bi(t,e,n,i)}function Vi(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Yi(t,e){var n=t.alternate;return null===n?((n=Hi(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,n.contextDependencies=t.contextDependencies,n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ki(t,e,n,i,o,a){var s=2;if(i=t,"function"==typeof t)Vi(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case Xt:return Xi(n.children,o,a,e);case Zt:return qi(n,3|o,a,e);case qt:return qi(n,2|o,a,e);case $t:return(t=Hi(12,n,e,4|o)).elementType=$t,t.type=$t,t.expirationTime=a,t;case ee:return(t=Hi(13,n,e,o)).elementType=ee,t.type=ee,t.expirationTime=a,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case Qt:s=10;break t;case Jt:s=9;break t;case te:s=11;break t;case ne:s=14;break t;case ie:s=16,i=null;break t}r("130",null==t?t:typeof t,"")}return(e=Hi(s,n,e,o)).elementType=t,e.type=i,e.expirationTime=a,e}function Xi(t,e,n,i){return(t=Hi(7,t,i,e)).expirationTime=n,t}function qi(t,e,n,i){return t=Hi(8,t,i,e),e=0==(1&e)?qt:Zt,t.elementType=e,t.type=e,t.expirationTime=n,t}function $i(t,e,n){return(t=Hi(6,t,null,e)).expirationTime=n,t}function Qi(t,e,n){return(e=Hi(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ji(t,e){t.didError=!1;var n=t.earliestPendingTime;0===n?t.earliestPendingTime=t.latestPendingTime=e:n<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),eo(e,t)}function Zi(t,e){t.didError=!1,t.latestPingedTime>=e&&(t.latestPingedTime=0);var n=t.earliestPendingTime,i=t.latestPendingTime;n===e?t.earliestPendingTime=i===e?t.latestPendingTime=0:i:i===e&&(t.latestPendingTime=n),n=t.earliestSuspendedTime,i=t.latestSuspendedTime,0===n?t.earliestSuspendedTime=t.latestSuspendedTime=e:n<e?t.earliestSuspendedTime=e:i>e&&(t.latestSuspendedTime=e),eo(e,t)}function to(t,e){var n=t.earliestPendingTime;return t=t.earliestSuspendedTime,n>e&&(e=n),t>e&&(e=t),e}function eo(t,e){var n=e.earliestSuspendedTime,i=e.latestSuspendedTime,o=e.earliestPendingTime,r=e.latestPingedTime;0===(o=0!==o?o:r)&&(0===t||i<t)&&(o=i),0!==(t=o)&&n>t&&(t=n),e.nextExpirationTimeToWorkOn=o,e.expirationTime=t}function no(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var io=(new e.Component).refs;function oo(t,e,n,o){e=t.memoizedState,n=null==(n=n(o,e))?e:i({},e,n),t.memoizedState=n,null!==(o=t.updateQueue)&&0===t.expirationTime&&(o.baseState=n)}var ro={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===tn(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var i=ws(),o=qr(i=Xa(i,t));o.payload=e,null!=n&&(o.callback=n),Ga(),Qr(t,o),Qa(t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var i=ws(),o=qr(i=Xa(i,t));o.tag=Br,o.payload=e,null!=n&&(o.callback=n),Ga(),Qr(t,o),Qa(t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=ws(),i=qr(n=Xa(n,t));i.tag=Hr,null!=e&&(i.callback=e),Ga(),Qr(t,i),Qa(t,n)}};function ao(t,e,n,i,o,r,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,r,a):!(e.prototype&&e.prototype.isPureReactComponent&&Ze(n,i)&&Ze(o,r))}function so(t,e,n){var i=!1,o=Oi,r=e.contextType;return"object"==typeof r&&null!==r?r=Wr(r):(o=Li(e)?ki:Di.current,i=e.contextTypes,r=(i=null!=i)?Ii(t,o):Oi),e=new e(n,r),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ro,t.stateNode=e,e._reactInternalFiber=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=r),e}function lo(t,e,n,i){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ro.enqueueReplaceState(e,e.state,null)}function co(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=io;var r=e.contextType;"object"==typeof r&&null!==r?o.context=Wr(r):(r=Li(e)?ki:Di.current,o.context=Ii(t,r)),null!==(r=t.updateQueue)&&(ea(t,r,n,o,i),o.state=t.memoizedState),"function"==typeof(r=e.getDerivedStateFromProps)&&(oo(t,e,r,n),o.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(e=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),e!==o.state&&ro.enqueueReplaceState(o,o.state,null),null!==(r=t.updateQueue)&&(ea(t,r,n,o,i),o.state=t.memoizedState)),"function"==typeof o.componentDidMount&&(t.effectTag|=4)}var uo=Array.isArray;function ho(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){n=n._owner;var i=void 0;n&&(1!==n.tag&&r("309"),i=n.stateNode),i||r("147",t);var o=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===o?e.ref:((e=function(t){var e=i.refs;e===io&&(e=i.refs={}),null===t?delete e[o]:e[o]=t})._stringRef=o,e)}"string"!=typeof t&&r("284"),n._owner||r("290",t)}return t}function fo(t,e){"textarea"!==t.type&&r("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function po(t){function e(e,n){if(t){var i=e.lastEffect;null!==i?(i.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(t,e,n){return(t=Yi(t,e)).index=0,t.sibling=null,t}function a(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.effectTag=2,n):i:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=$i(n,t.mode,i)).return=t,e):((e=o(e,n)).return=t,e)}function c(t,e,n,i){return null!==e&&e.elementType===n.type?((i=o(e,n.props)).ref=ho(t,e,n),i.return=t,i):((i=Ki(n.type,n.key,n.props,null,t.mode,i)).ref=ho(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Qi(n,t.mode,i)).return=t,e):((e=o(e,n.children||[])).return=t,e)}function h(t,e,n,i,r){return null===e||7!==e.tag?((e=Xi(n,t.mode,i,r)).return=t,e):((e=o(e,n)).return=t,e)}function d(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=$i(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case Yt:return(n=Ki(e.type,e.key,e.props,null,t.mode,n)).ref=ho(t,null,e),n.return=t,n;case Kt:return(e=Qi(e,t.mode,n)).return=t,e}if(uo(e)||re(e))return(e=Xi(e,t.mode,n,null)).return=t,e;fo(t,e)}return null}function f(t,e,n,i){var o=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==o?null:l(t,e,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Yt:return n.key===o?n.type===Xt?h(t,e,n.props.children,i,o):c(t,e,n,i):null;case Kt:return n.key===o?u(t,e,n,i):null}if(uo(n)||re(n))return null!==o?null:h(t,e,n,i,null);fo(t,n)}return null}function p(t,e,n,i,o){if("string"==typeof i||"number"==typeof i)return t=t.get(n)||null,l(e,t,""+i,o);if("object"==typeof i&&null!==i){switch(i.$$typeof){case Yt:return t=t.get(null===i.key?n:i.key)||null,i.type===Xt?h(e,t,i.props.children,o,i.key):c(e,t,i,o);case Kt:return t=t.get(null===i.key?n:i.key)||null,u(e,t,i,o)}if(uo(i)||re(i))return t=t.get(n)||null,h(e,t,i,o,null);fo(e,i)}return null}function y(o,r,s,l){for(var c=null,u=null,h=r,y=r=0,g=null;null!==h&&y<s.length;y++){h.index>y?(g=h,h=null):g=h.sibling;var v=f(o,h,s[y],l);if(null===v){null===h&&(h=g);break}t&&h&&null===v.alternate&&e(o,h),r=a(v,r,y),null===u?c=v:u.sibling=v,u=v,h=g}if(y===s.length)return n(o,h),c;if(null===h){for(;y<s.length;y++)(h=d(o,s[y],l))&&(r=a(h,r,y),null===u?c=h:u.sibling=h,u=h);return c}for(h=i(o,h);y<s.length;y++)(g=p(h,o,y,s[y],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?y:g.key),r=a(g,r,y),null===u?c=g:u.sibling=g,u=g);return t&&h.forEach(function(t){return e(o,t)}),c}function g(o,s,l,c){var u=re(l);"function"!=typeof u&&r("150"),null==(l=u.call(l))&&r("151");for(var h=u=null,y=s,g=s=0,v=null,m=l.next();null!==y&&!m.done;g++,m=l.next()){y.index>g?(v=y,y=null):v=y.sibling;var b=f(o,y,m.value,c);if(null===b){y||(y=v);break}t&&y&&null===b.alternate&&e(o,y),s=a(b,s,g),null===h?u=b:h.sibling=b,h=b,y=v}if(m.done)return n(o,y),u;if(null===y){for(;!m.done;g++,m=l.next())null!==(m=d(o,m.value,c))&&(s=a(m,s,g),null===h?u=m:h.sibling=m,h=m);return u}for(y=i(o,y);!m.done;g++,m=l.next())null!==(m=p(y,o,g,m.value,c))&&(t&&null!==m.alternate&&y.delete(null===m.key?g:m.key),s=a(m,s,g),null===h?u=m:h.sibling=m,h=m);return t&&y.forEach(function(t){return e(o,t)}),u}return function(t,i,a,l){var c="object"==typeof a&&null!==a&&a.type===Xt&&null===a.key;c&&(a=a.props.children);var u="object"==typeof a&&null!==a;if(u)switch(a.$$typeof){case Yt:t:{for(u=a.key,c=i;null!==c;){if(c.key===u){if(7===c.tag?a.type===Xt:c.elementType===a.type){n(t,c.sibling),(i=o(c,a.type===Xt?a.props.children:a.props)).ref=ho(t,c,a),i.return=t,t=i;break t}n(t,c);break}e(t,c),c=c.sibling}a.type===Xt?((i=Xi(a.props.children,t.mode,l,a.key)).return=t,t=i):((l=Ki(a.type,a.key,a.props,null,t.mode,l)).ref=ho(t,i,a),l.return=t,t=l)}return s(t);case Kt:t:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(t,i.sibling),(i=o(i,a.children||[])).return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}(i=Qi(a,t.mode,l)).return=t,t=i}return s(t)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==i&&6===i.tag?(n(t,i.sibling),(i=o(i,a)).return=t,t=i):(n(t,i),(i=$i(a,t.mode,l)).return=t,t=i),s(t);if(uo(a))return y(t,i,a,l);if(re(a))return g(t,i,a,l);if(u&&fo(t,a),void 0===a&&!c)switch(t.tag){case 1:case 0:r("152",(l=t.type).displayName||l.name||"Component")}return n(t,i)}}var yo=po(!0),go=po(!1),vo={},mo={current:vo},bo={current:vo},_o={current:vo};function wo(t){return t===vo&&r("174"),t}function xo(t,e){Ci(_o,e),Ci(bo,t),Ci(mo,vo);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ti(null,"");break;default:n=8===n?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ti(e,n)}Pi(mo),Ci(mo,e)}function To(t){Pi(mo),Pi(bo),Pi(_o)}function So(t){wo(_o.current);var e=wo(mo.current),n=ti(e,t.type);e!==n&&(Ci(bo,t),Ci(mo,n))}function Eo(t){bo.current===t&&(Pi(mo),Pi(bo))}var Po=0,Co=2,Oo=4,Do=8,Ao=16,ko=32,Io=64,Lo=128,Mo=Bt.ReactCurrentDispatcher,Ro=0,No=null,Fo=null,jo=null,Uo=null,zo=null,Wo=null,Go=0,Bo=null,Ho=0,Vo=!1,Yo=null,Ko=0;function Xo(){r("321")}function qo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qe(t[n],e[n]))return!1;return!0}function $o(t,e,n,i,o,a){if(Ro=a,No=e,jo=null!==t?t.memoizedState:null,Mo.current=null===jo?cr:ur,e=n(i,o),Vo){do{Vo=!1,Ko+=1,jo=null!==t?t.memoizedState:null,Wo=Uo,Bo=zo=Fo=null,Mo.current=ur,e=n(i,o)}while(Vo);Yo=null,Ko=0}return Mo.current=lr,(t=No).memoizedState=Uo,t.expirationTime=Go,t.updateQueue=Bo,t.effectTag|=Ho,t=null!==Fo&&null!==Fo.next,Ro=0,Wo=zo=Uo=jo=Fo=No=null,Go=0,Bo=null,Ho=0,t&&r("300"),e}function Qo(){Mo.current=lr,Ro=0,Wo=zo=Uo=jo=Fo=No=null,Go=0,Bo=null,Ho=0,Vo=!1,Yo=null,Ko=0}function Jo(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===zo?Uo=zo=t:zo=zo.next=t,zo}function Zo(){if(null!==Wo)Wo=(zo=Wo).next,jo=null!==(Fo=jo)?Fo.next:null;else{null===jo&&r("310");var t={memoizedState:(Fo=jo).memoizedState,baseState:Fo.baseState,queue:Fo.queue,baseUpdate:Fo.baseUpdate,next:null};zo=null===zo?Uo=t:zo.next=t,jo=Fo.next}return zo}function tr(t,e){return"function"==typeof e?e(t):e}function er(t){var e=Zo(),n=e.queue;if(null===n&&r("311"),n.lastRenderedReducer=t,0<Ko){var i=n.dispatch;if(null!==Yo){var o=Yo.get(n);if(void 0!==o){Yo.delete(n);var a=e.memoizedState;do{a=t(a,o.action),o=o.next}while(null!==o);return Qe(a,e.memoizedState)||(wr=!0),e.memoizedState=a,e.baseUpdate===n.last&&(e.baseState=a),n.lastRenderedState=a,[a,i]}}return[e.memoizedState,i]}i=n.last;var s=e.baseUpdate;if(a=e.baseState,null!==s?(null!==i&&(i.next=null),i=s.next):i=null!==i?i.next:null,null!==i){var l=o=null,c=i,u=!1;do{var h=c.expirationTime;h<Ro?(u||(u=!0,l=s,o=a),h>Go&&(Go=h)):a=c.eagerReducer===t?c.eagerState:t(a,c.action),s=c,c=c.next}while(null!==c&&c!==i);u||(l=s,o=a),Qe(a,e.memoizedState)||(wr=!0),e.memoizedState=a,e.baseUpdate=l,e.baseState=o,n.lastRenderedState=a}return[e.memoizedState,n.dispatch]}function nr(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===Bo?(Bo={lastEffect:null}).lastEffect=t.next=t:null===(e=Bo.lastEffect)?Bo.lastEffect=t.next=t:(n=e.next,e.next=t,t.next=n,Bo.lastEffect=t),t}function ir(t,e,n,i){var o=Jo();Ho|=t,o.memoizedState=nr(e,n,void 0,void 0===i?null:i)}function or(t,e,n,i){var o=Zo();i=void 0===i?null:i;var r=void 0;if(null!==Fo){var a=Fo.memoizedState;if(r=a.destroy,null!==i&&qo(i,a.deps))return void nr(Po,n,r,i)}Ho|=t,o.memoizedState=nr(e,n,r,i)}function rr(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ar(){}function sr(t,e,n){25>Ko||r("301");var i=t.alternate;if(t===No||null!==i&&i===No)if(Vo=!0,t={expirationTime:Ro,action:n,eagerReducer:null,eagerState:null,next:null},null===Yo&&(Yo=new Map),void 0===(n=Yo.get(e)))Yo.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}else{Ga();var o=ws(),a={expirationTime:o=Xa(o,t),action:n,eagerReducer:null,eagerState:null,next:null},s=e.last;if(null===s)a.next=a;else{var l=s.next;null!==l&&(a.next=l),s.next=a}if(e.last=a,0===t.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=e.lastRenderedReducer))try{var c=e.lastRenderedState,u=i(c,n);if(a.eagerReducer=i,a.eagerState=u,Qe(u,c))return}catch(t){}Qa(t,o)}}var lr={readContext:Wr,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo},cr={readContext:Wr,useCallback:function(t,e){return Jo().memoizedState=[t,void 0===e?null:e],t},useContext:Wr,useEffect:function(t,e){return ir(516,Lo|Io,t,e)},useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,ir(4,Oo|ko,rr.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ir(4,Oo|ko,t,e)},useMemo:function(t,e){var n=Jo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Jo();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t=(t=i.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=sr.bind(null,No,t),[i.memoizedState,t]},useRef:function(t){var e=Jo();return t={current:t},e.memoizedState=t},useState:function(t){var e=Jo();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:tr,lastRenderedState:t}).dispatch=sr.bind(null,No,t),[e.memoizedState,t]},useDebugValue:ar},ur={readContext:Wr,useCallback:function(t,e){var n=Zo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&qo(e,i[1])?i[0]:(n.memoizedState=[t,e],t)},useContext:Wr,useEffect:function(t,e){return or(516,Lo|Io,t,e)},useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,or(4,Oo|ko,rr.bind(null,e,t),n)},useLayoutEffect:function(t,e){return or(4,Oo|ko,t,e)},useMemo:function(t,e){var n=Zo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&qo(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)},useReducer:er,useRef:function(){return Zo().memoizedState},useState:function(t){return er(tr)},useDebugValue:ar},hr=null,dr=null,fr=!1;function pr(t,e){var n=Hi(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function yr(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function gr(t){if(fr){var e=dr;if(e){var n=e;if(!yr(t,e)){if(!(e=xi(n))||!yr(t,e))return t.effectTag|=2,fr=!1,void(hr=t);pr(hr,n)}hr=t,dr=Ti(e)}else t.effectTag|=2,fr=!1,hr=t}}function vr(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&18!==t.tag;)t=t.return;hr=t}function mr(t){if(t!==hr)return!1;if(!fr)return vr(t),fr=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!vi(e,t.memoizedProps))for(e=dr;e;)pr(t,e),e=xi(e);return vr(t),dr=hr?xi(t.stateNode):null,!0}function br(){dr=hr=null,fr=!1}var _r=Bt.ReactCurrentOwner,wr=!1;function xr(t,e,n,i){e.child=null===t?go(e,null,n,i):yo(e,t.child,n,i)}function Tr(t,e,n,i,o){n=n.render;var r=e.ref;return zr(e,o),i=$o(t,e,n,i,r,o),null===t||wr?(e.effectTag|=1,xr(t,e,i,o),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=o&&(t.expirationTime=0),Ir(t,e,o))}function Sr(t,e,n,i,o,r){if(null===t){var a=n.type;return"function"!=typeof a||Vi(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ki(n.type,null,i,null,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Er(t,e,a,i,o,r))}return a=t.child,o<r&&(o=a.memoizedProps,(n=null!==(n=n.compare)?n:Ze)(o,i)&&t.ref===e.ref)?Ir(t,e,r):(e.effectTag|=1,(t=Yi(a,i)).ref=e.ref,t.return=e,e.child=t)}function Er(t,e,n,i,o,r){return null!==t&&Ze(t.memoizedProps,i)&&t.ref===e.ref&&(wr=!1,o<r)?Ir(t,e,r):Cr(t,e,n,i,r)}function Pr(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Cr(t,e,n,i,o){var r=Li(n)?ki:Di.current;return r=Ii(e,r),zr(e,o),n=$o(t,e,n,i,r,o),null===t||wr?(e.effectTag|=1,xr(t,e,n,o),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=o&&(t.expirationTime=0),Ir(t,e,o))}function Or(t,e,n,i,o){if(Li(n)){var r=!0;ji(e)}else r=!1;if(zr(e,o),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),so(e,n,i),co(e,n,i,o),i=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=Wr(c):(c=Li(n)?ki:Di.current,c=Ii(e,c));var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==i||l!==c)&&lo(e,a,i,c),Yr=!1;var d=e.memoizedState;l=a.state=d;var f=e.updateQueue;null!==f&&(ea(e,f,i,a,o),l=e.memoizedState),s!==i||d!==l||Ai.current||Yr?("function"==typeof u&&(oo(e,n,u,i),l=e.memoizedState),(s=Yr||ao(e,n,s,i,d,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),i=!1)}else a=e.stateNode,s=e.memoizedProps,a.props=e.type===e.elementType?s:no(e.type,s),l=a.context,"object"==typeof(c=n.contextType)&&null!==c?c=Wr(c):(c=Li(n)?ki:Di.current,c=Ii(e,c)),u=n.getDerivedStateFromProps,(h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==i||l!==c)&&lo(e,a,i,c),Yr=!1,l=e.memoizedState,d=a.state=l,null!==(f=e.updateQueue)&&(ea(e,f,i,a,o),d=e.memoizedState),s!==i||l!==d||Ai.current||Yr?("function"==typeof u&&(oo(e,n,u,i),d=e.memoizedState),(u=Yr||ao(e,n,s,i,l,d,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(i,d,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,d,c)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=i,e.memoizedState=d),a.props=i,a.state=d,a.context=c,i=u):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),i=!1);return Dr(t,e,n,i,r,o)}function Dr(t,e,n,i,o,r){Pr(t,e);var a=0!=(64&e.effectTag);if(!i&&!a)return o&&Ui(e,n,!1),Ir(t,e,r);i=e.stateNode,_r.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:i.render();return e.effectTag|=1,null!==t&&a?(e.child=yo(e,t.child,null,r),e.child=yo(e,null,s,r)):xr(t,e,s,r),e.memoizedState=i.state,o&&Ui(e,n,!0),e.child}function Ar(t){var e=t.stateNode;e.pendingContext?Ni(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ni(0,e.context,!1),xo(t,e.containerInfo)}function kr(t,e,n){var i=e.mode,o=e.pendingProps,r=e.memoizedState;if(0==(64&e.effectTag)){r=null;var a=!1}else r={timedOutAt:null!==r?r.timedOutAt:0},a=!0,e.effectTag&=-65;if(null===t)if(a){var s=o.fallback;t=Xi(null,i,0,null),0==(1&e.mode)&&(t.child=null!==e.memoizedState?e.child.child:e.child),i=Xi(s,i,n,null),t.sibling=i,(n=t).return=i.return=e}else n=i=go(e,null,o.children,n);else null!==t.memoizedState?(i=t.child,s=i.sibling,a?(n=o.fallback,o=Yi(i,i.pendingProps),0==(1&e.mode)&&(a=null!==e.memoizedState?e.child.child:e.child)!==i.child&&(o.child=a),i=o.sibling=Yi(s,n,s.expirationTime),n=o,o.childExpirationTime=0,n.return=i.return=e):n=i=yo(e,i.child,o.children,n)):(s=t.child,a?(a=o.fallback,(o=Xi(null,i,0,null)).child=s,0==(1&e.mode)&&(o.child=null!==e.memoizedState?e.child.child:e.child),(i=o.sibling=Xi(a,i,n,null)).effectTag|=2,n=o,o.childExpirationTime=0,n.return=i.return=e):i=n=yo(e,s,o.children,n)),e.stateNode=t.stateNode;return e.memoizedState=r,e.child=n,i}function Ir(t,e,n){if(null!==t&&(e.contextDependencies=t.contextDependencies),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child&&r("153"),null!==e.child){for(t=e.child,n=Yi(t,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Yi(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function Lr(t,e,n){var i=e.expirationTime;if(null!==t){if(t.memoizedProps!==e.pendingProps||Ai.current)wr=!0;else if(i<n){switch(wr=!1,e.tag){case 3:Ar(e),br();break;case 5:So(e);break;case 1:Li(e.type)&&ji(e);break;case 4:xo(e,e.stateNode.containerInfo);break;case 10:jr(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(i=e.child.childExpirationTime)&&i>=n?kr(t,e,n):null!==(e=Ir(t,e,n))?e.sibling:null}return Ir(t,e,n)}}else wr=!1;switch(e.expirationTime=0,e.tag){case 2:i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var o=Ii(e,Di.current);if(zr(e,n),o=$o(null,e,i,t,o,n),e.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(e.tag=1,Qo(),Li(i)){var a=!0;ji(e)}else a=!1;e.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var s=i.getDerivedStateFromProps;"function"==typeof s&&oo(e,i,s,t),o.updater=ro,e.stateNode=o,o._reactInternalFiber=e,co(e,i,t,n),e=Dr(null,e,i,!0,a,n)}else e.tag=0,xr(null,e,o,n),e=e.child;return e;case 16:switch(o=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),a=e.pendingProps,t=function(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:switch(t._status=0,(e=(e=t._ctor)()).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)}),t._status){case 1:return t._result;case 2:throw t._result}throw t._result=e,e}}(o),e.type=t,o=e.tag=function(t){if("function"==typeof t)return Vi(t)?1:0;if(null!=t){if((t=t.$$typeof)===te)return 11;if(t===ne)return 14}return 2}(t),a=no(t,a),s=void 0,o){case 0:s=Cr(null,e,t,a,n);break;case 1:s=Or(null,e,t,a,n);break;case 11:s=Tr(null,e,t,a,n);break;case 14:s=Sr(null,e,t,no(t.type,a),i,n);break;default:r("306",t,"")}return s;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:no(i,o),Cr(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:no(i,o),Or(t,e,i,o,n);case 3:return Ar(e),null===(i=e.updateQueue)&&r("282"),o=null!==(o=e.memoizedState)?o.element:null,ea(e,i,e.pendingProps,null,n),(i=e.memoizedState.element)===o?(br(),e=Ir(t,e,n)):(o=e.stateNode,(o=(null===t||null===t.child)&&o.hydrate)&&(dr=Ti(e.stateNode.containerInfo),hr=e,o=fr=!0),o?(e.effectTag|=2,e.child=go(e,null,i,n)):(xr(t,e,i,n),br()),e=e.child),e;case 5:return So(e),null===t&&gr(e),i=e.type,o=e.pendingProps,a=null!==t?t.memoizedProps:null,s=o.children,vi(i,o)?s=null:null!==a&&vi(i,a)&&(e.effectTag|=16),Pr(t,e),1!==n&&1&e.mode&&o.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(xr(t,e,s,n),e=e.child),e;case 6:return null===t&&gr(e),null;case 13:return kr(t,e,n);case 4:return xo(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=yo(e,null,i,n):xr(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:no(i,o),Tr(t,e,i,o,n);case 7:return xr(t,e,e.pendingProps,n),e.child;case 8:case 12:return xr(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,o=e.pendingProps,s=e.memoizedProps,a=o.value,jr(e,a),null!==s){var l=s.value;if(0==(a=Qe(l,a)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(l,a):1073741823))){if(s.children===o.children&&!Ai.current){e=Ir(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var c=l.contextDependencies;if(null!==c){s=l.child;for(var u=c.first;null!==u;){if(u.context===i&&0!=(u.observedBits&a)){1===l.tag&&((u=qr(n)).tag=Hr,Qr(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),u=n;for(var h=l.return;null!==h;){var d=h.alternate;if(h.childExpirationTime<u)h.childExpirationTime=u,null!==d&&d.childExpirationTime<u&&(d.childExpirationTime=u);else{if(!(null!==d&&d.childExpirationTime<u))break;d.childExpirationTime=u}h=h.return}c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else s=10===l.tag&&l.type===e.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===e){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}xr(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,a=e.pendingProps,i=a.children,zr(e,n),o=Wr(o,a.unstable_observedBits),i=i(o),e.effectTag|=1,xr(t,e,i,n),e.child;case 14:return o=e.type,a=no(o,e.pendingProps),a=no(o.type,a),Sr(t,e,o,a,i,n);case 15:return Er(t,e,e.type,e.pendingProps,i,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:no(i,o),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Li(i)?(t=!0,ji(e)):t=!1,zr(e,n),so(e,i,o),co(e,i,o,n),Dr(null,e,i,!0,t,n)}r("156")}var Mr={current:null},Rr=null,Nr=null,Fr=null;function jr(t,e){var n=t.type._context;Ci(Mr,n._currentValue),n._currentValue=e}function Ur(t){var e=Mr.current;Pi(Mr),t.type._context._currentValue=e}function zr(t,e){Rr=t,Fr=Nr=null;var n=t.contextDependencies;null!==n&&n.expirationTime>=e&&(wr=!0),t.contextDependencies=null}function Wr(t,e){return Fr!==t&&!1!==e&&0!==e&&("number"==typeof e&&1073741823!==e||(Fr=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Nr?(null===Rr&&r("308"),Nr=e,Rr.contextDependencies={first:e,expirationTime:0}):Nr=Nr.next=e),t._currentValue}var Gr=0,Br=1,Hr=2,Vr=3,Yr=!1;function Kr(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xr(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function qr(t){return{expirationTime:t,tag:Gr,payload:null,callback:null,next:null,nextEffect:null}}function $r(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Qr(t,e){var n=t.alternate;if(null===n){var i=t.updateQueue,o=null;null===i&&(i=t.updateQueue=Kr(t.memoizedState))}else i=t.updateQueue,o=n.updateQueue,null===i?null===o?(i=t.updateQueue=Kr(t.memoizedState),o=n.updateQueue=Kr(n.memoizedState)):i=t.updateQueue=Xr(o):null===o&&(o=n.updateQueue=Xr(i));null===o||i===o?$r(i,e):null===i.lastUpdate||null===o.lastUpdate?($r(i,e),$r(o,e)):($r(i,e),o.lastUpdate=e)}function Jr(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=Kr(t.memoizedState):Zr(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function Zr(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Xr(e)),e}function ta(t,e,n,o,r,a){switch(n.tag){case Br:return"function"==typeof(t=n.payload)?t.call(a,o,r):t;case Vr:t.effectTag=-2049&t.effectTag|64;case Gr:if(t=n.payload,null==(r="function"==typeof t?t.call(a,o,r):t))break;return i({},o,r);case Hr:Yr=!0}return o}function ea(t,e,n,i,o){Yr=!1;for(var r=(e=Zr(t,e)).baseState,a=null,s=0,l=e.firstUpdate,c=r;null!==l;){var u=l.expirationTime;u<o?(null===a&&(a=l,r=c),s<u&&(s=u)):(c=ta(t,0,l,c,n,i),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=l:(e.lastEffect.nextEffect=l,e.lastEffect=l))),l=l.next}for(u=null,l=e.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<o?(null===u&&(u=l,null===a&&(r=c)),s<h&&(s=h)):(c=ta(t,0,l,c,n,i),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=l:(e.lastCapturedEffect.nextEffect=l,e.lastCapturedEffect=l))),l=l.next}null===a&&(e.lastUpdate=null),null===u?e.lastCapturedUpdate=null:t.effectTag|=32,null===a&&null===u&&(r=c),e.baseState=r,e.firstUpdate=a,e.firstCapturedUpdate=u,t.expirationTime=s,t.memoizedState=c}function na(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ia(e.firstEffect,n),e.firstEffect=e.lastEffect=null,ia(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function ia(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var i=e;"function"!=typeof n&&r("191",n),n.call(i)}t=t.nextEffect}}function oa(t,e){return{value:t,source:e,stack:se(e)}}function ra(t){t.effectTag|=4}var aa=void 0,sa=void 0,la=void 0,ca=void 0;aa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},sa=function(){},la=function(t,e,n,o,r){var a=t.memoizedProps;if(a!==o){var s=e.stateNode;switch(wo(mo.current),t=null,n){case"input":a=me(s,a),o=me(s,o),t=[];break;case"option":a=Yn(s,a),o=Yn(s,o),t=[];break;case"select":a=i({},a,{value:void 0}),o=i({},o,{value:void 0}),t=[];break;case"textarea":a=Xn(s,a),o=Xn(s,o),t=[];break;default:"function"!=typeof a.onClick&&"function"==typeof o.onClick&&(s.onclick=fi)}ui(n,o),s=n=void 0;var l=null;for(n in a)if(!o.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var c=a[n];for(s in c)c.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(m.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in o){var u=o[n];if(c=null!=a?a[n]:void 0,o.hasOwnProperty(n)&&u!==c&&(null!=u||null!=c))if("style"===n)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(l||(l={}),l[s]=u[s])}else l||(t||(t=[]),t.push(n,l)),l=u;else"dangerouslySetInnerHTML"===n?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(t=t||[]).push(n,""+u)):"children"===n?c===u||"string"!=typeof u&&"number"!=typeof u||(t=t||[]).push(n,""+u):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(m.hasOwnProperty(n)?(null!=u&&di(r,n),t||c===u||(t=[])):(t=t||[]).push(n,u))}l&&(t=t||[]).push("style",l),r=t,(e.updateQueue=r)&&ra(e)}},ca=function(t,e,n,i){n!==i&&ra(e)};var ua="function"==typeof WeakSet?WeakSet:Set;function ha(t,e){var n=e.source,i=e.stack;null===i&&null!==n&&(i=se(n)),null!==n&&ae(n.type),e=e.value,null!==t&&1===t.tag&&ae(t.type);try{console.error(e)}catch(t){setTimeout(function(){throw t})}}function da(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Ka(t,e)}else e.current=null}function fa(t,e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&t)!==Po){var o=i.destroy;i.destroy=void 0,void 0!==o&&o()}(i.tag&e)!==Po&&(o=i.create,i.destroy=o()),i=i.next}while(i!==n)}}function pa(t){switch("function"==typeof Wi&&Wi(t),t.tag){case 0:case 11:case 14:case 15:var e=t.updateQueue;if(null!==e&&null!==(e=e.lastEffect)){var n=e=e.next;do{var i=n.destroy;if(void 0!==i){var o=t;try{i()}catch(t){Ka(o,t)}}n=n.next}while(n!==e)}break;case 1:if(da(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ka(t,e)}break;case 5:da(t);break;case 4:va(t)}}function ya(t){return 5===t.tag||3===t.tag||4===t.tag}function ga(t){t:{for(var e=t.return;null!==e;){if(ya(e)){var n=e;break t}e=e.return}r("160"),n=void 0}var i=e=void 0;switch(n.tag){case 5:e=n.stateNode,i=!1;break;case 3:case 4:e=n.stateNode.containerInfo,i=!0;break;default:r("161")}16&n.effectTag&&(oi(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ya(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var o=t;;){if(5===o.tag||6===o.tag)if(n)if(i){var a=e,s=o.stateNode,l=n;8===a.nodeType?a.parentNode.insertBefore(s,l):a.insertBefore(s,l)}else e.insertBefore(o.stateNode,n);else i?(s=e,l=o.stateNode,8===s.nodeType?(a=s.parentNode).insertBefore(l,s):(a=s).appendChild(l),null!=(s=s._reactRootContainer)||null!==a.onclick||(a.onclick=fi)):e.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function va(t){for(var e=t,n=!1,i=void 0,o=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&r("160"),n.tag){case 5:i=n.stateNode,o=!1;break t;case 3:case 4:i=n.stateNode.containerInfo,o=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag){t:for(var a=e,s=a;;)if(pa(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}o?(a=i,s=e.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):i.removeChild(e.stateNode)}else if(4===e.tag){if(null!==e.child){i=e.stateNode.containerInfo,o=!0,e.child.return=e,e=e.child;continue}}else if(pa(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function ma(t,e){switch(e.tag){case 0:case 11:case 14:case 15:fa(Oo,Do,e);break;case 1:break;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps;t=null!==t?t.memoizedProps:i;var o=e.type,a=e.updateQueue;e.updateQueue=null,null!==a&&function(t,e,n,i,o){t[L]=o,"input"===n&&"radio"===o.type&&null!=o.name&&_e(t,o),hi(n,i),i=hi(n,o);for(var r=0;r<e.length;r+=2){var a=e[r],s=e[r+1];"style"===a?li(t,s):"dangerouslySetInnerHTML"===a?ii(t,s):"children"===a?oi(t,s):ge(t,a,s,i)}switch(n){case"input":we(t,o);break;case"textarea":$n(t,o);break;case"select":e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!o.multiple,null!=(n=o.value)?Kn(t,!!o.multiple,n,!1):e!==!!o.multiple&&(null!=o.defaultValue?Kn(t,!!o.multiple,o.defaultValue,!0):Kn(t,!!o.multiple,o.multiple?[]:"",!1))}}(n,a,o,t,i)}break;case 6:null===e.stateNode&&r("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(n=e.memoizedState,i=void 0,t=e,null===n?i=!1:(i=!0,t=e.child,0===n.timedOutAt&&(n.timedOutAt=ws())),null!==t&&function(t,e){for(var n=t;;){if(5===n.tag){var i=n.stateNode;if(e)i.style.display="none";else{i=n.stateNode;var o=n.memoizedProps.style;o=null!=o&&o.hasOwnProperty("display")?o.display:null,i.style.display=si("display",o)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(i=n.child.sibling).return=n,n=i;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(t,i),null!==(n=e.updateQueue)){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new ua),n.forEach(function(t){var n=function(t,e){var n=t.stateNode;null!==n&&n.delete(e),e=Xa(e=ws(),t),null!==(t=$a(t,e))&&(Ji(t,e),0!==(e=t.expirationTime)&&xs(t,e))}.bind(null,e,t);s.has(t)||(s.add(t),t.then(n,n))})}break;case 17:break;default:r("163")}}var ba="function"==typeof WeakMap?WeakMap:Map;function _a(t,e,n){(n=qr(n)).tag=Vr,n.payload={element:null};var i=e.value;return n.callback=function(){ks(i),ha(t,e)},n}function wa(t,e,n){(n=qr(n)).tag=Vr;var i=t.type.getDerivedStateFromError;if("function"==typeof i){var o=e.value;n.payload=function(){return i(o)}}var r=t.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(n.callback=function(){"function"!=typeof i&&(null===Fa?Fa=new Set([this]):Fa.add(this));var n=e.value,o=e.stack;ha(t,e),this.componentDidCatch(n,{componentStack:null!==o?o:""})}),n}function xa(t){switch(t.tag){case 1:Li(t.type)&&Mi();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return To(),Ri(),0!=(64&(e=t.effectTag))&&r("285"),t.effectTag=-2049&e|64,t;case 5:return Eo(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 18:return null;case 4:return To(),null;case 10:return Ur(t),null;default:return null}}var Ta=Bt.ReactCurrentDispatcher,Sa=Bt.ReactCurrentOwner,Ea=1073741822,Pa=!1,Ca=null,Oa=null,Da=0,Aa=-1,ka=!1,Ia=null,La=!1,Ma=null,Ra=null,Na=null,Fa=null;function ja(){if(null!==Ca)for(var t=Ca.return;null!==t;){var e=t;switch(e.tag){case 1:var n=e.type.childContextTypes;null!=n&&Mi();break;case 3:To(),Ri();break;case 5:Eo(e);break;case 4:To();break;case 10:Ur(e)}t=t.return}Oa=null,Da=0,Aa=-1,ka=!1,Ca=null}function Ua(){for(;null!==Ia;){var t=Ia.effectTag;if(16&t&&oi(Ia.stateNode,""),128&t){var e=Ia.alternate;null!==e&&null!==(e=e.ref)&&("function"==typeof e?e(null):e.current=null)}switch(14&t){case 2:ga(Ia),Ia.effectTag&=-3;break;case 6:ga(Ia),Ia.effectTag&=-3,ma(Ia.alternate,Ia);break;case 4:ma(Ia.alternate,Ia);break;case 8:va(t=Ia),t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,null!==(t=t.alternate)&&(t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null)}Ia=Ia.nextEffect}}function za(){for(;null!==Ia;){if(256&Ia.effectTag)t:{var t=Ia.alternate,e=Ia;switch(e.tag){case 0:case 11:case 15:fa(Co,Po,e);break t;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,i=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:no(e.type,n),i),t.__reactInternalSnapshotBeforeUpdate=e}break t;case 3:case 5:case 6:case 4:case 17:break t;default:r("163")}}Ia=Ia.nextEffect}}function Wa(t,e){for(;null!==Ia;){var n=Ia.effectTag;if(36&n){var i=Ia.alternate,o=Ia,a=e;switch(o.tag){case 0:case 11:case 15:fa(Ao,ko,o);break;case 1:var s=o.stateNode;if(4&o.effectTag)if(null===i)s.componentDidMount();else{var l=o.elementType===o.type?i.memoizedProps:no(o.type,i.memoizedProps);s.componentDidUpdate(l,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(i=o.updateQueue)&&na(0,i,s);break;case 3:if(null!==(i=o.updateQueue)){if(s=null,null!==o.child)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}na(0,i,s)}break;case 5:a=o.stateNode,null===i&&4&o.effectTag&&gi(o.type,o.memoizedProps)&&a.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:r("163")}}128&n&&null!==(o=Ia.ref)&&(a=Ia.stateNode,"function"==typeof o?o(a):o.current=a),512&n&&(Ma=t),Ia=Ia.nextEffect}}function Ga(){null!==Ra&&wi(Ra),null!==Na&&Na()}function Ba(t,e){La=Pa=!0,t.current===e&&r("177");var n=t.pendingCommitExpirationTime;0===n&&r("261"),t.pendingCommitExpirationTime=0;var i=e.expirationTime,a=e.childExpirationTime;for(function(t,e){if(t.didError=!1,0===e)t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0;else{e<t.latestPingedTime&&(t.latestPingedTime=0);var n=t.latestPendingTime;0!==n&&(n>e?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>e&&(t.earliestPendingTime=t.latestPendingTime)),0===(n=t.earliestSuspendedTime)?Ji(t,e):e<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,Ji(t,e)):e>n&&Ji(t,e)}eo(0,t)}(t,a>i?a:i),Sa.current=null,i=void 0,1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e,i=e.firstEffect):i=e:i=e.firstEffect,pi=Tn,yi=function(){var t=Rn();if(Nn(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else t:{var n=(e=(e=t.ownerDocument)&&e.defaultView||window).getSelection&&e.getSelection();if(n&&0!==n.rangeCount){e=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{e.nodeType,o.nodeType}catch(t){e=null;break t}var r=0,a=-1,s=-1,l=0,c=0,u=t,h=null;e:for(;;){for(var d;u!==e||0!==i&&3!==u.nodeType||(a=r+i),u!==o||0!==n&&3!==u.nodeType||(s=r+n),3===u.nodeType&&(r+=u.nodeValue.length),null!==(d=u.firstChild);)h=u,u=d;for(;;){if(u===t)break e;if(h===e&&++l===i&&(a=r),h===o&&++c===n&&(s=r),null!==(d=u.nextSibling))break;h=(u=h).parentNode}u=d}e=-1===a||-1===s?null:{start:a,end:s}}else e=null}e=e||{start:0,end:0}}else e=null;return{focusedElem:t,selectionRange:e}}(),Tn=!1,Ia=i;null!==Ia;){a=!1;var s=void 0;try{za()}catch(t){a=!0,s=t}a&&(null===Ia&&r("178"),Ka(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}for(Ia=i;null!==Ia;){a=!1,s=void 0;try{Ua()}catch(t){a=!0,s=t}a&&(null===Ia&&r("178"),Ka(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}for(Fn(yi),yi=null,Tn=!!pi,pi=null,t.current=e,Ia=i;null!==Ia;){a=!1,s=void 0;try{Wa(t,n)}catch(t){a=!0,s=t}a&&(null===Ia&&r("178"),Ka(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}if(null!==i&&null!==Ma){var l=function(t,e){Na=Ra=Ma=null;var n=is;is=!0;do{if(512&e.effectTag){var i=!1,o=void 0;try{var r=e;fa(Lo,Po,r),fa(Po,Io,r)}catch(t){i=!0,o=t}i&&Ka(e,o)}e=e.nextEffect}while(null!==e);is=n,0!==(n=t.expirationTime)&&xs(t,n),cs||is||Cs(1073741823,!1)}.bind(null,t,i);Ra=o.unstable_runWithPriority(o.unstable_NormalPriority,function(){return _i(l)}),Na=l}Pa=La=!1,"function"==typeof zi&&zi(e.stateNode),n=e.expirationTime,0===(e=(e=e.childExpirationTime)>n?e:n)&&(Fa=null),function(t,e){t.expirationTime=e,t.finishedWork=null}(t,e)}function Ha(t){for(;;){var e=t.alternate,n=t.return,o=t.sibling;if(0==(1024&t.effectTag)){Ca=t;t:{var a=e,s=Da,l=(e=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Li(e.type)&&Mi();break;case 3:To(),Ri(),(l=e.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==a&&null!==a.child||(mr(e),e.effectTag&=-3),sa(e);break;case 5:Eo(e);var c=wo(_o.current);if(s=e.type,null!==a&&null!=e.stateNode)la(a,e,s,l,c),a.ref!==e.ref&&(e.effectTag|=128);else if(l){var u=wo(mo.current);if(mr(e)){a=(l=e).stateNode;var h=l.type,d=l.memoizedProps,f=c;switch(a[I]=l,a[L]=d,s=void 0,c=h){case"iframe":case"object":Sn("load",a);break;case"video":case"audio":for(h=0;h<tt.length;h++)Sn(tt[h],a);break;case"source":Sn("error",a);break;case"img":case"image":case"link":Sn("error",a),Sn("load",a);break;case"form":Sn("reset",a),Sn("submit",a);break;case"details":Sn("toggle",a);break;case"input":be(a,d),Sn("invalid",a),di(f,"onChange");break;case"select":a._wrapperState={wasMultiple:!!d.multiple},Sn("invalid",a),di(f,"onChange");break;case"textarea":qn(a,d),Sn("invalid",a),di(f,"onChange")}for(s in ui(c,d),h=null,d)d.hasOwnProperty(s)&&(u=d[s],"children"===s?"string"==typeof u?a.textContent!==u&&(h=["children",u]):"number"==typeof u&&a.textContent!==""+u&&(h=["children",""+u]):m.hasOwnProperty(s)&&null!=u&&di(f,s));switch(c){case"input":Wt(a),xe(a,d,!0);break;case"textarea":Wt(a),Qn(a);break;case"select":case"option":break;default:"function"==typeof d.onClick&&(a.onclick=fi)}s=h,l.updateQueue=s,(l=null!==s)&&ra(e)}else{d=e,f=s,a=l,h=9===c.nodeType?c:c.ownerDocument,u===Jn.html&&(u=Zn(f)),u===Jn.html?"script"===f?((a=h.createElement("div")).innerHTML="<script><\/script>",h=a.removeChild(a.firstChild)):"string"==typeof a.is?h=h.createElement(f,{is:a.is}):(h=h.createElement(f),"select"===f&&(f=h,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):h=h.createElementNS(u,f),(a=h)[I]=d,a[L]=l,aa(a,e,!1,!1),f=a;var p=c,y=hi(h=s,d=l);switch(h){case"iframe":case"object":Sn("load",f),c=d;break;case"video":case"audio":for(c=0;c<tt.length;c++)Sn(tt[c],f);c=d;break;case"source":Sn("error",f),c=d;break;case"img":case"image":case"link":Sn("error",f),Sn("load",f),c=d;break;case"form":Sn("reset",f),Sn("submit",f),c=d;break;case"details":Sn("toggle",f),c=d;break;case"input":be(f,d),c=me(f,d),Sn("invalid",f),di(p,"onChange");break;case"option":c=Yn(f,d);break;case"select":f._wrapperState={wasMultiple:!!d.multiple},c=i({},d,{value:void 0}),Sn("invalid",f),di(p,"onChange");break;case"textarea":qn(f,d),c=Xn(f,d),Sn("invalid",f),di(p,"onChange");break;default:c=d}ui(h,c),u=void 0;var g=h,v=f,b=c;for(u in b)if(b.hasOwnProperty(u)){var _=b[u];"style"===u?li(v,_):"dangerouslySetInnerHTML"===u?null!=(_=_?_.__html:void 0)&&ii(v,_):"children"===u?"string"==typeof _?("textarea"!==g||""!==_)&&oi(v,_):"number"==typeof _&&oi(v,""+_):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(m.hasOwnProperty(u)?null!=_&&di(p,u):null!=_&&ge(v,u,_,y))}switch(h){case"input":Wt(f),xe(f,d,!1);break;case"textarea":Wt(f),Qn(f);break;case"option":null!=d.value&&f.setAttribute("value",""+ve(d.value));break;case"select":(c=f).multiple=!!d.multiple,null!=(f=d.value)?Kn(c,!!d.multiple,f,!1):null!=d.defaultValue&&Kn(c,!!d.multiple,d.defaultValue,!0);break;default:"function"==typeof c.onClick&&(f.onclick=fi)}(l=gi(s,l))&&ra(e),e.stateNode=a}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&r("166");break;case 6:a&&null!=e.stateNode?ca(a,e,a.memoizedProps,l):("string"!=typeof l&&null===e.stateNode&&r("166"),a=wo(_o.current),wo(mo.current),mr(e)?(s=(l=e).stateNode,a=l.memoizedProps,s[I]=l,(l=s.nodeValue!==a)&&ra(e)):(s=e,(l=(9===a.nodeType?a:a.ownerDocument).createTextNode(l))[I]=e,s.stateNode=l));break;case 11:break;case 13:if(l=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=s,Ca=e;break t}l=null!==l,s=null!==a&&null!==a.memoizedState,null!==a&&!l&&s&&null!==(a=a.child.sibling)&&(null!==(c=e.firstEffect)?(e.firstEffect=a,a.nextEffect=c):(e.firstEffect=e.lastEffect=a,a.nextEffect=null),a.effectTag=8),(l||s)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:To(),sa(e);break;case 10:Ur(e);break;case 9:case 14:break;case 17:Li(e.type)&&Mi();break;case 18:break;default:r("156")}Ca=null}if(e=t,1===Da||1!==e.childExpirationTime){for(l=0,s=e.child;null!==s;)a=s.expirationTime,c=s.childExpirationTime,a>l&&(l=a),c>l&&(l=c),s=s.sibling;e.childExpirationTime=l}if(null!==Ca)return Ca;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t))}else{if(null!==(t=xa(t)))return t.effectTag&=1023,t;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==o)return o;if(null===n)break;t=n}return null}function Va(t){var e=Lr(t.alternate,t,Da);return t.memoizedProps=t.pendingProps,null===e&&(e=Ha(t)),Sa.current=null,e}function Ya(t,e){Pa&&r("243"),Ga(),Pa=!0;var n=Ta.current;Ta.current=lr;var i=t.nextExpirationTimeToWorkOn;i===Da&&t===Oa&&null!==Ca||(ja(),Da=i,Ca=Yi((Oa=t).current,null),t.pendingCommitExpirationTime=0);for(var o=!1;;){try{if(e)for(;null!==Ca&&!Es();)Ca=Va(Ca);else for(;null!==Ca;)Ca=Va(Ca)}catch(e){if(Fr=Nr=Rr=null,Qo(),null===Ca)o=!0,ks(e);else{null===Ca&&r("271");var a=Ca,s=a.return;if(null!==s){t:{var l=t,c=s,u=a,h=e;if(s=Da,u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==h&&"object"==typeof h&&"function"==typeof h.then){var d=h;h=c;var f=-1,p=-1;do{if(13===h.tag){var y=h.alternate;if(null!==y&&null!==(y=y.memoizedState)){p=10*(1073741822-y.timedOutAt);break}"number"==typeof(y=h.pendingProps.maxDuration)&&(0>=y?f=0:(-1===f||y<f)&&(f=y))}h=h.return}while(null!==h);h=c;do{if((y=13===h.tag)&&(y=void 0!==h.memoizedProps.fallback&&null===h.memoizedState),y){if(null===(c=h.updateQueue)?((c=new Set).add(d),h.updateQueue=c):c.add(d),0==(1&h.mode)){h.effectTag|=64,u.effectTag&=-1957,1===u.tag&&(null===u.alternate?u.tag=17:((s=qr(1073741823)).tag=Hr,Qr(u,s))),u.expirationTime=1073741823;break t}c=s;var g=(u=l).pingCache;null===g?(g=u.pingCache=new ba,y=new Set,g.set(d,y)):void 0===(y=g.get(d))&&(y=new Set,g.set(d,y)),y.has(c)||(y.add(c),u=qa.bind(null,u,d,c),d.then(u,u)),-1===f?l=1073741823:(-1===p&&(p=10*(1073741822-to(l,s))-5e3),l=p+f),0<=l&&Aa<l&&(Aa=l),h.effectTag|=2048,h.expirationTime=s;break t}h=h.return}while(null!==h);h=Error((ae(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+se(u))}ka=!0,h=oa(h,u),l=c;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=s,s=_a(l,h,s),Jr(l,s);break t;case 1:if(f=h,p=l.type,u=l.stateNode,0==(64&l.effectTag)&&("function"==typeof p.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===Fa||!Fa.has(u)))){l.effectTag|=2048,l.expirationTime=s,s=wa(l,f,s),Jr(l,s);break t}}l=l.return}while(null!==l)}Ca=Ha(a);continue}o=!0,ks(e)}}break}if(Pa=!1,Ta.current=n,Fr=Nr=Rr=null,Qo(),o)Oa=null,t.finishedWork=null;else if(null!==Ca)t.finishedWork=null;else{if(null===(n=t.current.alternate)&&r("281"),Oa=null,ka){if(o=t.latestPendingTime,a=t.latestSuspendedTime,s=t.latestPingedTime,0!==o&&o<i||0!==a&&a<i||0!==s&&s<i)return Zi(t,i),void _s(t,n,i,t.expirationTime,-1);if(!t.didError&&e)return t.didError=!0,i=t.nextExpirationTimeToWorkOn=i,e=t.expirationTime=1073741823,void _s(t,n,i,e,-1)}e&&-1!==Aa?(Zi(t,i),(e=10*(1073741822-to(t,i)))<Aa&&(Aa=e),e=10*(1073741822-ws()),e=Aa-e,_s(t,n,i,t.expirationTime,0>e?0:e)):(t.pendingCommitExpirationTime=i,t.finishedWork=n)}}function Ka(t,e){for(var n=t.return;null!==n;){switch(n.tag){case 1:var i=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===Fa||!Fa.has(i)))return t=oa(e,t),t=wa(n,t,1073741823),Qr(n,t),void Qa(n,1073741823);break;case 3:return t=oa(e,t),t=_a(n,t,1073741823),Qr(n,t),void Qa(n,1073741823)}n=n.return}3===t.tag&&(n=oa(e,t),n=_a(t,n,1073741823),Qr(t,n),Qa(t,1073741823))}function Xa(t,e){var n=o.unstable_getCurrentPriorityLevel(),i=void 0;if(0==(1&e.mode))i=1073741823;else if(Pa&&!La)i=Da;else{switch(n){case o.unstable_ImmediatePriority:i=1073741823;break;case o.unstable_UserBlockingPriority:i=1073741822-10*(1+((1073741822-t+15)/10|0));break;case o.unstable_NormalPriority:i=1073741822-25*(1+((1073741822-t+500)/25|0));break;case o.unstable_LowPriority:case o.unstable_IdlePriority:i=1;break;default:r("313")}null!==Oa&&i===Da&&--i}return n===o.unstable_UserBlockingPriority&&(0===as||i<as)&&(as=i),i}function qa(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),null!==Oa&&Da===n?Oa=null:(e=t.earliestSuspendedTime,i=t.latestSuspendedTime,0!==e&&n<=e&&n>=i&&(t.didError=!1,(0===(e=t.latestPingedTime)||e>n)&&(t.latestPingedTime=n),eo(n,t),0!==(n=t.expirationTime)&&xs(t,n)))}function $a(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var i=t.return,o=null;if(null===i&&3===t.tag)o=t.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<e&&(i.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===i.return&&3===i.tag){o=i.stateNode;break}i=i.return}return o}function Qa(t,e){null!==(t=$a(t,e))&&(!Pa&&0!==Da&&e>Da&&ja(),Ji(t,e),Pa&&!La&&Oa===t||xs(t,t.expirationTime),gs>ys&&(gs=0,r("185")))}function Ja(t,e,n,i,r){return o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){return t(e,n,i,r)})}var Za=null,ts=null,es=0,ns=void 0,is=!1,os=null,rs=0,as=0,ss=!1,ls=null,cs=!1,us=!1,hs=null,ds=o.unstable_now(),fs=1073741822-(ds/10|0),ps=fs,ys=50,gs=0,vs=null;function ms(){fs=1073741822-((o.unstable_now()-ds)/10|0)}function bs(t,e){if(0!==es){if(e<es)return;null!==ns&&o.unstable_cancelCallback(ns)}es=e,t=o.unstable_now()-ds,ns=o.unstable_scheduleCallback(Ps,{timeout:10*(1073741822-e)-t})}function _s(t,e,n,i,o){t.expirationTime=i,0!==o||Es()?0<o&&(t.timeoutHandle=mi(function(t,e,n){t.pendingCommitExpirationTime=n,t.finishedWork=e,ms(),ps=fs,Os(t,n)}.bind(null,t,e,n),o)):(t.pendingCommitExpirationTime=n,t.finishedWork=e)}function ws(){return is?ps:(Ts(),0!==rs&&1!==rs||(ms(),ps=fs),ps)}function xs(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===ts?(Za=ts=t,t.nextScheduledRoot=t):(ts=ts.nextScheduledRoot=t).nextScheduledRoot=Za):e>t.expirationTime&&(t.expirationTime=e),is||(cs?us&&(os=t,rs=1073741823,Ds(t,1073741823,!1)):1073741823===e?Cs(1073741823,!1):bs(t,e))}function Ts(){var t=0,e=null;if(null!==ts)for(var n=ts,i=Za;null!==i;){var o=i.expirationTime;if(0===o){if((null===n||null===ts)&&r("244"),i===i.nextScheduledRoot){Za=ts=i.nextScheduledRoot=null;break}if(i===Za)Za=o=i.nextScheduledRoot,ts.nextScheduledRoot=o,i.nextScheduledRoot=null;else{if(i===ts){(ts=n).nextScheduledRoot=Za,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if(o>t&&(t=o,e=i),i===ts)break;if(1073741823===t)break;n=i,i=i.nextScheduledRoot}}os=e,rs=t}var Ss=!1;function Es(){return!!Ss||!!o.unstable_shouldYield()&&(Ss=!0)}function Ps(){try{if(!Es()&&null!==Za){ms();var t=Za;do{var e=t.expirationTime;0!==e&&fs<=e&&(t.nextExpirationTimeToWorkOn=fs),t=t.nextScheduledRoot}while(t!==Za)}Cs(0,!0)}finally{Ss=!1}}function Cs(t,e){if(Ts(),e)for(ms(),ps=fs;null!==os&&0!==rs&&t<=rs&&!(Ss&&fs>rs);)Ds(os,rs,fs>rs),Ts(),ms(),ps=fs;else for(;null!==os&&0!==rs&&t<=rs;)Ds(os,rs,!1),Ts();if(e&&(es=0,ns=null),0!==rs&&bs(os,rs),gs=0,vs=null,null!==hs)for(t=hs,hs=null,e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){ss||(ss=!0,ls=t)}}if(ss)throw t=ls,ls=null,ss=!1,t}function Os(t,e){is&&r("253"),os=t,rs=e,Ds(t,e,!1),Cs(1073741823,!1)}function Ds(t,e,n){if(is&&r("245"),is=!0,n){var i=t.finishedWork;null!==i?As(t,i,e):(t.finishedWork=null,-1!==(i=t.timeoutHandle)&&(t.timeoutHandle=-1,bi(i)),Ya(t,n),null!==(i=t.finishedWork)&&(Es()?t.finishedWork=i:As(t,i,e)))}else null!==(i=t.finishedWork)?As(t,i,e):(t.finishedWork=null,-1!==(i=t.timeoutHandle)&&(t.timeoutHandle=-1,bi(i)),Ya(t,n),null!==(i=t.finishedWork)&&As(t,i,e));is=!1}function As(t,e,n){var i=t.firstBatch;if(null!==i&&i._expirationTime>=n&&(null===hs?hs=[i]:hs.push(i),i._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===vs?gs++:(vs=t,gs=0),o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){Ba(t,e)})}function ks(t){null===os&&r("246"),os.expirationTime=0,ss||(ss=!0,ls=t)}function Is(t,e){var n=cs;cs=!0;try{return t(e)}finally{(cs=n)||is||Cs(1073741823,!1)}}function Ls(t,e){if(cs&&!us){us=!0;try{return t(e)}finally{us=!1}}return t(e)}function Ms(t,e,n){cs||is||0===as||(Cs(as,!1),as=0);var i=cs;cs=!0;try{return o.unstable_runWithPriority(o.unstable_UserBlockingPriority,function(){return t(e,n)})}finally{(cs=i)||is||Cs(1073741823,!1)}}function Rs(t,e,n,i,o){var a=e.current;t:if(n){e:{2===tn(n=n._reactInternalFiber)&&1===n.tag||r("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Li(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(null!==s);r("171"),s=void 0}if(1===n.tag){var l=n.type;if(Li(l)){n=Fi(n,l,s);break t}}n=s}else n=Oi;return null===e.context?e.context=n:e.pendingContext=n,e=o,(o=qr(i)).payload={element:t},null!==(e=void 0===e?null:e)&&(o.callback=e),Ga(),Qr(a,o),Qa(a,i),i}function Ns(t,e,n,i){var o=e.current,r=ws();return o=Xa(r,o),Rs(t,e,n,o,i)}function Fs(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function js(t){var e=1073741822-25*(1+((1073741822-ws()+500)/25|0));e>=Ea&&(e=Ea-1),this._expirationTime=Ea=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Us(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function zs(t,e,n){e=Hi(3,null,null,e?3:0),t={current:e,containerInfo:t,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function Ws(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Gs(t,e,n,i,o){var r=n._reactRootContainer;if(r){if("function"==typeof o){var a=o;o=function(){var t=Fs(r._internalRoot);a.call(t)}}null!=t?r.legacy_renderSubtreeIntoContainer(t,e,o):r.render(e,o)}else{if(r=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new zs(t,!1,e)}(n,i),"function"==typeof o){var s=o;o=function(){var t=Fs(r._internalRoot);s.call(t)}}Ls(function(){null!=t?r.legacy_renderSubtreeIntoContainer(t,e,o):r.render(e,o)})}return Fs(r._internalRoot)}function Bs(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ws(e)||r("200"),function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Kt,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}Et=function(t,e,n){switch(e){case"input":if(we(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=F(i);o||r("90"),Gt(i),we(i,o)}}}break;case"textarea":$n(t,n);break;case"select":null!=(e=n.value)&&Kn(t,!!n.multiple,e,!1)}},js.prototype.render=function(t){this._defer||r("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,i=new Us;return Rs(t,e,null,n,i._onCommit),i},js.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},js.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||r("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var i=null,o=e;o!==this;)i=o,o=o._next;null===i&&r("251"),i._next=o._next,this._next=e,t.firstBatch=this}this._defer=!1,Os(t,n),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},js.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},Us.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Us.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!=typeof n&&r("191",n),n()}}},zs.prototype.render=function(t,e){var n=this._internalRoot,i=new Us;return null!==(e=void 0===e?null:e)&&i.then(e),Ns(t,n,null,i._onCommit),i},zs.prototype.unmount=function(t){var e=this._internalRoot,n=new Us;return null!==(t=void 0===t?null:t)&&n.then(t),Ns(null,e,null,n._onCommit),n},zs.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var i=this._internalRoot,o=new Us;return null!==(n=void 0===n?null:n)&&o.then(n),Ns(e,i,t,o._onCommit),o},zs.prototype.createBatch=function(){var t=new js(this),e=t._expirationTime,n=this._internalRoot,i=n.firstBatch;if(null===i)n.firstBatch=t,t._next=null;else{for(n=null;null!==i&&i._expirationTime>=e;)n=i,i=i._next;t._next=i,null!==n&&(n._next=t)}return t},kt=Is,It=Ms,Lt=function(){is||0===as||(Cs(as,!1),as=0)};var Hs={createPortal:Bs,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"==typeof t.render?r("188"):r("268",Object.keys(t))),t=null===(t=nn(e))?null:t.stateNode},hydrate:function(t,e,n){return Ws(e)||r("200"),Gs(null,t,e,!0,n)},render:function(t,e,n){return Ws(e)||r("200"),Gs(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,i){return Ws(n)||r("200"),(null==t||void 0===t._reactInternalFiber)&&r("38"),Gs(t,e,n,!1,i)},unmountComponentAtNode:function(t){return Ws(t)||r("40"),!!t._reactRootContainer&&(Ls(function(){Gs(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Bs.apply(void 0,arguments)},unstable_batchedUpdates:Is,unstable_interactiveUpdates:Ms,flushSync:function(t,e){is&&r("187");var n=cs;cs=!0;try{return Ja(t,e)}finally{cs=n,Cs(1073741823,!1)}},unstable_createRoot:function(t,e){return Ws(t)||r("299","unstable_createRoot"),new zs(t,!0,null!=e&&!0===e.hydrate)},unstable_flushControlled:function(t){var e=cs;cs=!0;try{Ja(t)}finally{(cs=e)||is||Cs(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[R,N,F,O.injectEventPluginsByName,v,B,function(t){E(t,G)},Dt,At,Cn,A]}};!function(t){var e=t.findFiberByHostInstance;!function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);zi=Gi(function(t){return e.onCommitFiberRoot(n,t)}),Wi=Gi(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}}(i({},t,{overrideProps:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=nn(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}({findFiberByHostInstance:M,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Vs={default:Hs},Ys=Vs&&Hs||Vs;t.exports=Ys.default||Ys})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=n(102)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){(function(n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){
/** @license React v0.13.6
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=null,i=!1,o=3,r=-1,a=-1,s=!1,l=!1;function c(){if(!s){var e=t.expirationTime;l?T():l=!0,x(d,e)}}function u(){var e=t,n=t.next;if(t===n)t=null;else{var i=t.previous;t=i.next=n,n.previous=i}e.next=e.previous=null,i=e.callback,n=e.expirationTime,e=e.priorityLevel;var r=o,s=a;o=e,a=n;try{var l=i()}finally{o=r,a=s}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:n,next:null,previous:null},null===t)t=l.next=l.previous=l;else{i=null,e=t;do{if(e.expirationTime>=n){i=e;break}e=e.next}while(e!==t);null===i?i=t:i===t&&(t=l,c()),(n=i.previous).next=i.previous=l,l.next=i,l.previous=n}}function h(){if(-1===r&&null!==t&&1===t.priorityLevel){s=!0;try{do{u()}while(null!==t&&1===t.priorityLevel)}finally{s=!1,null!==t?c():l=!1}}}function d(n){s=!0;var o=i;i=n;try{if(n)for(;null!==t;){var r=e.unstable_now();if(!(t.expirationTime<=r))break;do{u()}while(null!==t&&t.expirationTime<=r)}else if(null!==t)do{u()}while(null!==t&&!S())}finally{s=!1,i=o,null!==t?c():l=!1,h()}}var f,p,y=Date,g="function"==typeof setTimeout?setTimeout:void 0,v="function"==typeof clearTimeout?clearTimeout:void 0,m="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function _(t){f=m(function(e){v(p),t(e)}),p=g(function(){b(f),t(e.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var w=performance;e.unstable_now=function(){return w.now()}}else e.unstable_now=function(){return y.now()};var x,T,S,E=null;if("undefined"!=typeof window?E=window:void 0!==n&&(E=n),E&&E._schedMock){var P=E._schedMock;x=P[0],T=P[1],S=P[2],e.unstable_now=P[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var C=null,O=function(t){if(null!==C)try{C(t)}finally{C=null}};x=function(t){null!==C?setTimeout(x,0,t):(C=t,setTimeout(O,0,!1))},T=function(){C=null},S=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof m&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var D=null,A=!1,k=-1,I=!1,L=!1,M=0,R=33,N=33;S=function(){return M<=e.unstable_now()};var F=new MessageChannel,j=F.port2;F.port1.onmessage=function(){A=!1;var t=D,n=k;D=null,k=-1;var i=e.unstable_now(),o=!1;if(0>=M-i){if(!(-1!==n&&n<=i))return I||(I=!0,_(U)),D=t,void(k=n);o=!0}if(null!==t){L=!0;try{t(o)}finally{L=!1}}};var U=function t(e){if(null!==D){_(t);var n=e-M+N;n<N&&R<N?(8>n&&(n=8),N=n<R?R:n):R=n,M=e+N,A||(A=!0,j.postMessage(void 0))}else I=!1};x=function(t,e){D=t,k=e,L||0>e?j.postMessage(void 0):I||(I=!0,_(U))},T=function(){D=null,A=!1,k=-1}}e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,n){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=o,a=r;o=t,r=e.unstable_now();try{return n()}finally{o=i,r=a,h()}},e.unstable_next=function(t){switch(o){case 1:case 2:case 3:var n=3;break;default:n=o}var i=o,a=r;o=n,r=e.unstable_now();try{return t()}finally{o=i,r=a,h()}},e.unstable_scheduleCallback=function(n,i){var a=-1!==r?r:e.unstable_now();if("object"==typeof i&&null!==i&&"number"==typeof i.timeout)i=a+i.timeout;else switch(o){case 1:i=a+-1;break;case 2:i=a+250;break;case 5:i=a+1073741823;break;case 4:i=a+1e4;break;default:i=a+5e3}if(n={callback:n,priorityLevel:o,expirationTime:i,next:null,previous:null},null===t)t=n.next=n.previous=n,c();else{a=null;var s=t;do{if(s.expirationTime>i){a=s;break}s=s.next}while(s!==t);null===a?a=t:a===t&&(t=n,c()),(i=a.previous).next=a.previous=n,n.next=a,n.previous=i}return n},e.unstable_cancelCallback=function(e){var n=e.next;if(null!==n){if(n===e)t=null;else{e===t&&(t=n);var i=e.previous;i.next=n,n.previous=i}e.next=e.previous=null}},e.unstable_wrapCallback=function(t){var n=o;return function(){var i=o,a=r;o=n,r=e.unstable_now();try{return t.apply(this,arguments)}finally{o=i,r=a,h()}}},e.unstable_getCurrentPriorityLevel=function(){return o},e.unstable_shouldYield=function(){return!i&&(null!==t&&t.expirationTime<a||S())},e.unstable_continueExecution=function(){null!==t&&c()},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return t}})?i.apply(e,o):i)||(t.exports=r)}).call(this,n(19))},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=n(104)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t,i=(t=n(6))&&"object"==typeof t&&"default"in t?t.default:t;function o(t){return o.warnAboutHMRDisabled&&(o.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),i.Children.only(t.children)}o.warnAboutHMRDisabled=!1;var r=function t(){return t.shouldWrapWithAppContainer?function(t){return function(e){return i.createElement(o,null,i.createElement(t,e))}}:function(t){return t}};r.shouldWrapWithAppContainer=!1,e.AppContainer=o,e.hot=r,e.areComponentsEqual=function(t,e){return t===e},e.setConfig=function(){},e.cold=function(t){return t},e.configureComponent=function(){}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(6),n(11),n(14),n(24),n(106),n(193),n(228),n(234),n(30),n(15),n(238)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s,l,c,u,h,d,f){"use strict";var p=n(10),y=n(0);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function v(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?g(Object(i),!0).forEach(function(n){(0,e.default)(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=b,e=y(e),i=p(i),o=y(o),r=y(r),a=y(a),s=y(s),l=y(l),c=y(c),u=y(u);const m={};function b(t){const{eventControllersInstance:e}=t,{whiteBoardController:n}=e.controllers,[o,f]=(0,i.useState)(null),[p,y]=(0,i.useState)({}),[g,b]=(0,i.useState)(0),[_,w]=(0,i.useState)([]),[x,T]=(0,i.useState)(!1),[S,E]=(0,i.useState)(!1),[P,C]=(0,i.useState)(0),O=(0,i.useRef)(),D=(0,i.useRef)(),A=(0,i.useRef)(),{userInfo:k}=r.default.getState(),I="TEACHER"===k.role,L=!I;function M(t){t!==D.current&&(D.current=t,f(t))}function R(t){O.current!==t&&(O.current=t,b(t))}function N(){y((0,h.calZmlScope)())}return O.current=g,D.current=o,(0,a.default)(e,"COURSE_EVENT",function(t){const{data:e}=t;let n=0;e&&e.page&&"number"==typeof e.page&&(n=e.page-1),"string"==typeof e.id&&(M(e.id),R(n))}),(0,i.useEffect)(()=>{!_.length>0||(A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{!async function(){if(o&&null!==g){const t=await e.send("whiteboard_page",g,o);if(t&&O.current===g&&D.current===o){const{drawToolDatas:e,zmlMessageDatas:i}=t;m["".concat(o,"_").concat(g)]||(console.log("",o,g),n.emit("drawTool",{action:"pushDataToLayer",payload:e,pageId:"".concat(o,"_").concat(g)}),m["".concat(o,"_").concat(g)]=!0);for(let t in i)i[t].forEach(e=>{n.emit("zmlMessage",{action:t,data:e},!0)})}else console.error("")}}()},300))},[o,g,_]),(0,i.useEffect)(()=>{if(_.length>0&&o){const t=_.find(t=>t.id===o);t&&(C(t.pageTotal),"pdf"===t.type?T(!0):T(!1),"zml"===t.type?E(!0):E(!1)),t||"".concat(o)==="".concat(zmSessionStorage.unkonwCourseware)||(e.send("QtAction",{action:"sendCommonMsgToQt",data:{event:"queryCourseResource"}}),console.error("",o,_,zmSessionStorage.coursewareReload),e.send("playerTrackEvent",{eventId:"CBG_ERROR_EVENT",eventParam:{id:o,list:_,describe:"id"}}),zmSessionStorage.unkonwCourseware=o,location.reload())}},[o,_]),(0,i.useEffect)(()=>(y((0,h.calZmlScope)()),window.addEventListener("resize",N),n.on("setPage",R),n.on("changeCouerseId",M),e.send("getCoursewareList").then(t=>{w(t)}),()=>{window.removeEventListener("resize",N),n.removeListener("setPage",R),n.removeListener("changeCouerseId",M)}),[]),(0,i.useEffect)(()=>{setTimeout(()=>{e.send("current_whiteboard_data").then(t=>{if(t&&t.data){const{currentLoad:e,sliderCurrentPage:n}=t.data;if(n&&e){const t=n[e];M(e),R(t||0)}}})},3e3)},[]),i.default.createElement(d.PlayerContext.Provider,{value:{pageNum:{value:g,setValue:R},courseware:{coursewareId:o,compositesSetCoursewareId:M,coursewareList:_,setCoursewareList:w},eventControllersInstance:e}},i.default.createElement("div",{className:"player-box"},i.default.createElement("div",{className:"player-content"},i.default.createElement("div",{className:"player-main",style:v(v({},p),{},{overflow:"hidden"})},_.length>0&&i.default.createElement(l.default,null),i.default.createElement(s.default,{isZML:S,isTeacher:I,pageNumValue:g,coursewareId:o,signalType:"draw_tools_data"}),!L&&i.default.createElement("div",{style:{display:x?"block":"none"}},i.default.createElement(c.default,{coursewareId:o,active:x,pageTotal:P,currentPage:g})),I&&S&&i.default.createElement(u.default,{coursewareId:o,currentPage:g})))))}b.propTypes={eventControllersInstance:o.default.object}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(6),n(11),n(22),n(107),n(30),n(109),n(110),n(24),n(111),n(15)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s,l,c,u,h,d){"use strict";var f=n(10),p=n(0);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function g(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?y(Object(i),!0).forEach(function(n){(0,e.default)(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let v;function m(t){const e=(0,s.isAudience)(),{pageNumValue:n,coursewareId:o,signalType:r,isTeacher:l,isZML:c}=t,{eventControllersInstance:f}=(0,i.useContext)(d.PlayerContext),{whiteBoardController:p}=f.controllers,[y,m]=(0,i.useState)(""),b=(0,i.useRef)(!1),_=(0,i.useRef)([]),[w,x]=(0,i.useState)(e?"":"pencursor-EF4C4F"),T=(0,i.useRef)(null),S=(0,i.useRef)(),E=(0,i.useRef)(),P=(0,i.useRef)(),[C,O]=(0,i.useState)(!1),[D,A]=(0,i.useState)(0),[k,I]=(0,i.useState)({});function L(t){const{action:e,payload:n,pageId:i}=t;"pushDataToLayer"===e&&console.log("pushDataToLayer:",b.current,i),b.current&&T.current?T.current[e](n,i):_.current.push(t)}function M(t){const{scrollRatio:e,heightRatio:n}=t;T.current.handleScroll(e*E.current.offsetHeight*n)}function R(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;v=[t,e,n];const{action:i,cursorIcon:o}=t;if(I(g(g({},t),e)),T.current){const{isFill:t}=e;"boolean"==typeof t&&T.current.setIsFill(t),x(o),m(i),T.current[i]?T.current[i]():(T.current.setToolKind(i,n),T.current.setLocalStyle(e))}}function N(t){if("text_edit"===k.action){const{offsetX:e,offsetY:n}=t;!function(t,e){const n=document.querySelector("#draw"),i=n.offsetWidth,o=n.offsetHeight,r=document.body.querySelectorAll("div[contenteditable=true]"),a=r[r.length-1];a&&(a.style.whiteSpace="nowrap",a.style.minWidth="".concat(Math.min(100,i-t),"px"),a.style.maxWidth="".concat(i-t-2,"px"),a.style.maxHeight="".concat(o-e-2,"px"))}(e,n)}}(0,u.default)(f,"PALETTE_EVENT",t=>{const{data:e}=t;R(e.kind,e.style,e.mark)}),(0,i.useEffect)(()=>{T.current=(0,h.default)(document.getElementById("draw"),PLAYER_USER_TYPE.teacher,r,f,()=>{b.current=!0,_.current.length&&(_.current.forEach(t=>{L(t)}),_.current=[])}),p.on("drawTool",L),p.on("drawtoolScroll",M);const t=E.current.offsetWidth;return A((+t/800).toFixed(4)),()=>{T.current.destroyed(),p.removeListener("drawTool",L),p.removeListener("drawtoolScroll",M)}},[]),(0,i.useEffect)(()=>{if("polygon_edit"===y){const t=v;R({action:"brush",cursorIcon:"pencursor-EF4C4F"},{strokeWidth:2,stroke:"#EF4C4F"},!1),setTimeout(()=>{t&&R(...t)},200)}O(!0),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{T.current.handleScroll(0),P.current=null,console.log("","".concat(o,"_").concat(n)),T.current.showLayerById("".concat(o,"_").concat(n)),O(!1)},200)},[n,o]);const F=t=>{if("eraser"!==k.action)return;S.current&&(S.current.style.display="block");const e=document.querySelector(".mockEraser");if(!e)return;const{strokeWidth:n}=k,i=n*D/2;e.style.width="".concat(n*D,"px"),e.style.height="".concat(n*D,"px"),e.style.transform="translate(".concat(t.offsetX-i,"px, ").concat(t.offsetY-i,"px)")},j=()=>{S.current&&(S.current.style.display="none")},U=()=>{let t="none";"eraser"===k.action&&(t="block"),S.current&&(S.current.style.display=t)};return(0,i.useEffect)(()=>(E.current.addEventListener("mousemove",F),E.current.addEventListener("mouseenter",U),E.current.addEventListener("mouseleave",j),function(){E.current.addEventListener("mousemove",F),E.current.addEventListener("mouseenter",U),E.current.addEventListener("mouseleave",j)}),[k]),i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{id:"draw",ref:E,onWheel:function(t){e||0===t.deltaY||p.emit("teacherWheel",t.deltaY>0)},className:"drawTools-draw ".concat(w),style:{zIndex:"point"===y&&!e||C?-1:1},onClick:t=>N(t.nativeEvent)},e&&i.default.createElement("div",{className:"drawTools-cover"}),i.default.createElement("div",{style:{opacity:"eraser"!==k.action?0:1},ref:S,className:"drawTool-mockEraser mockEraser"})),l&&c&&i.default.createElement("div",{style:{display:"point"===y?"none":"block"}},i.default.createElement(a.default,null)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=p(e),i=f(i),o=p(o),a=p(a),u=p(u),h=p(h),m.propTypes={pageNumValue:o.default.number,coursewareId:o.default.string,signalType:o.default.string,dataPipe:o.default.func,userInfo:o.default.object,isTeacher:o.default.bool,isZml:o.default.bool};var b=(0,r.connect)(t=>{let{userInfo:e}=t;return{userInfo:e}},()=>({}))(m);t.default=b})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(6),n(11),n(14),n(15),n(22),n(108)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s,l){"use strict";var c=n(10),u=n(0);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function d(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?h(Object(i),!0).forEach(function(n){(0,e.default)(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function f(t){const[e,n]=(0,i.useState)(!0),{zmlCoverEleList:o}=t;(0,i.useEffect)(()=>{document.addEventListener("mousedown",t=>{"cover-ele"!==t.target.getAttribute("tag")&&(()=>n(!1))()}),document.addEventListener("mouseup",()=>{(()=>n(!0))()})},[]);const{userInfo:{progress:s}}=r.default.getState(),l=s===a.lessonProgress.in;return i.default.createElement("div",{className:"coverElements-box"},o.map((t,n)=>i.default.createElement("div",{tag:"cover-ele",onClick:e=>l&&function(t,e){e.handleClick({x:e.x+t.nativeEvent.offsetX,y:e.y+t.nativeEvent.offsetY})}(e,t),key:n,style:d(d({},t),{},{display:e?"block":"none"}),className:"coverElements-coverItem ".concat(l?"none":"coverElements-disable")})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=u(e),i=c(i),o=u(o),r=u(r),f.propTypes={zmlCoverEleList:o.default.array};var p=(0,s.connect)(t=>{let{zmlCoverEleList:e}=t;return{zmlCoverEleList:e}},()=>({}))(f);t.default=p})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(112),n(192)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n,o,r,a){return n===PLAYER_USER_TYPE.teacher?new i.default(t,o,r,a):new e.default(t,o,r,a)},e=o(e),i=o(i)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(47)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=i(e),t.default=class extends e.default{}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.makeUid=e.hideRoboPen=e.roboPenDataPush=e.zmSketchPad=void 0;var t=n(17),i=n(114),o=n(189),r=n(191),a=n(12);e.zmSketchPad=window.zmSketchPad=function(e,n,r,a){var s=new i.App(n,e,r,a);return(0,o.api)(s),(0,t.mount)(e,s),s},e.roboPenDataPush=function(t,e){(0,r.init)(t,e)},e.hideRoboPen=function(){(0,r.hideRoboPen)()},e.makeUid=function(){return(0,a.makeUUID)()}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.App=void 0;var t=n(17),i=(n(31),n(115),n(116)),o=n(187),r=n(12),a=n(188);e.App=function(){function e(n,s,l,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),console.log((0,r.getUrlVars)("type"));var u="recordplay"===(0,r.getUrlVars)("type");this.el=(0,t.el)(".app",{style:"position:relative;overflow-x: hidden;"},this.canvas=new i.Canvas(u,c),this.editText=new o.EditText(this.canvas),this.recordplay=u?new a.RecordControl(this.canvas):""),this.data={},this.canvas.dataCallBack=n,this.canvas.parentDom=s,this.canvas.resizeCb=l,this.canvas.editText=this.editText}return e.prototype.update=function(t){console.log("App update",t);var e=t.hello;this.recordplay.update(e),this.data=t},e.prototype.destroy=function(){(0,t.unmount)(this.canvas.parentDom,this)},e}()})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Hello=void 0;var t=n(17);e.Hello=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=(0,t.el)("h1","Hello ",this.subject=(0,t.text)("RE:DOM"),"!")}return e.prototype.update=function(t){var e=t.subject;this.subject.textContent=e||"RE:DOM",this.data=t},e}()})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Canvas=void 0;var t,i=n(17),o=n(32),r=n(12),a=n(31),s=(t=n(34))&&t.__esModule?t:{default:t},l=n(8),c=n(184),u=n(186),h=[l.DRAWTOOL_ROBOPEN,l.DRAWTOOL_SMOOTHLINE,l.DRAWTOOL_PRESSUREPEN],d=[l.DRAWTOOL_ELLIPSE_EDIT,l.DRAWTOOL_CIRCLE_EDIT,l.DRAWTOOL_LINE_EDIT,l.DRAWTOOL_LINEDASH_EDIT,l.DRAWTOOL_LINEARROW_EDIT,l.DRAWTOOL_LINEARROWDASH_EDIT,l.DRAWTOOL_COORDSYS_EDIT];e.Canvas=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=(0,i.el)("div.canvas"),this.stage=null,this.isRecord=e,this.originSize={width:800,height:450},this.templayer=null,this.showlayer=null,this.canvasaction=null,this.resizeEventListener=this.resizeEventListener.bind(this),this.resizeDetail=this.resizeDetail.bind(this),this.clearLocalDraw=this.clearLocalDraw.bind(this),this.stageY=this.stageY.bind(this),this.showLayerById=this.showLayerById.bind(this),this.redraw=this.redraw.bind(this),this.filterCacheData=this.filterCacheData.bind(this),this.replayHashMap={},this.recordPlayedIndex=0,this.recordPlayingTime=0,this.recordPlayedTimeReducer=0,this.scaletoserver=null,this.whiteboarddata={duration:0,whiteboard:[]},this.msgport=null,this.dataCallBack=null,this.parentDom=null,this.cacheDataInstance=new u.CacheData,this.heightScale=1,this.zoom=1,this.resizeCb=null,this.options=n,this.imgCache={},this.imgTemp={},this.rotateTimeOuter=null,this.rotateTmp=null,this.char_begin=65,this.makeCharLabel=this.makeCharLabel.bind(this),this.getCharLabel=this.getCharLabel.bind(this),this.changeCharLabel=this.changeCharLabel.bind(this),this.resetCharLabel=this.resetCharLabel.bind(this)}return t.prototype.makeCharLabel=function(){return this.char_begin++,this.getCharLabel()},t.prototype.getCharLabel=function(){var t=Math.floor((this.char_begin-65)/26),e=(this.char_begin-65)%26;return t>0?""+String.fromCharCode(e+65)+t:""+String.fromCharCode(e+65)},t.prototype.changeCharLabel=function(t){this.char_begin=this.char_begin+t},t.prototype.resetCharLabel=function(){this.char_begin=65},t.prototype.showLayerById=function(t){if(this.cacheDataInstance.currentLayerId!==t){this.cacheDataInstance.currentLayerId=t,this.canvasaction.removeSelectShape(),this.showlayer.destroyChildren(),this.resetCharLabel(),this.canvasaction.deleteTempShape();var e=this.scaletoserver,n=this.filterCacheData(this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId]);if(n)for(var i=0;i<n.length;i++){var o=n[i];this.replayDataItem(o,e,"replayData")}this.showlayer.batchDraw()}},t.prototype.filterCacheData=function(t){var e=[],n=[],i=[];if(t)for(var o=t.length,a=o-1;a>-1;a--){var s=t[a],c=(s[0],s[1],s[2]),u=s[3],h=(s[4],s[5],s[6]);u===l.DRAWTOOL_EDIT_RECOVER&&(n.push(h[0]),e.push(c)),n.includes((0,r.getActionItemUid)(s))&&e.push(c),e.includes(c)||i.unshift(s)}return i},t.prototype.redraw=function(){var t=this.scaletoserver,e=this.filterCacheData(this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId]);e.length>0&&this.resetCharLabel();for(var n=0;n<e.length;n++){var i=e[n];this.replayDataItem(i,t,"replayData")}},t.prototype.clearDataToLayer=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],layerid?this.cacheDataInstance.layerCachData[layerid]=[]:this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId]=[]},t.prototype.setDataToLayer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.length;if(n>0){var i=this.scaletoserver;null!==e?this.cacheDataInstance.layerCachData[e]=[]:this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId]=[];var o=null===e||null!==e&&this.cacheDataInstance.currentLayerId===e;o&&(this.showlayer.destroyChildren(),this.resetCharLabel());for(var r=0;r<n;r++){var a=t[r];e?this.cacheDataInstance.layerCachData[e].push(a):this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId].push(a)}if(o){var s=this.filterCacheData(t);if(s)for(var l=0;l<s.length;l++){var c=s[l];this.replayDataItem(c,i,"replayData")}}this.showlayer.batchDraw()}},t.prototype.pushDataToLayer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.length;if(n>0){var i=this.scaletoserver;this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId]||(this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId]=[]),e&&!this.cacheDataInstance.layerCachData[e]&&(this.cacheDataInstance.layerCachData[e]=[]);for(var o=0;o<n;o++){var r=t[o];e?this.cacheDataInstance.layerCachData[e].push(r):this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId].push(r),(null===e||null!==e&&this.cacheDataInstance.currentLayerId===e)&&this.replayDataItem(r,i,"replayData")}this.showlayer.batchDraw()}},t.prototype.rotateDetail=function(t,e,n,i){if(i===this.cacheDataInstance.currentLayerId){this.imagelayer.destroyChildren();var o=t.width,r=t.height,a=!1;1===this.heightScale?o=t.height/e.naturalHeight*e.naturalWidth:(r=t.width/e.naturalWidth*e.naturalHeight)>t.height&&(r=t.height,o=r/e.naturalHeight*e.naturalWidth,a=!0);var c=(t.width-o)/2,u=o,h=r,d=0;a&&(c=0),90===n?1===this.heightScale?(u=r,h=r*e.naturalHeight/e.naturalWidth,c=t.width-(t.width-r*e.naturalHeight/e.naturalWidth)/2):(u=t.width*l.CANVAS_RATIO,h=u*e.naturalHeight/e.naturalWidth,h=t.width,u=h/e.naturalHeight*e.naturalWidth,c=t.width-(t.width-u*e.naturalHeight/e.naturalWidth)/2):180===n?(c=t.width-(a?t.width-o:(t.width-o)/2),d=h):270===n&&(1===this.heightScale?(u=r,h=r*e.naturalHeight/e.naturalWidth,c=(t.width-h)/2,d=u):(u=t.width*l.CANVAS_RATIO,h=u*e.naturalHeight/e.naturalWidth,h=t.width,u=h/e.naturalHeight*e.naturalWidth,c=(t.width-h)/2,d=u));var f=new s.default.Image({image:e,y:d/this.stage.scale().y,x:c/this.stage.scale().x,rotation:n,width:u/this.stage.scale().x,height:h/this.stage.scale().y});this.imagelayer.add(f),this.imagelayer.batchDraw()}},t.prototype.rotate=function(t,e,n){var i=this;this.rotateTmp={deg:t,src:e,id:n},this.rotateTimeOuter&&clearTimeout(this.rotateTimeOuter),this.rotateTimeOuter=setTimeout(function(){i.imgTemp[n]&&(i.imgTemp[n].src="");var o=i.resize();t=t>360?t%360:t;var r=void 0;if(i.imgCache[n])r=i.imgCache[n],i.rotateDetail(o,r,t,n);else{var a=new s.default.Text({x:(i.stage.getWidth()/2-90)/i.stage.scale().x,y:(i.stage.getWidth()*l.CANVAS_RATIO/2-15)/i.stage.scale().y,text:"...",fill:"#566DAC",fontSize:30});n===i.cacheDataInstance.currentLayerId&&(i.imagelayer.add(a),i.imagelayer.batchDraw()),(r=new Image).src=e,i.imgTemp[n]=r,r.onload=function(){i.imgCache[n]=r,delete i.imgTemp[n],i.rotateDetail(o,r,t,n)},r.onerror=function(){a.text(""),i.imagelayer.batchDraw()}}},200)},t.prototype.init=function(){var t=this.resize();this.stage=new s.default.Stage(Object.assign({container:this.el},this.originSize)),this.options&&this.options.pixelRatioFixed&&(s.default.pixelRatio=1),this.stage.size(t);var e=t.width/this.originSize.width;this.stage.scale({x:e,y:e}),this.templayer=new s.default.Layer({name:"templayer"}),this.showlayer=new s.default.Layer({name:"showlayer"}),this.templayer.hitGraphEnabled(!1),this.showlayer.hitGraphEnabled(!1),(0,r.reBuildTextStroke)(this.templayer),(0,r.reBuildTextStroke)(this.showlayer),this.options&&this.options.hasImgLayer&&(this.imagelayer=new s.default.Layer({name:"imagelayer"}),this.imagelayer.hitGraphEnabled(!1),this.stage.add(this.imagelayer)),this.stage.add(this.showlayer),this.stage.add(this.templayer),this.canvasaction=new c.CanvasAction(this.stage,this.cacheDataInstance,this.options),this.stage.canvasaction=this.canvasaction,this.stage.showlayer=this.showlayer,this.stage.templayer=this.templayer,this.stage.resetCharLabel=this.resetCharLabel,this.stage.getCharLabel=this.getCharLabel,this.stage.makeCharLabel=this.makeCharLabel,this.stage.changeCharLabel=this.changeCharLabel,this.canvasaction.scaletoserver=this.scaletoserver,this.canvasaction.dataCallBack=this.dataCallBack,this.canvasaction.parentDom=this.parentDom,this.canvasaction.redraw=this.redraw,this.canvasaction.editText=this.editText,this.canvasaction.heightScale=this.heightScale,this.showLayerById(1),this.isRecord||this.canvasaction.initEvent(),this.resizeCb&&this.resizeCb(this.originSize)},t.prototype.onmount=function(){console.log("onmount onmount"),this.init(),this.options&&this.options.disabledResize||this.resizeEvent()},t.prototype.onunmount=function(){window.removeEventListener("resize",this.resizeEventListener),this.canvasaction&&this.canvasaction.removeEvent()},t.prototype.setZoom=function(t){this.zoom=t,this.resizeEventListener()},t.prototype.resize=function(){var t=this.parentDom.clientWidth*this.zoom,e=this.parentDom.clientHeight*this.zoom,n=t*l.CANVAS_RATIO,i=null;return n>e?(this.scaletoserver=e/l.CANVAS_HEIGHT,i={width:e/l.CANVAS_RATIO,height:e*this.heightScale}):(this.scaletoserver=t/l.CANVAS_WIDTH,i={width:t,height:t*l.CANVAS_RATIO*this.heightScale}),this.canvasaction&&(this.canvasaction.scaletoserver=this.scaletoserver),i},t.prototype.resizeEventListener=function(){this.resizeDetail(),this.resizeCb&&this.resizeCb(this.resize())},t.prototype.resizeDetail=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.resize();if(this.options&&this.options.disableScaleStage){var n={width:e.width,height:e.height/this.heightScale};this.stage.size(n);var i=t?n.height:e.height;this.el.parentElement.style.height=i+"px"}else this.stage.size(e);var o=e.width/this.originSize.width;this.stage.scale({x:o,y:o}),this.stage.draw(),this.resizeEditText()},t.prototype.resizeEditText=function(){if(this.canvasaction.tooltype===l.DRAWTOOL_TEXTTOOL_EDIT||this.canvasaction.tooltype===l.DRAWTOOL_SELCTE_SHAPE)if(this.canvasaction.shape&&this.canvasaction.shape.toolname===l.DRAWTOOL_TEXTTOOL_EDIT)this.canvasaction.shape.textarea.isConnected&&this.canvasaction.shape.resizeTextArea(this.canvasaction.shape.shape);else{var t=this.showlayer.find("Text").filter(function(t){return t.getAttr("isEdit")});t.forEach(function(t){t.me.resizeTextArea(t)})}},t.prototype.stageY=function(t){this.stage.y(t),this.resizeEditText()},t.prototype.scaleHeight=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.heightScale=t,this.canvasaction.heightScale=t;var n=this.resize();if(this.options&&this.options.disableScaleStage){var i={width:n.width,height:n.height/this.heightScale};this.stage.size(i);var o=e?i.height:n.height;this.el.parentElement.style.height=o+"px"}else this.stage.size(n);this.resizeCb&&this.resizeCb(n)},t.prototype.resizeEvent=function(){window.addEventListener("resize",this.resizeEventListener)},t.prototype.replayData=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.testdata,e=t.whiteboard.length,n=this.scaletoserver,i=0;i<e;i++){var o=t.whiteboard[i].data;this.replayDataItem(o,n,"replayData")}},t.prototype.editLayerPush=function(t,e,n){var i=e[6][1],o=i.length;if(t.toolname===l.DRAWTOOL_POLYGON_EDIT){for(var r=0;r<o;r+=2){var a={x:i[r]*n,y:i[r+1]*n};t.pushPoint(a),t.pushControlPoint(a)}t.pushPoint({x:i[0]*n,y:i[1]*n})}else if(d.includes(t.toolname))for(var r=0;r<o;r+=2){var s={x:i[r]*n,y:i[r+1]*n};t.pushPoint(s)}else if(t.toolname===l.DRAWTOOL_TEXTTOOL_EDIT){var c={x:e[0]*n,y:e[1]*n};t.pushPoint(c),t.text=i}t.draw(),t.endDraw()},t.prototype.replayDataItem=function(t,e,n){var i=this.replayHashMap[t[2]],r=t[0]*e,a=t[1]*e,s=1;if(i)h.includes(i.toolname)&&(s=t[5]||t[3],i.pressure=s),i.pushPoint({x:r,y:a},i.toolname===l.DRAWTOOL_SMOOTHLINE?t[6]||t[4]:null),!0===t[t.length-1]?(i.draw(),i.endDraw(i.toolname===l.DRAWTOOL_SMOOTHLINE?t[4]:null),delete this.replayHashMap[t[2]]):(this.isRecord||"mockpen"===n)&&i.draw();else{var c=(0,o.makeShapeInstance)(t[3]);if(t.length<4||!Array.isArray(t[4]))return;var u=t[4][1],d=!1,f=!1,p=!1,y=!1,g=!0;4===t[4].length&&"linearrow"!==t[3]&&(u=t[4][2],1===t[4][1]&&(f=!0),1===t[4][3]&&(d=!0)),"line"===t[3]&&1===t[4][2]&&(d=!0),"triangle"===t[3]?(u=t[4][1],1===t[4][7]&&(f=!0),1===t[4][6]&&(d=!0)):"star"===t[3]?1===t[4][2]&&(f=!0):h.includes(t[3])?(s=t[5],this.stage.heightScale=this.heightScale):t[3]===l.DRAWTOOL_RECT_EDIT?p=t[6][0]:t[3]===l.DRAWTOOL_POLYGON_EDIT?(p=t[6][0],y=!0,g=!!t[6][2]):t[3]===l.DRAWTOOL_ELLIPSE_EDIT?(p=t[6][0],y=!0,g=!!t[6][2]):t[3]===l.DRAWTOOL_CIRCLE_EDIT?(p=t[6][0],y=!0,g=!!t[6][2]):t[3]===l.DRAWTOOL_SIMPLE_ELLIPSE_EDIT?p=t[6][0]:t[3]===l.DRAWTOOL_SIMPLE_TRIANGLE_EDIT?(p=t[6][0],1===t[4][7]&&(f=!0),1===t[4][6]&&(d=!0)):t[3]===l.DRAWTOOL_LINE_EDIT?(p=t[6][0],y=!0,g=!!t[6][2]):t[3]===l.DRAWTOOL_TEXTTOOL_EDIT?(p=t[6][0],y=!0):t[3]===l.DRAWTOOL_LINEDASH_EDIT?(p=t[6][0],y=!0,g=!!t[6][2]):t[3]===l.DRAWTOOL_LINEARROW_EDIT?(p=t[6][0],y=!0,g=!!t[6][2]):t[3]===l.DRAWTOOL_LINEARROWDASH_EDIT?(p=t[6][0],y=!0,g=!!t[6][2]):t[3]===l.DRAWTOOL_COORDSYS_EDIT?(p=t[6][0],y=!0):t[3]===l.DRAWTOOL_PENCIL&&(p=t[6]&&t[6][0]);var v=new c(this.stage,f?{stroke:u,fill:u}:{stroke:u,strokeWidth:t[4][0],fontSize:t[4][0]},t[2],t[3],n,t[6]);if(v.isFill=f,v.isShift=d,v.pressure=s,v.uid=p,v.isTempAchor=g,y)return void this.editLayerPush(v,t,e);v.pushPoint({x:r,y:a},v.toolname===l.DRAWTOOL_SMOOTHLINE?t[6]||t[4]:null),!0===t[t.length-1]||v.toolname===l.DRAWTOOL_TEXTTOOL?([l.DRAWTOOL_TRIANGLE,l.DRAWTOOL_SIMPLE_TRIANGLE_EDIT].includes(v.toolname)?(v.pushPoint({x:t[4][2]*e,y:t[4][3]*e}),v.pushPoint({x:t[4][4]*e,y:t[4][5]*e})):[l.DRAWTOOL_LINEARROW].includes(v.toolname)&&v.pushPoint({x:t[4][2]*e,y:t[4][3]*e}),v.draw(),v.endDraw(v.toolname===l.DRAWTOOL_SMOOTHLINE?t[4]:null)):this.replayHashMap[t[2]]=v,!0===t[t.length-1]&&delete this.replayHashMap[t[2]]}},t.prototype.clearLocalDraw=function(){var t=this.replayHashMap;for(var e in t)if(Number.isInteger(Number(e))&&t[e]){var n=t[e].middlePoints,i=this.stage.scale().x,o=this.canvasaction.dataToServer([n[n.length-2]*i,n[n.length-1]*i,t[e].clientid,t[e].pressure,!0]);console.log("pointArr pointArr",o,i),this.replayDataItem(o,this.scaletoserver,"mockpen"),this.canvasaction.dataCallBack(o)}},t.prototype.initRecordData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.testdata;this.whiteboarddata=t,(0,a.dispatch)(this,"duration",this.whiteboarddata.duration),(0,a.dispatch)(this,"playingtime",0)},t.prototype.recordPlay=function(){var t=this;this.recordPlayingTime=performance.now(),requestAnimationFrame(function e(){var n=performance.now()-t.recordPlayingTime;if((0,a.dispatch)(t,"playingtime",n),t.whiteboarddata.whiteboard[t.recordPlayedIndex].timespan+t.recordPlayedTimeReducer<=n){var i=t.scaletoserver;if(t.replayDataItem(t.whiteboarddata.whiteboard[t.recordPlayedIndex].data,i),t.recordPlayedIndex++,t.recordPlayedIndex===t.whiteboarddata.whiteboard.length)return;t.recordPlayedTimeReducer+=t.whiteboarddata.whiteboard[t.recordPlayedIndex].timespan}requestAnimationFrame(e)})},t.prototype.update=function(t){this.data=t},t}()})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Brush=void 0;var t=n(5),i=n(33);e.Brush=function(t){function e(n,o,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,r,a,s));return o.listening=!1,o.shadowForStrokeEnabled=!1,o.transformsEnabled="position",o.hitStrokeWidth=0,l.shape=new Konva.Line(o),l.shape.lineCap("round"),l.shape.lineJoin("round"),l.shape.sceneFunc(i.sceneFunc),l.templayer.add(l.shape),l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.style.stroke],[],[this.uid]]},e.prototype.draw=function(){this.shape.points(this.middlePoints),"replayData"!==this.showtype&&this.templayer.batchDraw()},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Rect=void 0;var t=n(5);e.Rect=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return i.listening=!1,i.shadowForStrokeEnabled=!1,i.transformsEnabled="position",s.shape=new Konva.Rect(i),s.templayer.add(s.shape),s.startData=null,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return this.startData=[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.isFill?1:0,this.isFill?this.style.fill:this.style.stroke,this.isShift?1:0]],null},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return this.startData&&(this.startData[4][3]=this.isShift?1:0),[this.startData,[t.x,t.y,this.clientid,!0]]},e.prototype.draw=function(){this.middlePoints.length>3&&(this.shape.x(this.middlePoints[0]),this.shape.y(this.middlePoints[1]),this.isShift?(this.shape.width(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0]),this.shape.height(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0])):(this.shape.width(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0]),this.shape.height(this.middlePoints[this.middlePoints.length-1]-this.middlePoints[1])),"replayData"!==this.showtype&&this.templayer.batchDraw())},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Line=void 0;var t=n(5);e.Line=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return i.lineJoin="round",i.listening=!1,i.transformsEnabled="position",i.shadowForStrokeEnabled=!1,s.shape=new Konva.Line(i),s.templayer.add(s.shape),s.startData=null,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return this.startData=[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.style.stroke,this.isShift?1:0]],null},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return this.startData&&(this.startData[4][2]=this.isShift?1:0),[this.startData,[this.isShift?this.shape.points()[this.shape.points().length-2]*this.stage.scale().x:t.x,this.isShift?this.shape.points()[this.shape.points().length-1]*this.stage.scale().x:t.y,this.clientid,!0]]},e.prototype.draw=function(){this.middlePoints.length>3&&(this.isShift?Math.abs(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0])<Math.abs(this.middlePoints[this.middlePoints.length-1]-this.middlePoints[1])?this.shape.points([this.middlePoints[0],this.middlePoints[1],this.middlePoints[0],this.middlePoints[this.middlePoints.length-1]]):this.shape.points([this.middlePoints[0],this.middlePoints[1],this.middlePoints[this.middlePoints.length-2],this.middlePoints[1]]):this.shape.points([this.middlePoints[0],this.middlePoints[1],this.middlePoints[this.middlePoints.length-2],this.middlePoints[this.middlePoints.length-1]])),"replayData"!==this.showtype&&this.templayer.batchDraw()},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.LineArrow=void 0;var t=n(5);e.LineArrow=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return s.lastPoint=null,i.listening=!1,i.shadowForStrokeEnabled=!1,i.transformsEnabled="position",s.shape=new Konva.Arrow(Object.assign({},{pointerLength:20,pointerWidth:10,fill:i.stroke},i)),s.templayer.add(s.shape),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return[[this.middlePoints[0]*this.stage.scale().x,this.middlePoints[1]*this.stage.scale().x,this.clientid,this.toolname,[this.style.strokeWidth,this.style.stroke,this.middlePoints[this.middlePoints.length-2]*this.stage.scale().x,this.middlePoints[this.middlePoints.length-1]*this.stage.scale().x],!0]]},e.prototype.pushPoint=function(e){this.middlePoints.length>3&&this.isShift?Math.abs(e.x/this.stage.scale().x-this.middlePoints[0])<Math.abs(e.y/this.stage.scale().x-this.middlePoints[1])?t.prototype.pushPoint.call(this,{x:this.middlePoints[0]*this.stage.scale().x,y:e.y}):t.prototype.pushPoint.call(this,{x:e.x,y:this.middlePoints[1]*this.stage.scale().x}):t.prototype.pushPoint.call(this,e)},e.prototype.draw=function(){this.middlePoints.length>3&&this.shape.points([this.middlePoints[0],this.middlePoints[1],this.middlePoints[this.middlePoints.length-2],this.middlePoints[this.middlePoints.length-1]]),"replayData"!==this.showtype&&this.templayer.batchDraw()},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Ellipse=void 0;var t=n(5);e.Ellipse=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return i.listening=!1,i.shadowForStrokeEnabled=!1,i.transformsEnabled="position",s.shape=new Konva.Ellipse(i),s.templayer.add(s.shape),s.startData=null,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return this.startData=[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.isFill?1:0,this.isFill?this.style.fill:this.style.stroke,this.isShift?1:0]],null},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return this.startData&&(this.startData[4][3]=this.isShift?1:0),[this.startData,[t.x,t.y,this.clientid,!0]]},e.prototype.draw=function(){if(this.middlePoints.length>3){var t={x:this.middlePoints[0],y:this.middlePoints[1]},e={x:this.middlePoints[this.middlePoints.length-2],y:this.middlePoints[this.middlePoints.length-1]};if(this.isShift){var n=Math.min(Math.abs((e.x-t.x)/2),Math.abs((e.y-t.y)/2));t.x<e.x?(this.shape.x(t.x+n),this.shape.y(t.y+n)):(this.shape.x(t.x-n),this.shape.y(t.y-n)),this.shape.radius({x:n,y:n})}else this.shape.x((t.x+e.x)/2),this.shape.y((t.y+e.y)/2),this.shape.radius({x:Math.abs(t.x-e.x)/2,y:Math.max(Math.abs(t.y-e.y)/2,2)});"replayData"!==this.showtype&&this.templayer.batchDraw()}},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Eraser=void 0;var t=n(5);e.Eraser=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return i.stroke="white",i.lineJoin="round",i.lineCap="round",i.listening=!1,i.shadowForStrokeEnabled=!1,i.transformsEnabled="position",i.hitStrokeWidth=0,s.shape=new Konva.Line(i),s.shape.globalCompositeOperation("destination-out"),s.cloneShape=s.shape.clone(),s.showlayer.add(s.cloneShape),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth],[],[this.uid]]},e.prototype.draw=function(){this.cloneShape.points(this.middlePoints),"replayData"!==this.showtype&&this.cloneShape.draw()},e.prototype.endDraw=function(){},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.EraserRectangle=void 0;var t=n(5);e.EraserRectangle=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return s.shape=new Konva.Rect(Object.assign({},{fill:"green",shadowEnabled:!1,strokeWidth:1,opacity:.4,listening:!1,shadowForStrokeEnabled:!1,transformsEnabled:"position",hitStrokeWidth:0})),s.templayer.add(s.shape),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth||1],[],[this.uid]]},e.prototype.draw=function(){this.middlePoints.length>3&&(this.shape.x(this.middlePoints[0]),this.shape.y(this.middlePoints[1]),this.shape.width(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0]),this.shape.height(this.middlePoints[this.middlePoints.length-1]-this.middlePoints[1]),"replayData"!==this.showtype&&this.templayer.batchDraw())},e.prototype.endDraw=function(){this.shape.globalCompositeOperation("destination-out"),this.shape.opacity(1),t.prototype.endDraw.call(this)},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Triangle=void 0;var t=n(5);e.Triangle=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return i.listening=!1,i.shadowForStrokeEnabled=!1,i.transformsEnabled="position",s.shape=new Konva.Shape(i),s.templayer.add(s.shape),s.shiftPois=null,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return[[this.middlePoints[0]*this.stage.scale().x,this.middlePoints[1]*this.stage.scale().x,this.clientid,this.toolname,[this.style.strokeWidth,this.isFill?this.style.fill:this.style.stroke,this.shiftPois[0]*this.stage.scale().x,this.shiftPois[1]*this.stage.scale().x,(this.shiftPois.length<4?this.shiftPois[0]:this.shiftPois[2])*this.stage.scale().x,(this.shiftPois.length<4?this.shiftPois[1]:this.shiftPois[3])*this.stage.scale().x,this.isShift?1:0,this.isFill?1:0],!0]]},e.prototype.draw=function(){if(this.middlePoints.length>3){var t={x:this.middlePoints[0],y:this.middlePoints[1]},e={x:this.middlePoints[this.middlePoints.length-2],y:this.middlePoints[this.middlePoints.length-1]},n=this;this.shape.sceneFunc(function(i){if(i.beginPath(),i.moveTo(t.x,t.y),n.isShift){var o=(e.y-t.y)/Math.sqrt(3)+t.x,r=t.x-(e.y-t.y)/Math.sqrt(3);i.lineTo(o,e.y),i.lineTo(r,e.y),n.shiftPois=[o,e.y,r,e.y]}else if((""+n.clientid).indexOf(".")>0){var a={x:n.middlePoints[n.middlePoints.length-4],y:n.middlePoints[n.middlePoints.length-3]};i.lineTo(a.x,a.y),i.lineTo(e.x,e.y),n.shiftPois=[a.x,a.y,e.x,e.y]}else{var s={x:2*t.x-e.x,y:e.y};s.y===t.y&&(s.y=t.y+1,e.y=e.y+1),i.lineTo(e.x,e.y),i.lineTo(s.x,s.y),n.shiftPois=[e.x,e.y,s.x,s.y]}i.closePath(),i.fillStrokeShape(this)}),"replayData"!==this.showtype&&this.templayer.batchDraw()}},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Star=void 0;var t=n(5);e.Star=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return i.listening=!1,i.shadowForStrokeEnabled=!1,i.transformsEnabled="position",s.shape=new Konva.Star(Object.assign({},{numPoints:5},i)),s.templayer.add(s.shape),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.isFill?this.style.fill:this.style.stroke,this.isFill?1:0]]},e.prototype.draw=function(){if(this.middlePoints.length>3){var t={x:this.middlePoints[0],y:this.middlePoints[1]},e={x:this.middlePoints[this.middlePoints.length-2],y:this.middlePoints[this.middlePoints.length-1]};this.shape.x(t.x),this.shape.y(t.y);var n=Math.abs(e.x-t.x);this.shape.setInnerRadius(n),this.shape.setOuterRadius(2.5*n),"replayData"!==this.showtype&&this.templayer.batchDraw()}},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.Text=void 0;var t=n(5);e.Text=function(t){function e(n,i,o,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r));return l.shape=new Konva.Text({fill:i.stroke,fontFamily:i.fontFamily||"microsoft yahei",fontSize:i.fontSize||14}),l.text=s,l.templayer.add(l.shape),l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return[[t.x,t.y,this.clientid,this.toolname,[this.style.fontSize||14,this.style.stroke],!0,this.text]]},e.prototype.draw=function(){this.middlePoints.length>0&&(this.shape.x(this.middlePoints[0]),this.shape.y(this.middlePoints[1]),this.shape.text(this.text),"replayData"!==this.showtype&&this.templayer.batchDraw())},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.PressurePen=void 0;var t=n(5);n(33),n(34);var i=function(t){var e=this.getPoints(),n=e.length,i=this.getClosed();n&&(t.beginPath(),t.moveTo(e[0],e[1]),t.quadraticCurveTo(e[2],e[3],e[4],e[5]),i?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this))};e.PressurePen=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return s.style.listening=!1,s.style.shadowForStrokeEnabled=!1,s.style.transformsEnabled="position",s.style.hitStrokeWidth=0,s.lastPoi=null,s.shapeArr=[],s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.style.stroke],this.pressure]},e.prototype.centerDataTemp=function(t){return[t.x,t.y,this.clientid,this.pressure]},e.prototype.endDataTemp=function(t){return[[t.x,t.y,this.clientid,this.pressure,!0]]},e.prototype.pushPoint=function(e){if(t.prototype.pushPoint.call(this,e),performance.now(),6===this.middlePoints.length){var n=[this.middlePoints[0],this.middlePoints[1]],o=[this.middlePoints[2],this.middlePoints[3]],r=[(this.middlePoints[2]+this.middlePoints[4])/2,(this.middlePoints[3]+this.middlePoints[5])/2];this.lastPoi=r;var a=new Konva.Line(this.style);a.lineJoin("round"),a.lineCap("round"),a.strokeWidth(this.style.strokeWidth*this.pressure),a.sceneFunc(i),a.points(n.concat(o).concat(r)),this.showlayer.add(a),"replayData"===this.showtype||a.draw()}else if(this.middlePoints.length>6){var s=this.lastPoi,l=this.middlePoints.slice(-4),c=[l[0],l[1]],u=[(l[0]+l[2])/2,(l[1]+l[3])/2];this.lastPoi=u;var h=new Konva.Line(this.style);h.lineJoin("round"),h.lineCap("round"),h.strokeWidth(this.style.strokeWidth*this.pressure),h.sceneFunc(i),h.points(s.concat(c).concat(u)),this.showlayer.add(h),"replayData"===this.showtype||h.draw()}},e.prototype.draw=function(){},e.prototype.endDraw=function(){},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(129),i=n(134),o=n(135),r=n(136),a=n(137),s=n(138),l=n(139),c=n(51),u=n(52),h=n(53),d=n(140),f=n(141),p=n(142),y=n(143),g=n(54),v=n(144),m=n(145),b=n(146),_=n(147),w=n(148),x=n(149),T=n(150),S=n(151),E=n(152),P=n(153),C=n(154),O=n(155),D=n(156),A=n(157),k=n(158),I=n(159),L=n(160),M=n(161),R=n(162),N=n(163),F=n(164),j=n(165);e.Konva=t.Konva.Util._assign(t.Konva,{Arc:i.Arc,Arrow:o.Arrow,Circle:r.Circle,Ellipse:a.Ellipse,Image:s.Image,Label:l.Label,Tag:l.Tag,Line:c.Line,Path:u.Path,Rect:h.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:p.Sprite,Star:y.Star,Text:g.Text,TextPath:v.TextPath,Transformer:m.Transformer,Wedge:b.Wedge,Filters:{Blur:_.Blur,Brighten:w.Brighten,Contrast:x.Contrast,Emboss:T.Emboss,Enhance:S.Enhance,Grayscale:E.Grayscale,HSL:P.HSL,HSV:C.HSV,Invert:O.Invert,Kaleidoscope:D.Kaleidoscope,Mask:A.Mask,Noise:k.Noise,Pixelate:I.Pixelate,Posterize:L.Posterize,RGB:M.RGB,RGBA:R.RGBA,Sepia:N.Sepia,Solarize:F.Solarize,Threshold:j.Threshold}})})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(2),i=n(4),o=n(7),r=n(18),a=n(130),s=n(131),l=n(132),c=n(35),u=n(25),h=n(9),d=n(36),f=n(133),p=n(48),y=n(21);e.Konva=i.Util._assign(t.Konva,{Collection:i.Collection,Util:i.Util,Transform:i.Transform,Node:o.Node,ids:o.ids,names:o.names,Container:r.Container,Stage:a.Stage,stages:a.stages,Layer:s.Layer,FastLayer:l.FastLayer,Group:c.Group,DD:u.DD,Shape:h.Shape,shapes:h.shapes,Animation:d.Animation,Tween:f.Tween,Easings:f.Easings,Context:p.Context,Canvas:y.Canvas})})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(18),s=n(2),l=n(21),c=n(25),u=n(2),h=n(49),d="_",f=["mouseenter","mousedown","mousemove","mouseup","mouseout","touchstart","touchmove","touchend","mouseover","wheel","contextmenu","pointerdown","pointermove","pointerup","pointercancel","lostpointercapture"],p=f.length;function y(t,e){t.content.addEventListener(e,function(n){t[d+e](n)},!1)}function g(t){return void 0===t&&(t={}),(t.clipFunc||t.clipWidth||t.clipHeight)&&o.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];var v=function(t){function n(n){var i=t.call(this,g(n))||this;return i._pointerPositions=[],i._changedPointerPositions=[],i._buildDOM(),i._bindContentEvents(),e.stages.push(i),i.on("widthChange.konva heightChange.konva",i._resizeDOM),i.on("visibleChange.konva",i._checkVisibility),i.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",function(){g(i.attrs)}),i._checkVisibility(),i}return i(n,t),n.prototype._validateAdd=function(t){var e="Layer"===t.getType(),n="FastLayer"===t.getType(),i=e||n;i||o.Util.throw("You may only add layers to the stage.")},n.prototype._checkVisibility=function(){if(this.content){var t=this.visible()?"":"none";this.content.style.display=t}},n.prototype.setContainer=function(t){if("string"==typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(n)}if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this},n.prototype.shouldDrawHit=function(){return!0},n.prototype.clear=function(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this},n.prototype.clone=function(t){return t||(t={}),t.container=document.createElement("div"),a.Container.prototype.clone.call(this,t)},n.prototype.destroy=function(){t.prototype.destroy.call(this);var n=this.content;n&&o.Util._isInDocument(n)&&this.container().removeChild(n);var i=e.stages.indexOf(this);return i>-1&&e.stages.splice(i,1),this},n.prototype.getPointerPosition=function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(o.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)},n.prototype._getPointerById=function(t){return this._pointerPositions.find(function(e){return e.id===t})},n.prototype.getPointersPositions=function(){return this._pointerPositions},n.prototype.getStage=function(){return this},n.prototype.getContent=function(){return this.content},n.prototype._toKonvaCanvas=function(t){var e=(t=t||{}).x||0,n=t.y||0,i=new l.SceneCanvas({width:t.width||this.width(),height:t.height||this.height(),pixelRatio:t.pixelRatio||1}),o=i.getContext()._context,r=this.children;return(e||n)&&o.translate(-1*e,-1*n),r.each(function(i){if(i.isVisible()){var r=i._toKonvaCanvas(t);o.drawImage(r._canvas,e,n,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}}),i},n.prototype.getIntersection=function(t,e){if(!t)return null;var n,i,o=this.children,r=o.length,a=r-1;for(n=a;n>=0;n--)if(i=o[n].getIntersection(t,e))return i;return null},n.prototype._resizeDOM=function(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.each(function(n){n.setSize({width:t,height:e}),n.draw()})},n.prototype.add=function(e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}t.prototype.add.call(this,e);var i=this.children.length;return i>5&&o.Util.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e._setCanvasSize(this.width(),this.height()),e.draw(),s.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this},n.prototype.getParent=function(){return null},n.prototype.getLayer=function(){return null},n.prototype.hasPointerCapture=function(t){return h.hasPointerCapture(t,this)},n.prototype.setPointerCapture=function(t){h.setPointerCapture(t,this)},n.prototype.releaseCapture=function(t){h.releaseCapture(t,this)},n.prototype.getLayers=function(){return this.getChildren()},n.prototype._bindContentEvents=function(){if(s.Konva.isBrowser)for(var t=0;t<p;t++)y(this,f[t])},n.prototype._mouseenter=function(t){this.setPointersPositions(t),this._fire("mouseenter",{evt:t,target:this,currentTarget:this})},n.prototype._mouseover=function(t){this.setPointersPositions(t),this._fire("contentMouseover",{evt:t}),this._fire("mouseover",{evt:t,target:this,currentTarget:this})},n.prototype._mouseout=function(t){this.setPointersPositions(t);var e=this.targetShape,n=!c.DD.isDragging||s.Konva.hitOnDragEnabled;e&&n?(e._fireAndBubble("mouseout",{evt:t}),e._fireAndBubble("mouseleave",{evt:t}),this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this.targetShape=null):n&&(this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this._fire("mouseout",{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire("contentMouseout",{evt:t})},n.prototype._mousemove=function(t){if(s.Konva.UA.ieMobile)return this._touchmove(t);this.setPointersPositions(t);var e,n=o.Util._getFirstPointerId(t),i=!c.DD.isDragging||s.Konva.hitOnDragEnabled;if(i){if((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()){var r=!this.targetShape||this.targetShape!==e;i&&r?(this.targetShape&&(this.targetShape._fireAndBubble("mouseout",{evt:t,pointerId:n},e),this.targetShape._fireAndBubble("mouseleave",{evt:t,pointerId:n},e)),e._fireAndBubble("mouseover",{evt:t,pointerId:n},this.targetShape),e._fireAndBubble("mouseenter",{evt:t,pointerId:n},this.targetShape),e._fireAndBubble("mousemove",{evt:t,pointerId:n}),this.targetShape=e):e._fireAndBubble("mousemove",{evt:t,pointerId:n})}else this.targetShape&&i&&(this.targetShape._fireAndBubble("mouseout",{evt:t,pointerId:n}),this.targetShape._fireAndBubble("mouseleave",{evt:t,pointerId:n}),this._fire("mouseover",{evt:t,target:this,currentTarget:this,pointerId:n}),this.targetShape=null),this._fire("mousemove",{evt:t,target:this,currentTarget:this,pointerId:n});this._fire("contentMousemove",{evt:t})}t.cancelable&&t.preventDefault()},n.prototype._mousedown=function(t){if(s.Konva.UA.ieMobile)return this._touchstart(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),n=this.getIntersection(this.getPointerPosition());c.DD.justDragged=!1,s.Konva.listenClickTap=!0,n&&n.isListening()?(this.clickStartShape=n,n._fireAndBubble("mousedown",{evt:t,pointerId:e})):this._fire("mousedown",{evt:t,target:this,currentTarget:this,pointerId:e}),this._fire("contentMousedown",{evt:t})},n.prototype._mouseup=function(t){if(s.Konva.UA.ieMobile)return this._touchend(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),n=this.getIntersection(this.getPointerPosition()),i=this.clickStartShape,r=this.clickEndShape,a=!1;s.Konva.inDblClickWindow?(a=!0,clearTimeout(this.dblTimeout)):c.DD.justDragged||(s.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){s.Konva.inDblClickWindow=!1},s.Konva.dblClickWindow),n&&n.isListening()?(this.clickEndShape=n,n._fireAndBubble("mouseup",{evt:t,pointerId:e}),s.Konva.listenClickTap&&i&&i._id===n._id&&(n._fireAndBubble("click",{evt:t,pointerId:e}),a&&r&&r===n&&n._fireAndBubble("dblclick",{evt:t,pointerId:e}))):(this._fire("mouseup",{evt:t,target:this,currentTarget:this,pointerId:e}),s.Konva.listenClickTap&&this._fire("click",{evt:t,target:this,currentTarget:this,pointerId:e}),a&&this._fire("dblclick",{evt:t,target:this,currentTarget:this,pointerId:e})),this._fire("contentMouseup",{evt:t}),s.Konva.listenClickTap&&(this._fire("contentClick",{evt:t}),a&&this._fire("contentDblclick",{evt:t})),s.Konva.listenClickTap=!1,t.cancelable&&t.preventDefault()},n.prototype._contextmenu=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("contextmenu",{evt:t}):this._fire("contextmenu",{evt:t,target:this,currentTarget:this}),this._fire("contentContextmenu",{evt:t})},n.prototype._touchstart=function(t){var e=this;this.setPointersPositions(t);var n=!1;this._changedPointerPositions.forEach(function(i){var o=e.getIntersection(i);s.Konva.listenClickTap=!0,c.DD.justDragged=!1;var r=o&&o.isListening();r&&(s.Konva.captureTouchEventsEnabled&&o.setPointerCapture(i.id),e.tapStartShape=o,o._fireAndBubble("touchstart",{evt:t,pointerId:i.id},e),n=!0,o.isListening()&&o.preventDefault()&&t.cancelable&&t.preventDefault())}),n||this._fire("touchstart",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchstart",{evt:t})},n.prototype._touchmove=function(t){var e=this;this.setPointersPositions(t);var n=!c.DD.isDragging||s.Konva.hitOnDragEnabled;if(n){var i=!1,o={};this._changedPointerPositions.forEach(function(n){var r=h.getCapturedShape(n.id)||e.getIntersection(n),a=r&&r.isListening();a&&(o[r._id]||(o[r._id]=!0,r._fireAndBubble("touchmove",{evt:t,pointerId:n.id}),i=!0,r.isListening()&&r.preventDefault()&&t.cancelable&&t.preventDefault()))}),i||this._fire("touchmove",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchmove",{evt:t})}c.DD.isDragging&&c.DD.node.preventDefault()&&t.cancelable&&t.preventDefault()},n.prototype._touchend=function(t){var e=this;this.setPointersPositions(t);var n=this.clickEndShape,i=!1;s.Konva.inDblClickWindow?(i=!0,clearTimeout(this.dblTimeout)):c.DD.justDragged||(s.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){s.Konva.inDblClickWindow=!1},s.Konva.dblClickWindow);var o=!1,r={},a=!1,l=!1;this._changedPointerPositions.forEach(function(c){var u=h.getCapturedShape(c.id)||e.getIntersection(c);u&&u.releaseCapture(c.id);var d=u&&u.isListening();d&&(r[u._id]||(r[u._id]=!0,e.clickEndShape=u,u._fireAndBubble("touchend",{evt:t,pointerId:c.id}),o=!0,s.Konva.listenClickTap&&u===e.tapStartShape&&(a=!0,u._fireAndBubble("tap",{evt:t,pointerId:c.id}),i&&n&&n===u&&(l=!0,u._fireAndBubble("dbltap",{evt:t,pointerId:c.id}))),u.isListening()&&u.preventDefault()&&t.cancelable&&t.preventDefault()))}),o||this._fire("touchend",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva.listenClickTap&&!a&&this._fire("tap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i&&!l&&this._fire("dbltap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchend",{evt:t}),s.Konva.listenClickTap&&(this._fire("contentTap",{evt:t}),i&&this._fire("contentDbltap",{evt:t})),s.Konva.listenClickTap=!1},n.prototype._wheel=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("wheel",{evt:t}):this._fire("wheel",{evt:t,target:this,currentTarget:this}),this._fire("contentWheel",{evt:t})},n.prototype._pointerdown=function(t){if(s.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerdown",h.createEvent(t))}},n.prototype._pointermove=function(t){if(s.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointermove",h.createEvent(t))}},n.prototype._pointerup=function(t){if(s.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",h.createEvent(t)),h.releaseCapture(t.pointerId)}},n.prototype._pointercancel=function(t){if(s.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",h.createEvent(t)),h.releaseCapture(t.pointerId)}},n.prototype._lostpointercapture=function(t){h.releaseCapture(t.pointerId)},n.prototype.setPointersPositions=function(t){var e=this,n=this._getContentPosition(),i=null,r=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],o.Collection.prototype.each.call(t.touches,function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})}),o.Collection.prototype.each.call(t.changedTouches||t.touches,function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})})):(i=(t.clientX-n.left)/n.scaleX,r=(t.clientY-n.top)/n.scaleY,this.pointerPos={x:i,y:r},this._pointerPositions=[{x:i,y:r,id:o.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:r,id:o.Util._getFirstPointerId(t)}])},n.prototype._setPointerPosition=function(t){o.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)},n.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}},n.prototype._buildDOM=function(){if(this.bufferCanvas=new l.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new l.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),s.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},n.prototype.cache=function(){return o.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},n.prototype.clearCache=function(){return this},n.prototype.batchDraw=function(){return this.children.each(function(t){t.batchDraw()}),this},n}(a.Container);e.Stage=v,v.prototype.nodeType="Stage",u._registerNode(v),r.Factory.addGetterSetter(v,"container")})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(18),a=n(1),s=n(50),l=n(21),c=n(9),u=n(3),h=n(2),d=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],f=d.length,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hitCanvas=new l.HitCanvas({pixelRatio:1}),e}return i(e,t),e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._checkSmooth()},e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to a layer.")},e.prototype.getIntersection=function(t,e){var n,i,o,r;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var a=1,s=!1;;){for(i=0;i<f;i++){if(o=d[i],n=this._getIntersection({x:t.x+o.x*a,y:t.y+o.y*a}),(r=n.shape)&&e)return r.findAncestor(e,!0);if(r)return r;if(s=!!n.antialiased,!n.antialiased)break}if(!s)return null;a+=1}},e.prototype._getIntersection=function(t){var e,n,i=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,a=r[3];return 255===a?(e=o.Util._rgbToHex(r[0],r[1],r[2]),(n=c.shapes["#"+e])?{shape:n}:{antialiased:!0}):a>0?{antialiased:!0}:{}},e.prototype.drawScene=function(t,e){var n=this.getLayer(),i=t||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),r.Container.prototype.drawScene.call(this,i,e),this._fire("draw",{node:this}),this},e.prototype.drawHit=function(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),r.Container.prototype.drawHit.call(this,i,e),this},e.prototype.clear=function(t){return s.BaseLayer.prototype.clear.call(this,t),this.getHitCanvas().getContext().clear(t),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.toggleHitCanvas=function(){if(this.parent){var t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e.prototype.setSize=function(e){var n=e.width,i=e.height;return t.prototype.setSize.call(this,{width:n,height:i}),this.hitCanvas.setSize(n,i),this},e}(s.BaseLayer);e.Layer=p,p.prototype.nodeType="Layer",h._registerNode(p),a.Factory.addGetterSetter(p,"hitGraphEnabled",!0,u.getBooleanValidator()),o.Collection.mapMethods(p)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(18),a=n(50),s=n(2),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._validateAdd=function(t){var e=t.getType();"Shape"!==e&&o.Util.throw("You may only add shapes to a fast layer.")},e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this._checkSmooth()},e.prototype.hitGraphEnabled=function(){return!1},e.prototype.drawScene=function(t){var e=this.getLayer(),n=t||e&&e.getCanvas();return this.clearBeforeDraw()&&n.getContext().clear(),r.Container.prototype.drawScene.call(this,n),this},e.prototype.draw=function(){return this.drawScene(),this},e}(a.BaseLayer);e.FastLayer=l,l.prototype.nodeType="FastLayer",s._registerNode(l),o.Collection.mapMethods(l)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(4),i=n(36),o=n(7),r=n(2),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},s=0,l=["fill","stroke","shadowColor"],c=function(){function t(t,e,n,i,o,r,a){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=o-this.begin,this.pause()}return t.prototype.fire=function(t){var e=this[t];e&&e()},t.prototype.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},t.prototype.getTime=function(){return this._time},t.prototype.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},t.prototype.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},t.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},t.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},t.prototype.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},t.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},t.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},t.prototype.update=function(){this.setPosition(this.getPosition(this._time))},t.prototype.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},t.prototype.pause=function(){this.state=1,this.fire("onPause")},t.prototype.getTimer=function(){return(new Date).getTime()},t}(),u=function(){function n(o){var l,u,h=this,d=o.node,f=d._id,p=o.easing||e.Easings.Linear,y=!!o.yoyo;l=void 0===o.duration?.3:0===o.duration?.001:o.duration,this.node=d,this._id=s++;var g=d.getLayer()||(d instanceof r.Konva.Stage?d.getLayers():null);for(u in g||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){h.tween.onEnterFrame()},g),this.tween=new c(u,function(t){h._tweenFunc(t)},p,0,1,1e3*l,y),this._addListeners(),n.attrs[f]||(n.attrs[f]={}),n.attrs[f][this._id]||(n.attrs[f][this._id]={}),n.tweens[f]||(n.tweens[f]={}),o)void 0===a[u]&&this._addAttr(u,o[u]);this.reset(),this.onFinish=o.onFinish,this.onReset=o.onReset}return n.prototype._addAttr=function(e,i){var o,r,a,s,c,u,h,d,f=this.node,p=f._id;if((a=n.tweens[p][e])&&delete n.attrs[p][a][e],o=f.getAttr(e),t.Util._isArray(i))if(r=[],c=Math.max(i.length,o.length),"points"===e&&i.length!==o.length&&(i.length>o.length?(h=o,o=t.Util._prepareArrayForTween(o,i,f.closed())):(u=i,i=t.Util._prepareArrayForTween(i,o,f.closed()))),0===e.indexOf("fill"))for(s=0;s<c;s++)if(s%2==0)r.push(i[s]-o[s]);else{var y=t.Util.colorToRGBA(o[s]);d=t.Util.colorToRGBA(i[s]),o[s]=y,r.push({r:d.r-y.r,g:d.g-y.g,b:d.b-y.b,a:d.a-y.a})}else for(s=0;s<c;s++)r.push(i[s]-o[s]);else-1!==l.indexOf(e)?(o=t.Util.colorToRGBA(o),d=t.Util.colorToRGBA(i),r={r:d.r-o.r,g:d.g-o.g,b:d.b-o.b,a:d.a-o.a}):r=i-o;n.attrs[p][this._id][e]={start:o,diff:r,end:i,trueEnd:u,trueStart:h},n.tweens[p][e]=this._id},n.prototype._tweenFunc=function(e){var i,o,r,a,s,c,u,h,d=this.node,f=n.attrs[d._id][this._id];for(i in f){if(o=f[i],r=o.start,a=o.diff,h=o.end,t.Util._isArray(r))if(s=[],u=Math.max(r.length,h.length),0===i.indexOf("fill"))for(c=0;c<u;c++)c%2==0?s.push((r[c]||0)+a[c]*e):s.push("rgba("+Math.round(r[c].r+a[c].r*e)+","+Math.round(r[c].g+a[c].g*e)+","+Math.round(r[c].b+a[c].b*e)+","+(r[c].a+a[c].a*e)+")");else for(c=0;c<u;c++)s.push((r[c]||0)+a[c]*e);else s=-1!==l.indexOf(i)?"rgba("+Math.round(r.r+a.r*e)+","+Math.round(r.g+a.g*e)+","+Math.round(r.b+a.b*e)+","+(r.a+a.a*e)+")":r+a*e;d.setAttr(i,s)}},n.prototype._addListeners=function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){var e=t.node,i=n.attrs[e._id][t._id];i.points&&i.points.trueEnd&&e.setAttr("points",i.points.trueEnd),t.onFinish&&t.onFinish.call(t)},this.tween.onReset=function(){var e=t.node,i=n.attrs[e._id][t._id];i.points&&i.points.trueStart&&e.points(i.points.trueStart),t.onReset&&t.onReset()}},n.prototype.play=function(){return this.tween.play(),this},n.prototype.reverse=function(){return this.tween.reverse(),this},n.prototype.reset=function(){return this.tween.reset(),this},n.prototype.seek=function(t){return this.tween.seek(1e3*t),this},n.prototype.pause=function(){return this.tween.pause(),this},n.prototype.finish=function(){return this.tween.finish(),this},n.prototype.destroy=function(){var t,e=this.node._id,i=this._id,o=n.tweens[e];for(t in this.pause(),o)delete n.tweens[e][t];delete n.attrs[e][i]},n.attrs={},n.tweens={},n}();e.Tween=u,o.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var n=new u(t);n.play()},e.Easings={BackEaseIn:function(t,e,n,i){var o=1.70158;return n*(t/=i)*t*((o+1)*t-o)+e},BackEaseOut:function(t,e,n,i){var o=1.70158;return n*((t=t/i-1)*t*((o+1)*t+o)+1)+e},BackEaseInOut:function(t,e,n,i){var o=1.70158;return(t/=i/2)<1?n/2*(t*t*((1+(o*=1.525))*t-o))+e:n/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e},ElasticEaseIn:function(t,e,n,i,o,r){var a=0;return 0===t?e:1==(t/=i)?e+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,a=r/4):a=r/(2*Math.PI)*Math.asin(n/o),-o*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/r)+e)},ElasticEaseOut:function(t,e,n,i,o,r){var a=0;return 0===t?e:1==(t/=i)?e+n:(r||(r=.3*i),!o||o<Math.abs(n)?(o=n,a=r/4):a=r/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/r)+n+e)},ElasticEaseInOut:function(t,e,n,i,o,r){var a=0;return 0===t?e:2==(t/=i/2)?e+n:(r||(r=i*(.3*1.5)),!o||o<Math.abs(n)?(o=n,a=r/4):a=r/(2*Math.PI)*Math.asin(n/o),t<1?o*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/r)*-.5+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/r)*.5+n+e)},BounceEaseOut:function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,n,i,o){return i-e.Easings.BounceEaseOut(o-t,0,i,o)+n},BounceEaseInOut:function(t,n,i,o){return t<o/2?.5*e.Easings.BounceEaseIn(2*t,0,i,o)+n:.5*e.Easings.BounceEaseOut(2*t-o,0,i,o)+.5*i+n},EaseIn:function(t,e,n,i){return n*(t/=i)*t+e},EaseOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,i){return n*t/i+e}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(2),l=n(3),c=n(2),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=s.Konva.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(a.Shape);e.Arc=u,u.prototype._centroid=!0,u.prototype.className="Arc",u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(u),r.Factory.addGetterSetter(u,"innerRadius",0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"outerRadius",0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"angle",0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"clockwise",!1,l.getBooleanValidator()),o.Collection.mapMethods(u)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(51),s=n(3),l=n(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(e){t.prototype._sceneFunc.call(this,e);var n=2*Math.PI,i=this.points(),o=i,r=0!==this.tension()&&i.length>4;r&&(o=this.getTensionPoints());var a,s,l=i.length;r?(a=i[l-2]-(o[o.length-2]+o[o.length-4])/2,s=i[l-1]-(o[o.length-1]+o[o.length-3])/2):(a=i[l-2]-i[l-4],s=i[l-1]-i[l-3]);var c=(Math.atan2(s,a)+n)%n,u=this.pointerLength(),h=this.pointerWidth();e.save(),e.beginPath(),e.translate(i[l-2],i[l-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-u,h/2),e.lineTo(-u,-h/2),e.closePath(),e.restore(),this.pointerAtBeginning()&&(e.save(),e.translate(i[0],i[1]),r?(a=(o[0]+o[2])/2-i[0],s=(o[1]+o[3])/2-i[1]):(a=i[2]-i[0],s=i[3]-i[1]),e.rotate((Math.atan2(-s,-a)+n)%n),e.moveTo(0,0),e.lineTo(-u,h/2),e.lineTo(-u,-h/2),e.closePath(),e.restore());var d=this.dashEnabled();d&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var e=t.prototype.getSelfRect.call(this),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+2*n,height:e.height+2*n}},e}(a.Line);e.Arrow=c,c.prototype.className="Arrow",l._registerNode(c),r.Factory.addGetterSetter(c,"pointerLength",10,s.getNumberValidator()),r.Factory.addGetterSetter(c,"pointerWidth",10,s.getNumberValidator()),r.Factory.addGetterSetter(c,"pointerAtBeginning",!1),o.Collection.mapMethods(c)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(3),l=n(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(a.Shape);e.Circle=c,c.prototype._centroid=!0,c.prototype.className="Circle",c.prototype._attrsAffectingSize=["radius"],l._registerNode(c),r.Factory.addGetterSetter(c,"radius",0,s.getNumberValidator()),o.Collection.mapMethods(c)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(3),l=n(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radiusX()},e.prototype.getHeight=function(){return 2*this.radiusY()},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(a.Shape);e.Ellipse=c,c.prototype.className="Ellipse",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radiusX","radiusY"],l._registerNode(c),r.Factory.addComponentsGetterSetter(c,"radius",["x","y"]),r.Factory.addGetterSetter(c,"radiusX",0,s.getNumberValidator()),r.Factory.addGetterSetter(c,"radiusY",0,s.getNumberValidator()),o.Collection.mapMethods(c)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(3),l=n(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._useBufferCanvas=function(){return!(!this.hasShadow()&&1===this.getAbsoluteOpacity()||!this.hasStroke()||!this.getStage())},e.prototype._sceneFunc=function(t){var e,n,i,o=this.width(),r=this.height(),a=this.image();a&&(e=this.cropWidth(),n=this.cropHeight(),i=e&&n?[a,this.cropX(),this.cropY(),e,n,0,0,o,r]:[a,0,0,o,r]),(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,o,r),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,i)},e.prototype._hitFunc=function(t){var e=this.width(),n=this.height();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,e=this.image();return null!=(t=this.attrs.width)?t:e?e.width:0},e.prototype.getHeight=function(){var t,e=this.image();return null!=(t=this.attrs.height)?t:e?e.height:0},e.fromURL=function(t,n){var i=o.Util.createImageElement();i.onload=function(){var t=new e({image:i});n(t)},i.crossOrigin="Anonymous",i.src=t},e}(a.Shape);e.Image=c,c.prototype.className="Image",l._registerNode(c),r.Factory.addGetterSetter(c,"image"),r.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),r.Factory.addGetterSetter(c,"cropX",0,s.getNumberValidator()),r.Factory.addGetterSetter(c,"cropY",0,s.getNumberValidator()),r.Factory.addGetterSetter(c,"cropWidth",0,s.getNumberValidator()),r.Factory.addGetterSetter(c,"cropHeight",0,s.getNumberValidator()),o.Collection.mapMethods(c)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(35),l=n(3),c=n(2),u=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width"],h=u.length,d=function(t){function e(e){var n=t.call(this,e)||this;return n.on("add.konva",function(t){this._addListeners(t.child),this._sync()}),n}return i(e,t),e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var e,n=this,i=function(){n._sync()};for(e=0;e<h;e++)t.on(u[e]+"Change.konva",i)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t,e,n,i,o,r,a,s=this.getText(),l=this.getTag();if(s&&l){switch(t=s.width(),e=s.height(),n=l.pointerDirection(),i=l.pointerWidth(),a=l.pointerHeight(),o=0,r=0,n){case"up":o=t/2,r=-1*a;break;case"right":o=t+i,r=e/2;break;case"down":o=t/2,r=e+a;break;case"left":o=-1*i,r=e/2}l.setAttrs({x:-1*o,y:-1*r,width:t,height:e}),s.setAttrs({x:-1*o,y:-1*r})}},e}(s.Group);e.Label=d,d.prototype.className="Label",c._registerNode(d),o.Collection.mapMethods(d);var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.width(),n=this.height(),i=this.pointerDirection(),o=this.pointerWidth(),r=this.pointerHeight(),a=Math.min(this.cornerRadius(),e/2,n/2);t.beginPath(),a?t.moveTo(a,0):t.moveTo(0,0),"up"===i&&(t.lineTo((e-o)/2,0),t.lineTo(e/2,-1*r),t.lineTo((e+o)/2,0)),a?(t.lineTo(e-a,0),t.arc(e-a,a,a,3*Math.PI/2,0,!1)):t.lineTo(e,0),"right"===i&&(t.lineTo(e,(n-r)/2),t.lineTo(e+o,n/2),t.lineTo(e,(n+r)/2)),a?(t.lineTo(e,n-a),t.arc(e-a,n-a,a,0,Math.PI/2,!1)):t.lineTo(e,n),"down"===i&&(t.lineTo((e+o)/2,n),t.lineTo(e/2,n+r),t.lineTo((e-o)/2,n)),a?(t.lineTo(a,n),t.arc(a,n-a,a,Math.PI/2,Math.PI,!1)):t.lineTo(0,n),"left"===i&&(t.lineTo(0,(n+r)/2),t.lineTo(-1*o,n/2),t.lineTo(0,(n-r)/2)),a&&(t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1)),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,e=0,n=this.pointerWidth(),i=this.pointerHeight(),o=this.pointerDirection(),r=this.width(),a=this.height();return"up"===o?(e-=i,a+=i):"down"===o?a+=i:"left"===o?(t-=1.5*n,r+=n):"right"===o&&(r+=1.5*n),{x:t,y:e,width:r,height:a}},e}(a.Shape);e.Tag=f,f.prototype.className="Tag",c._registerNode(f),r.Factory.addGetterSetter(f,"pointerDirection","none"),r.Factory.addGetterSetter(f,"pointerWidth",0,l.getNumberValidator()),r.Factory.addGetterSetter(f,"pointerHeight",0,l.getNumberValidator()),r.Factory.addGetterSetter(f,"cornerRadius",0,l.getNumberValidator()),o.Collection.mapMethods(f)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(3),l=n(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e,n,i,o=this.sides(),r=this.radius();for(t.beginPath(),t.moveTo(0,0-r),e=1;e<o;e++)n=r*Math.sin(2*e*Math.PI/o),i=-1*r*Math.cos(2*e*Math.PI/o),t.lineTo(n,i);t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(a.Shape);e.RegularPolygon=c,c.prototype.className="RegularPolygon",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],l._registerNode(c),r.Factory.addGetterSetter(c,"radius",0,s.getNumberValidator()),r.Factory.addGetterSetter(c,"sides",0,s.getNumberValidator()),o.Collection.mapMethods(c)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(3),l=n(2),c=2*Math.PI,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,c,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),c,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(a.Shape);e.Ring=u,u.prototype.className="Ring",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],l._registerNode(u),r.Factory.addGetterSetter(u,"innerRadius",0,s.getNumberValidator()),r.Factory.addGetterSetter(u,"outerRadius",0,s.getNumberValidator()),o.Collection.mapMethods(u)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(36),l=n(3),c=n(2),u=function(t){function e(e){var n=t.call(this,e)||this;return n._updated=!0,n.anim=new s.Animation(function(){var t=n._updated;return n._updated=!1,t}),n.on("animationChange.konva",function(){this.frameIndex(0)}),n.on("frameIndexChange.konva",function(){this._updated=!0}),n.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),n}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.animation(),n=this.frameIndex(),i=4*n,o=this.animations()[e],r=this.frameOffsets(),a=o[i+0],s=o[i+1],l=o[i+2],c=o[i+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,c),t.closePath(),t.fillStrokeShape(this)),u)if(r){var h=r[e],d=2*n;t.drawImage(u,a,s,l,c,h[d+0],h[d+1],l,c)}else t.drawImage(u,a,s,l,c,0,0,l,c)},e.prototype._hitFunc=function(t){var e=this.animation(),n=this.frameIndex(),i=4*n,o=this.animations()[e],r=this.frameOffsets(),a=o[i+2],s=o[i+3];if(t.beginPath(),r){var l=r[e],c=2*n;t.rect(l[c+0],l[c+1],a,s)}else t.rect(0,0,a,s);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},e.prototype._setInterval=function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),e=this.animation(),n=this.animations(),i=n[e],o=i.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)},e}(a.Shape);e.Sprite=u,u.prototype.className="Sprite",c._registerNode(u),r.Factory.addGetterSetter(u,"animation"),r.Factory.addGetterSetter(u,"animations"),r.Factory.addGetterSetter(u,"frameOffsets"),r.Factory.addGetterSetter(u,"image"),r.Factory.addGetterSetter(u,"frameIndex",0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"frameRate",17,l.getNumberValidator()),r.Factory.backCompat(u,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),o.Collection.mapMethods(u)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(3),l=n(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var o=1;o<2*i;o++){var r=o%2==0?n:e,a=r*Math.sin(o*Math.PI/i),s=-1*r*Math.cos(o*Math.PI/i);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(a.Shape);e.Star=c,c.prototype.className="Star",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],l._registerNode(c),r.Factory.addGetterSetter(c,"numPoints",5,s.getNumberValidator()),r.Factory.addGetterSetter(c,"innerRadius",0,s.getNumberValidator()),r.Factory.addGetterSetter(c,"outerRadius",0,s.getNumberValidator()),o.Collection.mapMethods(c)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(52),l=n(54),c=n(3),u=n(2);function h(t){t.fillText(this.partialText,0,0)}function d(t){t.strokeText(this.partialText,0,0)}var f=function(t){function e(e){var n=t.call(this,e)||this;return n.dummyCanvas=o.Util.createCanvasElement(),n.dataArray=[],n.dataArray=s.Path.parsePathData(n.attrs.data),n.on("dataChange.konva",function(){this.dataArray=s.Path.parsePathData(this.attrs.data),this._setTextData()}),n.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",n._setTextData),e&&e.getKerning&&(o.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),n.kerningFunc(e.getKerning)),n._setTextData(),n}return i(e,t),e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),i=this.fontSize(),o=this.glyphInfo;"underline"===e&&t.beginPath();for(var r=0;r<o.length;r++){t.save();var a=o[r].p0;t.translate(a.x,a.y),t.rotate(o[r].rotation),this.partialText=o[r].text,t.fillStrokeShape(this),"underline"===e&&(0===r&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=i/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var i=0;i<e.length;i++){var o=e[i].p1;t.lineTo(o.x,o.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return l.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return l.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var e=this.dummyCanvas,n=e.getContext("2d");n.save(),n.font=this._getContextFont();var i=n.measureText(t);return n.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,e=this._getTextSize(this.attrs.text),n=this.letterSpacing(),i=this.align(),o=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var r=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var a=0,l=0;l<t.dataArray.length;l++)t.dataArray[l].pathLength>0&&(a+=t.dataArray[l].pathLength);var c=0;"center"===i&&(c=Math.max(0,a/2-r/2)),"right"===i&&(c=Math.max(0,a-r));for(var u,h,d,f=this.text().split(""),p=this.text().split(" ").length-1,y=-1,g=0,v=function(){g=0;for(var e=t.dataArray,n=y+1;n<e.length;n++){if(e[n].pathLength>0)return y=n,e[n];"M"===e[n].command&&(u={x:e[n].points[0],y:e[n].points[1]})}return{}},m=function(e){var o=t._getTextSize(e).width+n;" "===e&&"justify"===i&&(o+=(a-r)/p);var l=0,c=0;for(h=void 0;Math.abs(o-l)/o>.01&&c<25;){c++;for(var f=l;void 0===d;)(d=v())&&f+d.pathLength<o&&(f+=d.pathLength,d=void 0);if(d==={}||void 0===u)return;var y=!1;switch(d.command){case"L":s.Path.getLineLength(u.x,u.y,d.points[0],d.points[1])>o?h=s.Path.getPointOnLine(o,u.x,u.y,d.points[0],d.points[1],u.x,u.y):d=void 0;break;case"A":var m=d.points[4],b=d.points[5],_=d.points[4]+b;0===g?g=m+1e-8:o>l?g+=Math.PI/180*b/Math.abs(b):g-=Math.PI/360*b/Math.abs(b),(b<0&&g<_||b>=0&&g>_)&&(g=_,y=!0),h=s.Path.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],g,d.points[6]);break;case"C":0===g?g=o>d.pathLength?1e-8:o/d.pathLength:o>l?g+=(o-l)/d.pathLength:g-=(l-o)/d.pathLength,g>1&&(g=1,y=!0),h=s.Path.getPointOnCubicBezier(g,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":0===g?g=o/d.pathLength:o>l?g+=(o-l)/d.pathLength:g-=(l-o)/d.pathLength,g>1&&(g=1,y=!0),h=s.Path.getPointOnQuadraticBezier(g,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3])}void 0!==h&&(l=s.Path.getLineLength(u.x,u.y,h.x,h.y)),y&&(y=!1,d=void 0)}},b=t._getTextSize("C").width+n,_=c/b-1,w=0;w<_&&(m("C"),void 0!==u&&void 0!==h);w++)u=h;for(var x=0;x<f.length&&(m(f[x]),void 0!==u&&void 0!==h);x++){var T=s.Path.getLineLength(u.x,u.y,h.x,h.y),S=0;if(o)try{S=o(f[x-1],f[x])*this.fontSize()}catch(t){S=0}u.x+=S,h.x+=S,this.textWidth+=S;var E=s.Path.getPointOnLine(S+T/2,u.x,u.y,h.x,h.y),P=Math.atan2(h.y-u.y,h.x-u.x);this.glyphInfo.push({transposeX:E.x,transposeY:E.y,text:f[x],rotation:P,p0:u,p1:h}),u=h}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)});for(var e,n,i=t[0]||0,o=t[0]||0,r=t[1]||0,a=t[1]||0,s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],i=Math.min(i,e),o=Math.max(o,e),r=Math.min(r,n),a=Math.max(a,n);var l=this.fontSize();return{x:i-l/2,y:r-l/2,width:o-i+l,height:a-r+l}},e}(a.Shape);e.TextPath=f,f.prototype._fillFunc=h,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=h,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],u._registerNode(f),r.Factory.addGetterSetter(f,"data"),r.Factory.addGetterSetter(f,"fontFamily","Arial"),r.Factory.addGetterSetter(f,"fontSize",12,c.getNumberValidator()),r.Factory.addGetterSetter(f,"fontStyle","normal"),r.Factory.addGetterSetter(f,"align","left"),r.Factory.addGetterSetter(f,"letterSpacing",0,c.getNumberValidator()),r.Factory.addGetterSetter(f,"textBaseline","middle"),r.Factory.addGetterSetter(f,"fontVariant","normal"),r.Factory.addGetterSetter(f,"text",""),r.Factory.addGetterSetter(f,"textDecoration",null),r.Factory.addGetterSetter(f,"kerningFunc",null),o.Collection.mapMethods(f)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(7),s=n(9),l=n(53),c=n(35),u=n(2),h=n(3),d=n(2),f=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(function(t){return t+".tr-konva"}).join(" "),p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(function(t){return t+".tr-konva"}).join(" "),y={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in u.Konva._global,v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],m=function(t){function e(e){var n=t.call(this,e)||this;return n._transforming=!1,n._createElements(),n._handleMouseMove=n._handleMouseMove.bind(n),n._handleMouseUp=n._handleMouseUp.bind(n),n.update=n.update.bind(n),n.on(f,n.update),n.getNode()&&n.update(),n}return i(e,t),e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){var e=this;this._node&&this.detach(),this._node=t,this._resetTransformCache();var n=t._attrsAffectingSize.map(function(t){return t+"Change.tr-konva"}).join(" "),i=function(){e._resetTransformCache(),e._transforming||e.update()};t.on(n,i),t.on(p,i),t.on("xChange.tr-konva yChange.tr-konva",function(){return e._resetTransformCache()});var o=!!this.findOne(".top-left");return o&&this.update(),this},e.prototype.getNode=function(){return this._node},e.prototype.getActiveAnchor=function(){return this._movingAnchorName},e.prototype.detach=function(){this.getNode()&&(this.getNode().off(".tr-konva"),this._node=void 0),this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache("nodeRect"),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache("nodeRect",this.__getNodeRect)},e.prototype.__getNodeRect=function(){var t=this.getNode();if(!t)return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};t.parent&&this.parent&&t.parent!==this.parent&&o.Util.warn("Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.");var e=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),n=u.Konva.getAngle(t.rotation()),i=e.x*t.scaleX()-t.offsetX()*t.scaleX(),r=e.y*t.scaleY()-t.offsetY()*t.scaleY();return{x:t.x()+i*Math.cos(n)+r*Math.sin(-n),y:t.y()+r*Math.cos(n)+i*Math.sin(n),width:e.width*t.scaleX(),height:e.height*t.scaleY(),rotation:t.rotation()}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getRotation=function(){return this._getNodeRect().rotation},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),v.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var e=this,n=new l.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),i=this;n.on("mousedown touchstart",function(t){i._handleMouseDown(t)}),n.on("dragstart",function(t){t.cancelBubble=!0}),n.on("dragmove",function(t){t.cancelBubble=!0}),n.on("dragend",function(t){t.cancelBubble=!0}),n.on("mouseenter",function(){var i=u.Konva.getAngle(e.getAbsoluteRotation()),r=e.getNode().getAbsoluteScale(),a=r.y*r.x<0,s=function(t,e,n){if("rotater"===t)return"crosshair";e+=o.Util._degToRad(y[t]||0),n&&(e*=-1);var i=(o.Util._radToDeg(e)%360+360)%360;return o.Util._inRange(i,337.5,360)||o.Util._inRange(i,0,22.5)?"ns-resize":o.Util._inRange(i,22.5,67.5)?"nesw-resize":o.Util._inRange(i,67.5,112.5)?"ew-resize":o.Util._inRange(i,112.5,157.5)?"nwse-resize":o.Util._inRange(i,157.5,202.5)?"ns-resize":o.Util._inRange(i,202.5,247.5)?"nesw-resize":o.Util._inRange(i,247.5,292.5)?"ew-resize":o.Util._inRange(i,292.5,337.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}(t,i,a);n.getStage().content.style.cursor=s,e._cursorChange=!0}),n.on("mouseout",function(){n.getStage()&&n.getParent()&&(n.getStage().content.style.cursor="",e._cursorChange=!1)}),this.add(n)},e.prototype._createBack=function(){var t=new s.Shape({name:"back",width:0,height:0,listening:!1,sceneFunc:function(t){var e=this.getParent(),n=e.padding();t.beginPath(),t.rect(-n,-n,this.width()+2*n,this.height()+2*n),t.moveTo(this.width()/2,-n),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*o.Util._sign(this.height())-n),t.fillStrokeShape(this)}});this.add(t)},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,i=e.height,o=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));this.sin=Math.abs(i/o),this.cos=Math.abs(n/o),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0,this._fire("transformstart",{evt:t,target:this.getNode()}),this.getNode()._fire("transformstart",{evt:t,target:this.getNode()})},e.prototype._handleMouseMove=function(t){var e,n,i,r=this.findOne("."+this._movingAnchorName),a=r.getStage();a.setPointersPositions(t),r.setAbsolutePosition(a.getPointerPosition());var s=this.keepRatio()||t.shiftKey,l=this.padding();if("top-left"===this._movingAnchorName){if(s){i=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-r.x()-2*l,2)+Math.pow(this.findOne(".bottom-right").y()-r.y()-2*l,2));var c=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,h=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=i*this.cos*c,n=i*this.sin*h,this.findOne(".top-left").x(this.findOne(".bottom-right").x()-e-2*l),this.findOne(".top-left").y(this.findOne(".bottom-right").y()-n-2*l)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(r.y());else if("top-right"===this._movingAnchorName){if(s){i=Math.sqrt(Math.pow(r.x()-this.findOne(".bottom-left").x()-2*l,2)+Math.pow(this.findOne(".bottom-left").y()-r.y()-2*l,2));var c=this.findOne(".top-right").x()<this.findOne(".top-left").x()?-1:1,h=this.findOne(".top-right").y()>this.findOne(".bottom-left").y()?-1:1;e=i*this.cos*c,n=i*this.sin*h,this.findOne(".top-right").x(e+l),this.findOne(".top-right").y(this.findOne(".bottom-left").y()-n-2*l)}var d=r.position();this.findOne(".top-left").y(d.y),this.findOne(".bottom-right").x(d.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(r.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(r.x());else if("bottom-left"===this._movingAnchorName){if(s){i=Math.sqrt(Math.pow(this.findOne(".top-right").x()-r.x()-2*l,2)+Math.pow(r.y()-this.findOne(".top-right").y()-2*l,2));var c=this.findOne(".top-right").x()<this.findOne(".bottom-left").x()?-1:1,h=this.findOne(".bottom-right").y()<this.findOne(".top-left").y()?-1:1;e=i*this.cos*c,n=i*this.sin*h,this.findOne(".bottom-left").x(this.findOne(".top-right").x()-e-2*l),this.findOne(".bottom-left").y(n+l)}d=r.position(),this.findOne(".top-left").x(d.x),this.findOne(".bottom-right").y(d.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(r.y());else if("bottom-right"===this._movingAnchorName){if(s){i=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-l,2)+Math.pow(this.findOne(".bottom-right").y()-l,2));var c=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,h=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=i*this.cos*c,n=i*this.sin*h,this.findOne(".bottom-right").x(e+l),this.findOne(".bottom-right").y(n+l)}}else if("rotater"===this._movingAnchorName){var f=this._getNodeRect();e=r.x()-f.width/2,n=-r.y()+f.height/2;var p=Math.atan2(-n,e)+Math.PI/2;f.height<0&&(p-=Math.PI);for(var y=u.Konva.getAngle(this.rotation()),g=o.Util._radToDeg(y)+o.Util._radToDeg(p),v=u.Konva.getAngle(this.getNode().rotation()),m=o.Util._degToRad(g),b=this.rotationSnaps(),_=u.Konva.getAngle(this.rotationSnapTolerance()),w=0;w<b.length;w++){var x=u.Konva.getAngle(b[w]),T=Math.abs(x-o.Util._degToRad(g))%(2*Math.PI);T<_&&(g=o.Util._radToDeg(x),m=o.Util._degToRad(g))}var S=l,E=l;this._fitNodeInto({rotation:u.Konva.angleDeg?g:o.Util._degToRad(g),x:f.x+(f.width/2+l)*(Math.cos(v)-Math.cos(m))+(f.height/2+l)*(Math.sin(-v)-Math.sin(-m))-(S*Math.cos(y)+E*Math.sin(-y)),y:f.y+(f.height/2+l)*(Math.cos(v)-Math.cos(m))+(f.width/2+l)*(Math.sin(v)-Math.sin(m))-(E*Math.cos(y)+S*Math.sin(y)),width:f.width+2*l,height:f.height+2*l},t)}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if("rotater"!==this._movingAnchorName){var P=this.centeredScaling()||t.altKey;if(P){var C=this.findOne(".top-left"),O=this.findOne(".bottom-right"),D=C.x()+l,A=C.y()+l,k=this.getWidth()-O.x()+l,I=this.getHeight()-O.y()+l;O.move({x:-D,y:-A}),C.move({x:k,y:I})}var L=this.findOne(".top-left").getAbsolutePosition(this.getParent());e=L.x,n=L.y;var M=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),R=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodeInto({x:e+this.offsetX(),y:n+this.offsetY(),width:M,height:R},t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&e.fire("transformend",{evt:t,target:e}),this._movingAnchorName=null}},e.prototype._fitNodeInto=function(t,e){var n=this.boundBoxFunc();if(n){var i=this._getNodeRect();t=n.call(this,i,t)}var o=this.getNode();void 0!==t.rotation&&this.getNode().rotation(t.rotation);var r=o.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=this.padding(),s=r.width?(t.width-2*a)/r.width:1,l=r.height?(t.height-2*a)/r.height:1,c=u.Konva.getAngle(o.rotation()),h=r.x*s-a-o.offsetX()*s,d=r.y*l-a-o.offsetY()*l;this.getNode().setAttrs({scaleX:s,scaleY:l,x:t.x-(h*Math.cos(c)+d*Math.sin(-c)),y:t.y-(d*Math.cos(c)+h*Math.sin(c))}),this._fire("transform",{evt:e,target:this.getNode()}),this.getNode()._fire("transform",{evt:e,target:this.getNode()}),this.update(),this.getLayer().batchDraw()},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype.update=function(){var t=this,e=this._getNodeRect(),n=this.getNode(),i={x:1,y:1};n&&n.getParent()&&(i=n.getParent().getAbsoluteScale());var r={x:1/i.x,y:1/i.y},a=e.width,s=e.height,l=this.enabledAnchors(),c=this.resizeEnabled(),u=this.padding(),h=this.anchorSize();this.find("._anchor").each(function(e){return e.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:t.anchorStroke(),strokeWidth:t.anchorStrokeWidth(),fill:t.anchorFill(),cornerRadius:t.anchorCornerRadius()})}),this.findOne(".top-left").setAttrs({x:-u,y:-u,scale:r,visible:c&&l.indexOf("top-left")>=0}),this.findOne(".top-center").setAttrs({x:a/2,y:-u,scale:r,visible:c&&l.indexOf("top-center")>=0}),this.findOne(".top-right").setAttrs({x:a+u,y:-u,scale:r,visible:c&&l.indexOf("top-right")>=0}),this.findOne(".middle-left").setAttrs({x:-u,y:s/2,scale:r,visible:c&&l.indexOf("middle-left")>=0}),this.findOne(".middle-right").setAttrs({x:a+u,y:s/2,scale:r,visible:c&&l.indexOf("middle-right")>=0}),this.findOne(".bottom-left").setAttrs({x:-u,y:s+u,scale:r,visible:c&&l.indexOf("bottom-left")>=0}),this.findOne(".bottom-center").setAttrs({x:a/2,y:s+u,scale:r,visible:c&&l.indexOf("bottom-center")>=0}),this.findOne(".bottom-right").setAttrs({x:a+u,y:s+u,scale:r,visible:c&&l.indexOf("bottom-right")>=0});var d=-this.rotateAnchorOffset()*Math.abs(r.y);this.findOne(".rotater").setAttrs({x:a/2,y:d*o.Util._sign(s)-u,scale:r,visible:this.rotateEnabled()}),this.findOne(".back").setAttrs({width:a*i.x,height:s*i.y,scale:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash()})},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),c.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return a.Node.prototype.toObject.call(this)},e}(c.Group);e.Transformer=m,m.prototype.className="Transformer",d._registerNode(m),r.Factory.addGetterSetter(m,"enabledAnchors",v,function(t){return t instanceof Array||o.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(t){-1===v.indexOf(t)&&o.Util.warn("Unknown anchor name: "+t+". Available names are: "+v.join(", "))}),t||[]}),r.Factory.addGetterSetter(m,"resizeEnabled",!0),r.Factory.addGetterSetter(m,"anchorSize",10,h.getNumberValidator()),r.Factory.addGetterSetter(m,"rotateEnabled",!0),r.Factory.addGetterSetter(m,"rotationSnaps",[]),r.Factory.addGetterSetter(m,"rotateAnchorOffset",50,h.getNumberValidator()),r.Factory.addGetterSetter(m,"rotationSnapTolerance",5,h.getNumberValidator()),r.Factory.addGetterSetter(m,"borderEnabled",!0),r.Factory.addGetterSetter(m,"anchorStroke","rgb(0, 161, 255)"),r.Factory.addGetterSetter(m,"anchorStrokeWidth",1,h.getNumberValidator()),r.Factory.addGetterSetter(m,"anchorFill","white"),r.Factory.addGetterSetter(m,"anchorCornerRadius",0,h.getNumberValidator()),r.Factory.addGetterSetter(m,"borderStroke","rgb(0, 161, 255)"),r.Factory.addGetterSetter(m,"borderStrokeWidth",1,h.getNumberValidator()),r.Factory.addGetterSetter(m,"borderDash"),r.Factory.addGetterSetter(m,"keepRatio",!0),r.Factory.addGetterSetter(m,"centeredScaling",!1),r.Factory.addGetterSetter(m,"ignoreStroke",!1),r.Factory.addGetterSetter(m,"padding",0,h.getNumberValidator()),r.Factory.addGetterSetter(m,"node"),r.Factory.addGetterSetter(m,"boundBoxFunc"),r.Factory.backCompat(m,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),o.Collection.mapMethods(m)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var t,i=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(1),a=n(9),s=n(2),l=n(3),c=n(2),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,s.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(a.Shape);e.Wedge=u,u.prototype.className="Wedge",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],c._registerNode(u),r.Factory.addGetterSetter(u,"radius",0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"angle",0,l.getNumberValidator()),r.Factory.addGetterSetter(u,"clockwise",!1),r.Factory.backCompat(u,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),o.Collection.mapMethods(u)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var n,i,o,l,c,u,h,d,f,p,y,g,v,m,b,_,w,x,T,S,E,P,C,O,D=t.data,A=t.width,k=t.height,I=e+e+1,L=A-1,M=k-1,R=e+1,N=R*(R+1)/2,F=new r,j=null,U=F,z=null,W=null,G=a[e],B=s[e];for(o=1;o<I;o++)U=U.next=new r,o===R&&(j=U);for(U.next=F,h=u=0,i=0;i<k;i++){for(_=w=x=T=d=f=p=y=0,g=R*(S=D[u]),v=R*(E=D[u+1]),m=R*(P=D[u+2]),b=R*(C=D[u+3]),d+=N*S,f+=N*E,p+=N*P,y+=N*C,U=F,o=0;o<R;o++)U.r=S,U.g=E,U.b=P,U.a=C,U=U.next;for(o=1;o<R;o++)l=u+((L<o?L:o)<<2),d+=(U.r=S=D[l])*(O=R-o),f+=(U.g=E=D[l+1])*O,p+=(U.b=P=D[l+2])*O,y+=(U.a=C=D[l+3])*O,_+=S,w+=E,x+=P,T+=C,U=U.next;for(z=F,W=j,n=0;n<A;n++)D[u+3]=C=y*G>>B,0!==C?(C=255/C,D[u]=(d*G>>B)*C,D[u+1]=(f*G>>B)*C,D[u+2]=(p*G>>B)*C):D[u]=D[u+1]=D[u+2]=0,d-=g,f-=v,p-=m,y-=b,g-=z.r,v-=z.g,m-=z.b,b-=z.a,l=h+((l=n+e+1)<L?l:L)<<2,_+=z.r=D[l],w+=z.g=D[l+1],x+=z.b=D[l+2],T+=z.a=D[l+3],d+=_,f+=w,p+=x,y+=T,z=z.next,g+=S=W.r,v+=E=W.g,m+=P=W.b,b+=C=W.a,_-=S,w-=E,x-=P,T-=C,W=W.next,u+=4;h+=A}for(n=0;n<A;n++){for(w=x=T=_=f=p=y=d=0,g=R*(S=D[u=n<<2]),v=R*(E=D[u+1]),m=R*(P=D[u+2]),b=R*(C=D[u+3]),d+=N*S,f+=N*E,p+=N*P,y+=N*C,U=F,o=0;o<R;o++)U.r=S,U.g=E,U.b=P,U.a=C,U=U.next;for(c=A,o=1;o<=e;o++)u=c+n<<2,d+=(U.r=S=D[u])*(O=R-o),f+=(U.g=E=D[u+1])*O,p+=(U.b=P=D[u+2])*O,y+=(U.a=C=D[u+3])*O,_+=S,w+=E,x+=P,T+=C,U=U.next,o<M&&(c+=A);for(u=n,z=F,W=j,i=0;i<k;i++)D[3+(l=u<<2)]=C=y*G>>B,C>0?(C=255/C,D[l]=(d*G>>B)*C,D[l+1]=(f*G>>B)*C,D[l+2]=(p*G>>B)*C):D[l]=D[l+1]=D[l+2]=0,d-=g,f-=v,p-=m,y-=b,g-=z.r,v-=z.g,m-=z.b,b-=z.a,l=n+((l=i+R)<M?l:M)*A<<2,d+=_+=z.r=D[l],f+=w+=z.g=D[l+1],p+=x+=z.b=D[l+2],y+=T+=z.a=D[l+3],z=z.next,g+=S=W.r,v+=E=W.g,m+=P=W.b,b+=C=W.a,_-=S,w-=E,x-=P,T-=C,W=W.next,u+=A}}(t,e)},t.Factory.addGetterSetter(i.Node,"blurRadius",0,o.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);e.Brighten=function(t){var e,n=255*this.brightness(),i=t.data,o=i.length;for(e=0;e<o;e+=4)i[e]+=n,i[e+1]+=n,i[e+2]+=n},t.Factory.addGetterSetter(i.Node,"brightness",0,o.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);e.Contrast=function(t){var e,n=Math.pow((this.contrast()+100)/100,2),i=t.data,o=i.length,r=150,a=150,s=150;for(e=0;e<o;e+=4)r=i[e],a=i[e+1],s=i[e+2],r/=255,r-=.5,r*=n,r+=.5,a/=255,a-=.5,a*=n,a+=.5,s/=255,s-=.5,s*=n,s+=.5,r=(r*=255)<0?0:r>255?255:r,a=(a*=255)<0?0:a>255?255:a,s=(s*=255)<0?0:s>255?255:s,i[e]=r,i[e+1]=a,i[e+2]=s},t.Factory.addGetterSetter(i.Node,"contrast",0,o.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(4),r=n(3);e.Emboss=function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),i=this.embossDirection(),r=this.embossBlend(),a=0,s=0,l=t.data,c=t.width,u=t.height,h=4*c,d=u;switch(i){case"top-left":a=-1,s=-1;break;case"top":a=-1,s=0;break;case"top-right":a=-1,s=1;break;case"right":a=0,s=1;break;case"bottom-right":a=1,s=1;break;case"bottom":a=1,s=0;break;case"bottom-left":a=1,s=-1;break;case"left":a=0,s=-1;break;default:o.Util.error("Unknown emboss direction: "+i)}do{var f=(d-1)*h,p=a;d+p<1&&(p=0),d+p>u&&(p=0);var y=(d-1+p)*c*4,g=c;do{var v=f+4*(g-1),m=s;g+m<1&&(m=0),g+m>c&&(m=0);var b=y+4*(g-1+m),_=l[v]-l[b],w=l[v+1]-l[b+1],x=l[v+2]-l[b+2],T=_,S=T>0?T:-T,E=w>0?w:-w,P=x>0?x:-x;if(E>S&&(T=w),P>S&&(T=x),T*=e,r){var C=l[v]+T,O=l[v+1]+T,D=l[v+2]+T;l[v]=C>255?255:C<0?0:C,l[v+1]=O>255?255:O<0?0:O,l[v+2]=D>255?255:D<0?0:D}else{var A=n-T;A<0?A=0:A>255&&(A=255),l[v]=l[v+1]=l[v+2]=A}}while(--g)}while(--d)},t.Factory.addGetterSetter(i.Node,"embossStrength",.5,r.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(i.Node,"embossWhiteLevel",.5,r.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(i.Node,"embossDirection","top-left",null,t.Factory.afterSetFilter),t.Factory.addGetterSetter(i.Node,"embossBlend",!1,null,t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);function r(t,e,n,i,o){var r=n-e,a=o-i;return 0===r?i+a/2:0===a?i:a*((t-e)/r)+i}e.Enhance=function(t){var e,n,i,o,a=t.data,s=a.length,l=a[0],c=l,u=a[1],h=u,d=a[2],f=d,p=this.enhance();if(0!==p){for(o=0;o<s;o+=4)(e=a[o+0])<l?l=e:e>c&&(c=e),(n=a[o+1])<u?u=n:n>h&&(h=n),(i=a[o+2])<d?d=i:i>f&&(f=i);var y,g,v,m,b,_,w,x,T;for(c===l&&(c=255,l=0),h===u&&(h=255,u=0),f===d&&(f=255,d=0),p>0?(g=c+p*(255-c),v=l-p*(l-0),b=h+p*(255-h),_=u-p*(u-0),x=f+p*(255-f),T=d-p*(d-0)):(g=c+p*(c-(y=.5*(c+l))),v=l+p*(l-y),b=h+p*(h-(m=.5*(h+u))),_=u+p*(u-m),x=f+p*(f-(w=.5*(f+d))),T=d+p*(d-w)),o=0;o<s;o+=4)a[o+0]=r(a[o+0],l,c,v,g),a[o+1]=r(a[o+1],u,h,_,b),a[o+2]=r(a[o+2],d,f,T,x)}},t.Factory.addGetterSetter(i.Node,"enhance",0,o.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=function(t){var e,n,i=t.data,o=i.length;for(e=0;e<o;e+=4)n=.34*i[e]+.5*i[e+1]+.16*i[e+2],i[e]=n,i[e+1]=n,i[e+2]=n}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);t.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(i.Node,"luminance",0,o.getNumberValidator(),t.Factory.afterSetFilter),e.HSL=function(t){var e,n,i,o,r,a=t.data,s=a.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=127*this.luminance(),h=1*l*Math.cos(c*Math.PI/180),d=1*l*Math.sin(c*Math.PI/180),f=.299+.701*h+.167*d,p=.587-.587*h+.33*d,y=.114-.114*h-.497*d,g=.299-.299*h-.328*d,v=.587+.413*h+.035*d,m=.114-.114*h+.293*d,b=.299-.3*h+1.25*d,_=.587-.586*h-1.05*d,w=.114+.886*h-.2*d;for(e=0;e<s;e+=4)n=a[e+0],i=a[e+1],o=a[e+2],r=a[e+3],a[e+0]=f*n+p*i+y*o+u,a[e+1]=g*n+v*i+m*o+u,a[e+2]=b*n+_*i+w*o+u,a[e+3]=r}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);e.HSV=function(t){var e,n,i,o,r,a=t.data,s=a.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,h=l*c*Math.cos(u*Math.PI/180),d=l*c*Math.sin(u*Math.PI/180),f=.299*l+.701*h+.167*d,p=.587*l-.587*h+.33*d,y=.114*l-.114*h-.497*d,g=.299*l-.299*h-.328*d,v=.587*l+.413*h+.035*d,m=.114*l-.114*h+.293*d,b=.299*l-.3*h+1.25*d,_=.587*l-.586*h-1.05*d,w=.114*l+.886*h-.2*d;for(e=0;e<s;e+=4)n=a[e+0],i=a[e+1],o=a[e+2],r=a[e+3],a[e+0]=f*n+p*i+y*o,a[e+1]=g*n+v*i+m*o,a[e+2]=b*n+_*i+w*o,a[e+3]=r},t.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(i.Node,"value",0,o.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=function(t){var e,n=t.data,i=n.length;for(e=0;e<i;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(4),r=n(3);e.Kaleidoscope=function(t){var e,n,i,r,a,s,l,c,u,h,d=t.width,f=t.height,p=Math.round(this.kaleidoscopePower()),y=Math.round(this.kaleidoscopeAngle()),g=Math.floor(d*(y%360)/360);if(!(p<1)){var v=o.Util.createCanvasElement();v.width=d,v.height=f;var m=v.getContext("2d").getImageData(0,0,d,f);!function(t,e,n){var i,o,r,a,s=t.data,l=e.data,c=t.width,u=t.height,h=n.polarCenterX||c/2,d=n.polarCenterY||u/2,f=0,p=0,y=0,g=0,v=Math.sqrt(h*h+d*d);o=c-h,r=u-d,a=Math.sqrt(o*o+r*r),v=a>v?a:v;var m,b,_,w,x=u,T=c,S=360/T*Math.PI/180;for(b=0;b<T;b+=1)for(_=Math.sin(b*S),w=Math.cos(b*S),m=0;m<x;m+=1)o=Math.floor(h+v*m/x*w),r=Math.floor(d+v*m/x*_),f=s[0+(i=4*(r*c+o))],p=s[i+1],y=s[i+2],g=s[i+3],l[0+(i=4*(b+m*c))]=f,l[i+1]=p,l[i+2]=y,l[i+3]=g}(t,m,{polarCenterX:d/2,polarCenterY:f/2});for(var b=d/Math.pow(2,p);b<=8;)b*=2,p-=1;var _=b=Math.ceil(b),w=0,x=_,T=1;for(g+b>d&&(w=_,x=0,T=-1),n=0;n<f;n+=1)for(e=w;e!==x;e+=T)i=Math.round(e+g)%d,u=4*(d*n+i),a=m.data[u+0],s=m.data[u+1],l=m.data[u+2],c=m.data[u+3],h=4*(d*n+e),m.data[h+0]=a,m.data[h+1]=s,m.data[h+2]=l,m.data[h+3]=c;for(n=0;n<f;n+=1)for(_=Math.floor(b),r=0;r<p;r+=1){for(e=0;e<_+1;e+=1)u=4*(d*n+e),a=m.data[u+0],s=m.data[u+1],l=m.data[u+2],c=m.data[u+3],h=4*(d*n+2*_-e-1),m.data[h+0]=a,m.data[h+1]=s,m.data[h+2]=l,m.data[h+3]=c;_*=2}!function(t,e,n){var i,o,r,a,s,l,c=t.data,u=e.data,h=t.width,d=t.height,f=n.polarCenterX||h/2,p=n.polarCenterY||d/2,y=0,g=0,v=0,m=0,b=Math.sqrt(f*f+p*p);o=h-f,r=d-p,l=Math.sqrt(o*o+r*r),b=l>b?l:b;var _,w,x,T,S=d,E=h,P=n.polarRotation||0;for(o=0;o<h;o+=1)for(r=0;r<d;r+=1)a=o-f,s=r-p,_=Math.sqrt(a*a+s*s)*S/b,w=(w=(180*Math.atan2(s,a)/Math.PI+360+P)%360)*E/360,x=Math.floor(w),T=Math.floor(_),y=c[0+(i=4*(T*h+x))],g=c[i+1],v=c[i+2],m=c[i+3],u[0+(i=4*(r*h+o))]=y,u[i+1]=g,u[i+2]=v,u[i+3]=m}(m,t,{polarRotation:0})}},t.Factory.addGetterSetter(i.Node,"kaleidoscopePower",2,r.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(i.Node,"kaleidoscopeAngle",0,r.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);function r(t,e,n){var i=4*(n*t.width+e),o=[];return o.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),o}function a(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=this.threshold(),n=function(t,e){var n=r(t,0,0),i=r(t,t.width-1,0),o=r(t,0,t.height-1),s=r(t,t.width-1,t.height-1),l=e||10;if(a(n,i)<l&&a(i,s)<l&&a(s,o)<l&&a(o,n)<l){for(var c=function(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([i,n,s,o]),u=[],h=0;h<t.width*t.height;h++){var d=a(c,[t.data[4*h],t.data[4*h+1],t.data[4*h+2]]);u[h]=d<l?0:255}return u}}(t,e);return n&&(n=function(t,e,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),a=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,h=0;h<o;h++)for(var d=0;d<o;d++){var f=s+h-r,p=l+d-r;if(f>=0&&f<n&&p>=0&&p<e){var y=f*e+p,g=i[h*o+d];u+=t[y]*g}}a[c]=u}return a}(n=function(t,e,n){for(var i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),a=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,h=0;h<o;h++)for(var d=0;d<o;d++){var f=s+h-r,p=l+d-r;if(f>=0&&f<n&&p>=0&&p<e){var y=f*e+p,g=i[h*o+d];u+=t[y]*g}}a[c]=u>=1020?255:0}return a}(n=function(t,e,n){for(var i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),r=Math.floor(o/2),a=[],s=0;s<n;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,h=0;h<o;h++)for(var d=0;d<o;d++){var f=s+h-r,p=l+d-r;if(f>=0&&f<n&&p>=0&&p<e){var y=f*e+p,g=i[h*o+d];u+=t[y]*g}}a[c]=2040===u?255:0}return a}(n,t.width,t.height),t.width,t.height),t.width,t.height),function(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}(t,n)),t},t.Factory.addGetterSetter(i.Node,"threshold",0,o.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);e.Noise=function(t){var e,n=255*this.noise(),i=t.data,o=i.length,r=n/2;for(e=0;e<o;e+=4)i[e+0]+=r-2*r*Math.random(),i[e+1]+=r-2*r*Math.random(),i[e+2]+=r-2*r*Math.random()},t.Factory.addGetterSetter(i.Node,"noise",.2,o.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(4),o=n(7),r=n(3);e.Pixelate=function(t){var e,n,o,r,a,s,l,c,u,h,d,f,p,y,g=Math.ceil(this.pixelSize()),v=t.width,m=t.height,b=Math.ceil(v/g),_=Math.ceil(m/g),w=t.data;if(g<=0)i.Util.error("pixelSize value can not be <= 0");else for(f=0;f<b;f+=1)for(p=0;p<_;p+=1){for(r=0,a=0,s=0,l=0,u=(c=f*g)+g,d=(h=p*g)+g,y=0,e=c;e<u;e+=1)if(!(e>=v))for(n=h;n<d;n+=1)n>=m||(r+=w[0+(o=4*(v*n+e))],a+=w[o+1],s+=w[o+2],l+=w[o+3],y+=1);for(r/=y,a/=y,s/=y,l/=y,e=c;e<u;e+=1)if(!(e>=v))for(n=h;n<d;n+=1)n>=m||(w[0+(o=4*(v*n+e))]=r,w[o+1]=a,w[o+2]=s,w[o+3]=l)}},t.Factory.addGetterSetter(o.Node,"pixelSize",8,r.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);e.Posterize=function(t){var e,n=Math.round(254*this.levels())+1,i=t.data,o=i.length,r=255/n;for(e=0;e<o;e+=1)i[e]=Math.floor(i[e]/r)*r},t.Factory.addGetterSetter(i.Node,"levels",.5,o.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);e.RGB=function(t){var e,n,i=t.data,o=i.length,r=this.red(),a=this.green(),s=this.blue();for(e=0;e<o;e+=4)n=(.34*i[e]+.5*i[e+1]+.16*i[e+2])/255,i[e]=n*r,i[e+1]=n*a,i[e+2]=n*s,i[e+3]=i[e+3]},t.Factory.addGetterSetter(i.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),t.Factory.addGetterSetter(i.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),t.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);e.RGBA=function(t){var e,n,i=t.data,o=i.length,r=this.red(),a=this.green(),s=this.blue(),l=this.alpha();for(e=0;e<o;e+=4)n=1-l,i[e]=r*l+i[e]*n,i[e+1]=a*l+i[e+1]*n,i[e+2]=s*l+i[e+2]*n},t.Factory.addGetterSetter(i.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),t.Factory.addGetterSetter(i.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),t.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(i.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t})})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=function(t){var e,n,i,o,r=t.data,a=r.length;for(e=0;e<a;e+=4)n=r[e+0],i=r[e+1],o=r[e+2],r[e+0]=Math.min(255,.393*n+.769*i+.189*o),r[e+1]=Math.min(255,.349*n+.686*i+.168*o),r[e+2]=Math.min(255,.272*n+.534*i+.131*o)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=function(t){var e=t.data,n=t.width,i=t.height,o=4*n,r=i;do{var a=(r-1)*o,s=n;do{var l=a+4*(s-1),c=e[l],u=e[l+1],h=e[l+2];c>127&&(c=255-c),u>127&&(u=255-u),h>127&&(h=255-h),e[l]=c,e[l+1]=u,e[l+2]=h}while(--s)}while(--r)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(1),i=n(7),o=n(3);e.Threshold=function(t){var e,n=255*this.threshold(),i=t.data,o=i.length;for(e=0;e<o;e+=1)i[e]=i[e]<n?0:255},t.Factory.addGetterSetter(i.Node,"threshold",.5,o.getNumberValidator(),t.Factory.afterSetFilter)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.SmoothPen=void 0;var t=n(5),i=n(167),o=.5;e.SmoothPen=function(t){function e(n,r,a,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r,a,s,l)),u=document.createElement("canvas");return Math.max(window.devicePixelRatio||1,1),u.width=n.width(),u.height=n.height(),c.shape=new Konva.Image({image:u}),c.templayer.add(c.shape),window.sg=c.signaturePad=new i.SignaturePad(u,{penColor:c.style.stroke,maxWidth:c.style.strokeWidth,minWidth:o,minDistance:1}),c.replyData=[],c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.style.stroke],this.pressure,Date.now()]},e.prototype.centerDataTemp=function(t){return[t.x,t.y,this.clientid,this.pressure,Date.now()]},e.prototype.endDataTemp=function(t){return[[t.x,t.y,this.clientid,this.pressure,Date.now(),!0]]},e.prototype.pushPoint=function(e,n){if(t.prototype.pushPoint.call(this,e),n){var i=this.middlePoints[this.middlePoints.length-2],r=this.middlePoints[this.middlePoints.length-1];this.replyData.push({time:n,x:i,y:r})}else{if(this.signaturePad.minWidth=o*this.pressure,this.signaturePad.maxWidth=this.style.strokeWidth*this.pressure,2===this.middlePoints.length){var a={x:this.middlePoints[0],y:this.middlePoints[1]};this.signaturePad._mouseButtonDown=!0,this.signaturePad._strokeBegin({clientX:a.x,clientY:a.y})}var s={x:this.middlePoints[this.middlePoints.length-2],y:this.middlePoints[this.middlePoints.length-1]};this.signaturePad._strokeUpdate({clientX:s.x,clientY:s.y})}},e.prototype.draw=function(){"replayData"!==this.showtype&&this.templayer.batchDraw()},e.prototype.endDraw=function(e){t.prototype.endDraw.call(this);var n={x:this.middlePoints[this.middlePoints.length-2],y:this.middlePoints[this.middlePoints.length-1]};e?(this.replyData.push({time:e,x:n.x,y:n.y}),this.signaturePad.fromData([{color:this.style.stroke,points:this.replyData}]),this.replyData=[]):(this.signaturePad._strokeEnd({clientX:n.x,clientY:n.y}),this.signaturePad._mouseButtonDown=!1)},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0;
/*!
   * canvas 
   */
var t=function(){function t(t,e,n){this.x=t,this.y=e,this.time=n||Date.now()}return t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},t.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0},t}(),n=function(){function e(t,e,n,i,o,r){this.startPoint=t,this.control2=e,this.control1=n,this.endPoint=i,this.startWidth=o,this.endWidth=r}return e.fromPoints=function(t,n){var i=this.calculateControlPoints(t[0],t[1],t[2]).c2,o=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new e(t[1],i,o,t[2],n.start,n.end)},e.calculateControlPoints=function(e,n,i){var o=e.x-n.x,r=e.y-n.y,a=n.x-i.x,s=n.y-i.y,l={x:(e.x+n.x)/2,y:(e.y+n.y)/2},c={x:(n.x+i.x)/2,y:(n.y+i.y)/2},u=Math.sqrt(o*o+r*r),h=Math.sqrt(a*a+s*s),d=l.x-c.x,f=l.y-c.y,p=h/(u+h),y={x:c.x+d*p,y:c.y+f*p},g=n.x-y.x,v=n.y-y.y;return{c1:new t(l.x+g,l.y+v),c2:new t(c.x+g,c.y+v)}},e.prototype.length=function(){for(var t,e,n=0,i=0;i<=10;i+=1){var o=i/10,r=this.point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var s=r-t,l=a-e;n+=Math.sqrt(s*s+l*l)}t=r,e=a}return n},e.prototype.point=function(t,e,n,i,o){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*i*(1-t)*t*t+o*t*t*t},e}();e.SignaturePad=function(){function e(t,n){void 0===n&&(n={isAction:!1});var i=this;this.canvas=t,this.options=n,this._handleMouseDown=function(t){1===t.which&&(i._mouseButtonDown=!0,i._strokeBegin(t))},this._handleMouseMove=function(t){i._mouseButtonDown&&i._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&i._mouseButtonDown&&(i._mouseButtonDown=!1,i._strokeEnd(t))},this._handleTouchStart=function(t){if(t.preventDefault(),1===t.targetTouches.length){var e=t.changedTouches[0];i._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];i._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){var e=t.target===i.canvas;if(e){t.preventDefault();var n=t.changedTouches[0];i._strokeEnd(n)}},this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=function(t,e){void 0===e&&(e=250);var n,i,o,r=0,a=null,s=function(){r=Date.now(),a=null,n=t.apply(i,o),a||(i=null,o=[])};return function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var u=Date.now(),h=e-(u-r);return i=this,o=l,h<=0||h>e?(a&&(clearTimeout(a),a=null),r=u,n=t.apply(i,o),a||(i=null,o=[])):a||(a=window.setTimeout(s,h)),n}}(e.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=e.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._ctx=t.getContext("2d"),this.clear(),n.isAction&&this.on()}return e.prototype.clear=function(){var t=this._ctx,e=this.canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},e.prototype.fromDataURL=function(t,e,n){var i=this;void 0===e&&(e={});var o=new Image,r=e.ratio||window.devicePixelRatio||1,a=e.width||this.canvas.width/r,s=e.height||this.canvas.height/r;this._reset(),o.onload=function(){i._ctx.drawImage(o,0,0,a,s),n&&n()},o.onerror=function(t){n&&n(t)},o.src=t,this._isEmpty=!1},e.prototype.toDataURL=function(t,e){switch(void 0===t&&(t="image/png"),t){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(t,e)}},e.prototype.on=function(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())},e.prototype.off=function(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)},e.prototype.isEmpty=function(){return this._isEmpty},e.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(t){var n=t.color,i=t.curve;return e._drawCurve({color:n,curve:i})},function(t){var n=t.color,i=t.point;return e._drawDot({color:n,point:i})}),this._data=t},e.prototype.toData=function(){return this._data},e.prototype._strokeBegin=function(t){var e={color:this.penColor,points:[]};"function"==typeof this.onBegin&&this.onBegin(t),this._data.push(e),this._reset(),this._strokeUpdate(t)},e.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,i=this._createPoint(e,n),o=this._data[this._data.length-1],r=o.points,a=r.length>0&&r[r.length-1],s=!!a&&i.distanceTo(a)<=this.minDistance,l=o.color;if(!a||!a||!s){var c=this._addPoint(i);a?c&&this._drawCurve({color:l,curve:c}):this._drawDot({color:l,point:i}),r.push({time:i.time,x:i.x,y:i.y})}},e.prototype._strokeEnd=function(t){this._strokeUpdate(t),"function"==typeof this.onEnd&&this.onEnd(t)},e.prototype._handlePointerEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)},e.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},e.prototype._handleTouchEvents=function(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)},e.prototype._reset=function(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},e.prototype._createPoint=function(e,n){var i=this.canvas.getBoundingClientRect();return new t(e-i.left,n-i.top,(new Date).getTime())},e.prototype._addPoint=function(t){var e=this._lastPoints;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);var i=this._calculateCurveWidths(e[1],e[2]),o=n.fromPoints(e,i);return e.shift(),o}return null},e.prototype._calculateCurveWidths=function(t,e){var n=this.velocityFilterWeight*e.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(n),o={end:i,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=i,o},e.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},e.prototype._drawCurveSegment=function(t,e,n){var i=this._ctx;i.moveTo(t,e),i.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},e.prototype._drawCurve=function(t){var e=t.color,n=t.curve,i=this._ctx,o=n.endWidth-n.startWidth,r=2*Math.floor(n.length());i.beginPath(),i.fillStyle=e,i.strokeStyle=e;for(var a=0;a<r;a+=1){var s=a/r,l=s*s,c=l*s,u=1-s,h=u*u,d=h*u,f=d*n.startPoint.x;f+=3*h*s*n.control1.x,f+=3*u*l*n.control2.x,f+=c*n.endPoint.x;var p=d*n.startPoint.y;p+=3*h*s*n.control1.y,p+=3*u*l*n.control2.y,p+=c*n.endPoint.y;var y=n.startWidth+c*o;this._drawCurveSegment(f,p,y)}i.closePath(),i.fill(),i.stroke()},e.prototype._drawDot=function(t){var e=t.color,n=t.point,i=this._ctx,o="function"==typeof this.dotSize?this.dotSize():this.dotSize;i.beginPath(),this._drawCurveSegment(n.x,n.y,o),i.closePath(),i.fillStyle=e,i.strokeStyle=e,i.fill(),i.stroke()},e.prototype._fromData=function(e,n,i){for(var o=0,r=e;o<r.length;o++){var a=r[o],s=a.color,l=a.points;if(l.length>1)for(var c=0;c<l.length;c+=1){var u=l[c],h=new t(u.x,u.y,u.time);this.penColor=s,0===c&&this._reset();var d=this._addPoint(h);d&&n({color:s,curve:d})}else this._reset(),i({color:s,point:l[0]})}},e.prototype._toSVG=function(){var t=this,e=this._data,n=Math.max(window.devicePixelRatio||1,1),i=this.canvas.width/n,o=this.canvas.height/n,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("width",this.canvas.width.toString()),r.setAttribute("height",this.canvas.height.toString()),this._fromData(e,function(t){var e=t.color,n=t.curve,i=document.createElement("path");if(!(isNaN(n.control1.x)||isNaN(n.control1.y)||isNaN(n.control2.x)||isNaN(n.control2.y))){var o="M "+n.startPoint.x.toFixed(3)+","+n.startPoint.y.toFixed(3)+" C "+n.control1.x.toFixed(3)+","+n.control1.y.toFixed(3)+" "+n.control2.x.toFixed(3)+","+n.control2.y.toFixed(3)+" "+n.endPoint.x.toFixed(3)+","+n.endPoint.y.toFixed(3);i.setAttribute("d",o),i.setAttribute("stroke-width",(2.25*n.endWidth).toFixed(3)),i.setAttribute("stroke",e),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),r.appendChild(i)}},function(e){var n=e.color,i=e.point,o=document.createElement("circle"),a="function"==typeof t.dotSize?t.dotSize():t.dotSize;o.setAttribute("r",a.toString()),o.setAttribute("cx",i.x.toString()),o.setAttribute("cy",i.y.toString()),o.setAttribute("fill",n),r.appendChild(o)});var a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+i+" "+o+'" width="'+i+'" height="'+o+'">',s=r.innerHTML;if(void 0===s){var l=document.createElement("dummy"),c=r.childNodes;l.innerHTML="";for(var u=0;u<c.length;u+=1)l.appendChild(c[u].cloneNode(!0));s=l.innerHTML}var h=a+s+"</svg>";return"data:image/svg+xml;base64,"+btoa(h)},e}()})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.RoboPen=void 0;var t=n(5);e.RoboPen=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return s.canvas=document.createElement("canvas"),s.canvas.width=n.width(),s.canvas.height=n.height(),s.shape=new Konva.Image({image:s.canvas}),s.canvas.getContext("2d").translate(.5,.5),s.templayer.add(s.shape),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.style.stroke],this.pressure]},e.prototype.centerDataTemp=function(t){return[t.x,t.y,this.clientid,this.pressure]},e.prototype.endDataTemp=function(t){return[[t.x,t.y,this.clientid,this.pressure,!0]]},e.prototype.pushPoint=function(e,n){if(t.prototype.pushPoint.call(this,e),2===this.middlePoints.length){var i={x:this.middlePoints[0],y:this.middlePoints[1]};this.begin(i.x,i.y)}else{var o={x:this.middlePoints[this.middlePoints.length-2],y:this.middlePoints[this.middlePoints.length-1]};this.drawPen(o.x,o.y,this.pressure*this.style.strokeWidth,this.style.stroke)}},e.prototype.draw=function(){"replayData"!==this.showtype&&this.templayer.batchDraw()},e.prototype.endDraw=function(t){this.end();var e=this.shape.clone();this.shape.remove(),this.shape.destroy(),this.canvas=null,this.showlayer.add(e),"replayData"===this.showtype?this.showlayer.batchDraw():e.draw()},e.prototype.begin=function(t,e){this.canvas[this.clientid]={},this.canvas[this.clientid].index=0,this.canvas[this.clientid].lastX=t/1,this.canvas[this.clientid].lastY=e/1},e.prototype.drawPen=function(t,e,n,i){var o=this.canvas.getContext("2d");this.drawBezier(o,t/1,e/1,n,i)},e.prototype.end=function(){if(this.canvas[this.clientid].index>0){var t=this.canvas.getContext("2d");t.beginPath(),t.fillStyle=this.style.stroke,t.moveTo(this.canvas[this.clientid].lastMidX,this.canvas[this.clientid].lastMidY),t.lineTo(this.canvas[this.clientid].lastX,this.canvas[this.clientid].lastY),t.stroke(),t.fill()}},e.prototype.drawBezier=function(t,e,n,i,o){t.lineWidth=i,t.strokeStyle=o,t.lineCap="round",t.lineJoin="round",t.beginPath();var r=(e+this.canvas[this.clientid].lastX)/2,a=(n+this.canvas[this.clientid].lastY)/2;this.canvas[this.clientid].index++>0?(t.moveTo(this.canvas[this.clientid].lastMidX,this.canvas[this.clientid].lastMidY),t.quadraticCurveTo(this.canvas[this.clientid].lastX,this.canvas[this.clientid].lastY,r,a)):(t.moveTo(this.canvas[this.clientid].lastX,this.canvas[this.clientid].lastY),t.lineTo(r,a)),this.canvas[this.clientid].lastMidX=r,this.canvas[this.clientid].lastMidY=a,this.canvas[this.clientid].lastX=e,this.canvas[this.clientid].lastY=n,t.stroke()},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.RectEdit=void 0;var t=n(5),i=n(8),o=n(12);e.RectEdit=function(t){function e(n,i,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,r,a,s));return l.stage=n,i.name="editshape",l.shape=new Konva.Rect(i),l.templayer.add(l.shape),l.tr=(0,o.makeTransformer)(),l.tr.on("mousedown touchstart",function(t){l.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),l.startData=null,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return this.startData=[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.isFill?1:0,this.isFill?this.style.fill:this.style.stroke,this.isShift?1:0],[],[this.uid]],null},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return this.startData&&(this.startData[4][3]=this.isShift?1:0),[this.startData,[t.x,t.y,this.clientid,!0]]},e.prototype.draw=function(){this.middlePoints.length>3&&(this.shape.x(this.middlePoints[0]),this.shape.y(this.middlePoints[1]),this.isShift?(this.shape.width(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0]),this.shape.height(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0])):(this.shape.width(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0]),this.shape.height(this.middlePoints[this.middlePoints.length-1]-this.middlePoints[1])),"replayData"!==this.showtype&&this.templayer.batchDraw())},e.prototype.endDraw=function(){var t=this,e=this.shape.clone();this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),e.me=this,e.id(this.uid),"replayData"===this.showtype||e.draw(),e.on("click",function(n){if(t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?t.unfireEdit(e):t.fireEdit(e);var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}n.cancelBubble=!0}),e.on("mousedown touchstart",function(e){t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),e.on("dragmove",function(){console.log("dragmove")}),e.on("dragend",function(){if(console.log("dragend"),t.isSelected){t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),0],!0];t.stage.canvasaction.sendMessageToOutSider(a),t.stage.canvasaction.pushCatchData(a)}}),e.on("transform",function(){console.log("transform")}),e.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=e.scaleX(),s=e.scaleY(),l=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)})},e.prototype.fireEdit=function(t){var e=this;this.isSelected=!0,t.draggable(!0),this.stage.container().style.cursor="move",this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){console.log("mouseenter"),e.stage.container().style.cursor="move"}),t.on("mouseleave",function(){console.log("mouseleave"),e.stage.getIntersection(e.stage.getPointerPosition(),"Rect")!==t&&(e.stage.container().style.cursor="")}),this.showlayer.batchDraw()},e.prototype.unfireEdit=function(t){this.isSelected=!1,this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",t.draggable(!1),this.showlayer.batchDraw()},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.SelectShape=void 0;var t=n(5);e.SelectShape=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return s.shape=new Konva.Rect(Object.assign({},{fill:"green",shadowEnabled:!1,strokeWidth:1,opacity:.4})),s.templayer.add(s.shape),s.startData=null,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return null},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){var e=this.shape.getClientRect();for(var n in e)e[n]=e[n]*this.stage.scaleX();e.y=e.y+this.stage.y(),this.showlayer.find(".editshape").forEach(function(t){Konva.Util.haveIntersection(t.getClientRect(),e)?t.me&&t.me.fireEdit&&t.me.fireEdit(t):t.me&&t.me.unfireEdit&&t.me.unfireEdit(t)}),this.showlayer.batchDraw();var i=this.stage.canvasaction.options;i&&i.selectShapeCb&&i.selectShapeCb();var o=this.stage.getIntersection(this.stage.getPointerPosition(),".editshape");return console.log("lastShapess",o),this.stage.container().style.cursor=o?"move":"",null},e.prototype.draw=function(){this.middlePoints.length>3&&(this.shape.x(this.middlePoints[0]),this.shape.y(this.middlePoints[1]),this.isShift?(this.shape.width(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0]),this.shape.height(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0])):(this.shape.width(this.middlePoints[this.middlePoints.length-2]-this.middlePoints[0]),this.shape.height(this.middlePoints[this.middlePoints.length-1]-this.middlePoints[1])),"replayData"!==this.showtype&&this.templayer.batchDraw())},e.prototype.endDraw=function(){this.shape.remove(),this.templayer.draw()},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.EditRegularShape=void 0;var t=n(5);e.EditRegularShape=function(t){function e(n,i,o,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a,s));return l.data=s,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushPoint=function(e){t.prototype.pushPoint.call(this,e);var n=this.middlePoints.splice(this.middlePoints.length-2);console.log("this.middlePoints",n);var i=this.data,o=i[0],r=i[1],a=i[2],s=i[3],l=this.showlayer.findOne("#"+o);l&&(0===r?(l.x(n[0]),l.y(n[1])):1===r?(l.x(n[0]),l.y(n[1]),l.scaleX(a),l.scaleY(s)):2===r?l.me&&l.me.changeByPoint(l,n,a):3===r&&(l.x(n[0]),l.y(n[1]),l.me&&l.me.changeTextVal(l,a)))},e.prototype.startDataTemp=function(t){return null},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return null},e.prototype.draw=function(){},e.prototype.endDraw=function(){},e.prototype.changeRegular=function(){},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.PolygonEdit=void 0;var t=n(5),i=n(8),o=n(12);e.PolygonEdit=function(t){function e(n,r,a,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r,a,s,l));return c.shape=new Konva.Group({draggable:!1,name:"editshape"}),c.tr=(0,o.makeTransformer)(),c.tr.on("mousedown touchstart",function(t){c.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),c.line=new Konva.Line(r),c.line.lineCap("round"),c.line.lineJoin("round"),c.line.fill((0,o.hexToRgba)(r.stroke,.1)),c.shape.add(c.line),c.templayer.add(c.shape),c.controlPoints=[],c.tempAchor=(0,o.makeEditPoi)(r),c.isTempAchor=!0,o.makeMoveHover.bind(c)(c.tempAchor),c.tempAchor.on("dragmove",function(t){t.cancelBubble=!0;var e=t.target,n=e.parent,o=n.findOne("Line"),r=e.getAttr("pIndex"),a=o.points();a[r]=e.x(),a[r+1]=e.y(),n.children[r+2].x(e.x()+i.EDIT_LABLE_DXY.dx),n.children[r+2].y(e.y()+i.EDIT_LABLE_DXY.dy),o.points(a),o.draw(),c.fireEdit(n,!0)}),c.tempAchor.on("dragend",function(t){t.cancelBubble=!0;var e=t.target,n=e.getAttr("pIndex");c.stage.canvasaction.localClientId++;var r=e.x(),a=e.y(),s=[r*c.stage.scale().x,a*c.stage.scale().x,c.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.parent.id(),2,n/2],!0];c.stage.canvasaction.sendMessageToOutSider(s),c.stage.canvasaction.pushCatchData(s)}),c.shape.add(c.tempAchor),c.achorTextCode=c.stage.getCharLabel(),c.achorText=(0,o.makeTextPoi)(r,c.achorTextCode),c.shape.add(c.achorText),c.firstAchor=null,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return null},e.prototype.moveAchorText=function(t,e){var n=this,i=e.points(),o=t.find("Text");o.forEach(function(e,o){console.log("index",2*o,2*o+1,i[2*o],i[2*o+1]),e.x(i[2*o]),e.y(i[2*o+1]),n.fitAchorText(e,t)})},e.prototype.fitAchorText=function(t,e){var n=e.findOne("Line"),i=n.getClientRect(),o=t.getClientRect(),r=t.getClientRect(),a=t.getClientRect(),s=t.getClientRect();o.y=o.y-16,r.y=r.y+16,a.x=a.x-16,s.x=s.x+16;var l=[{rect:o,rect2:Object.assign({},o,{x:o.x+16}),dx:0,dy:-16,align:"center",verticalAlign:"bottom"},{rect:r,rect2:Object.assign({},r,{x:r.x+16}),dx:0,dy:6,align:"center",verticalAlign:"top"},{rect:a,rect2:a,dx:-16,dy:0,align:"right",verticalAlign:"middle"},{rect:s,rect2:s,dx:6,dy:0,align:"left",verticalAlign:"middle"}],c=l.length,u=n.points(),h=t.getAttr("pIndex");if(isNaN(i.x))return t.x(this.controlPoints[h]+l[0].dx),void t.y(this.controlPoints[h+1]+l[0].dy);for(var d=2,f=0;f<c;f++)if(this.stage.getIntersection(l[f].rect)!==n&&this.stage.getIntersection(l[f].rect2)!==n){d=f;break}t.x(u[h]+l[d].dx),t.y(u[h+1]+l[d].dy)},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return[[0,0,this.clientid,this.toolname,[this.style.strokeWidth,this.style.stroke],[],[this.uid,this.controlPoints,this.isTempAchor?1:0]]]},e.prototype.pushPoint=function(t){this.middlePoints=this.controlPoints.concat([t.x/this.stage.scale().x,t.y/this.stage.scale().x]),this.tempAchor.x(this.middlePoints[this.middlePoints.length-2]),this.tempAchor.y(this.middlePoints[this.middlePoints.length-1]),this.achorText.x(this.middlePoints[this.middlePoints.length-2]+i.EDIT_LABLE_DXY.dx),this.achorText.y(this.middlePoints[this.middlePoints.length-1]+i.EDIT_LABLE_DXY.dy),this.firstAchor&&(Konva.Util.haveIntersection(this.tempAchor.getClientRect(),this.firstAchor.getClientRect())?(this.firstAchor.stroke("red"),this.tempAchor.stroke("red"),this.tempAchor.isEnd=!0,this.tempAchor.hide(),this.achorText.hide(),this.middlePoints[this.middlePoints.length-2]=this.middlePoints[0],this.middlePoints[this.middlePoints.length-1]=this.middlePoints[1]):(this.firstAchor.stroke(this.style.stroke),this.tempAchor.stroke(this.style.stroke),this.tempAchor.isEnd=!1,this.tempAchor.show(),this.isTempAchor&&this.achorText.show()))},e.prototype.pushControlPoint=function(t){if(this.tempAchor.isEnd)console.log("this.tempAchor remove");else{var e=this.controlPoints.length;this.controlPoints.push(t.x/this.stage.scale().x),this.controlPoints.push(t.y/this.stage.scale().x);var n=this.tempAchor.clone({pIndex:e});n.x(this.controlPoints[this.controlPoints.length-2]),n.y(this.controlPoints[this.controlPoints.length-1]);var o=this.achorText.clone({pIndex:e,visible:this.isTempAchor});o.x(this.controlPoints[this.controlPoints.length-2]+i.EDIT_LABLE_DXY.dx),o.y(this.controlPoints[this.controlPoints.length-1]+i.EDIT_LABLE_DXY.dy),o.text(this.achorTextCode),this.achorTextCode=this.stage.makeCharLabel(),this.achorText.text(this.achorTextCode),this.shape.add(n),this.shape.add(o),this.firstAchor||(this.firstAchor=n)}},e.prototype.draw=function(){this.line.points(this.middlePoints),"replayData"!==this.showtype&&this.templayer.batchDraw()},e.prototype.endDraw=function(){var t=this,e=this.line.points();this.line.points(e.slice(0,e.length-2)),this.line.closed(!0),this.tempAchor.remove(),this.achorText.remove(),this.firstAchor&&this.firstAchor.stroke(this.style.stroke);var n=this.shape.clone();this.isTempAchor||n.find(".editpoi").forEach(function(t){return t.hide()}),this.shape.remove(),this.shape.destroy(),this.showlayer.add(n),n.me=this,n.id(this.uid),"replayData"===this.showtype||(n.draw(),this.templayer.batchDraw()),n.on("click",function(e){if(t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?t.unfireEdit(n):(console.log("fireEdit"),t.fireEdit(n));var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}e.cancelBubble=!0}),n.on("mousedown touchstart",function(e){console.log("mousedown",t.stage.canvasaction.isSelectMode()),t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),n.on("dragmove",function(){console.log("dragmove")}),n.on("dragend",function(){if(console.log("dragend"),t.isSelected){t.stage.canvasaction.localClientId++;var e=n.x(),r=n.y(),a=[e*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[n.id(),0],!0];t.stage.canvasaction.sendMessageToOutSider(a),t.stage.canvasaction.pushCatchData(a)}}),n.on("transform",function(){console.log("transform")}),n.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var e=n.x(),r=n.y(),a=n.scaleX(),s=n.scaleY(),l=[e*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[n.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)})},e.prototype.fireEdit=function(t,e){var n=this;this.isSelected=!0,t.draggable(!0),e||(this.stage.container().style.cursor="move"),this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){console.log("mouseenter"),n.stage.container().style.cursor="move"}),t.on("mouseleave",function(){console.log("mouseleave",n.stage.getPointerPosition()),n.stage.getIntersection(n.stage.getPointerPosition(),"Group")!==t&&(n.stage.container().style.cursor="")}),t.find("Circle").forEach(function(t){t.draggable(!0)}),this.showlayer.batchDraw()},e.prototype.unfireEdit=function(t){this.isSelected=!1,t.draggable(!1),this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",t.find("Circle").forEach(function(t){t.draggable(!1)}),this.showlayer.batchDraw()},e.prototype.changeByPoint=function(t,e,n){var o=t.find("Circle"),r=t.find("Text"),a=t.findOne("Line");if(o&&o[n]){var s=a.points();o[n].x(e[0]),o[n].y(e[1]),r[n].x(e[0]+i.EDIT_LABLE_DXY.dx),r[n].y(e[1]+i.EDIT_LABLE_DXY.dy),s[2*n]=e[0],s[2*n+1]=e[1],a.points(s)}},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.EditDeleteShape=void 0;var t=n(5);e.EditDeleteShape=function(t){function e(n,i,o,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a,s));return l.data=s,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushPoint=function(t){var e=this,n=this.data,i=this.stage.canvasaction.cacheDataInstance,o=i.layerCachData[i.currentLayerId],r=[];o&&(o.filter(function(t){if(t[6]&&t[6][0]&&n.includes(t[6][0])){r.push(t[2]);var i=e.showlayer.findOne("#"+t[6][0]);i&&(i.me&&i.me.unfireEdit(i),i.remove())}return!r.includes(t[2])}),this.endDraw())},e.prototype.startDataTemp=function(t){return null},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return null},e.prototype.draw=function(){},e.prototype.endDraw=function(){},e.prototype.changeRegular=function(){},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.EllipseEdit=void 0;var t=n(5),i=n(8),o=n(12);e.EllipseEdit=function(t){function e(n,r,a,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r,a,s,l));return c.shape=new Konva.Group({draggable:!1,name:"editshape"}),c.templayer.add(c.shape),c.tr=(0,o.makeTransformer)(),c.tr.on("mousedown touchstart",function(t){c.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),r.x=-10,r.y=-10,c.ellipse=new Konva.Ellipse(Object.assign({},r,{fill:(0,o.hexToRgba)(r.stroke,.1)})),c.tempAchor=(0,o.makeEditPoi)(r),o.makeMoveHover.bind(c)(c.tempAchor),c.tempAchor.on("dragmove",function(t){t.cancelBubble=!0;var e=t.target,n=e.parent,o=e.getAttr("pIndex");c.middlePoints[o]=e.x(),c.middlePoints[o+1]=e.y(),n.children[o+2].x(e.x()+i.EDIT_LABLE_DXY.dx),n.children[o+2].y(e.y()+i.EDIT_LABLE_DXY.dy),console.log("tempAchor dragmove",o),c.fireEdit(n,!0),c.reCal(n.findOne("Ellipse"))}),c.tempAchor.on("dragend",function(t){if(console.log("dragend1",c.isSelected),c.isSelected){t.cancelBubble=!0;var e=t.target,n=e.getAttr("pIndex");c.stage.canvasaction.localClientId++;var r=e.x(),a=e.y(),s=[r*c.stage.scale().x,a*c.stage.scale().x,c.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.parent.id(),2,n/2],!0];c.stage.canvasaction.sendMessageToOutSider(s),c.stage.canvasaction.pushCatchData(s)}}),c.shape.add(c.tempAchor),c.achorTextCode=c.stage.getCharLabel(),c.achorText=(0,o.makeTextPoi)(r,c.achorTextCode),c.shape.add(c.achorText),c.shape.add(c.ellipse),c.firstAchor=null,c.isTempAchor=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return null},e.prototype.moveAchorText=function(t,e){},e.prototype.fitAchorText=function(t,e){},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return[[0,0,this.clientid,this.toolname,[this.style.strokeWidth,0,this.style.stroke,0],[],[this.uid,this.middlePoints.concat(),this.isTempAchor?1:0]]]},e.prototype.pushPoint=function(t){var e=this.middlePoints.length;if(e<6){this.middlePoints.push(t.x/this.stage.scale().x),this.middlePoints.push(t.y/this.stage.scale().x);var n=this.tempAchor.clone({pIndex:e});n.x(this.middlePoints[e]),n.y(this.middlePoints[e+1]);var o=this.achorText.clone({pIndex:e,visible:this.isTempAchor});o.x(this.middlePoints[e]+i.EDIT_LABLE_DXY.dx),o.y(this.middlePoints[e+1]+i.EDIT_LABLE_DXY.dy),o.text(this.achorTextCode),this.achorTextCode=this.stage.makeCharLabel(),this.shape.add(n),this.shape.add(o),2===e?this.tempAchor.setAttr("status","fixed"):4===e&&(this.tempAchor.setAttr("status","end"),console.log("pushPoint",e,this.middlePoints),this.reCal(this.ellipse))}else this.middlePoints[4]=t.x/this.stage.scale().x,this.middlePoints[5]=t.y/this.stage.scale().x,this.shape.children[this.shape.children.length-1].x(this.middlePoints[4]+i.EDIT_LABLE_DXY.dx),this.shape.children[this.shape.children.length-1].y(this.middlePoints[5]+i.EDIT_LABLE_DXY.dy),this.shape.children[this.shape.children.length-2].x(this.middlePoints[4]),this.shape.children[this.shape.children.length-2].y(this.middlePoints[5]),this.reCal(this.ellipse)},e.prototype.reCal=function(t){var e={x:this.middlePoints[0],y:this.middlePoints[1]},n={x:this.middlePoints[2],y:this.middlePoints[3]},i={x:this.middlePoints[4],y:this.middlePoints[5]},o=e.y-n.y,r=e.x-n.x,a=Math.atan(o/r),s={x:(e.x+n.x)/2,y:(e.y+n.y)/2},l=i.x-s.x,c=i.y-s.y,u=Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2),h=Math.pow(i.x-s.x,2),d=Math.pow(i.y-s.y,2),f=c/Math.cos(a),p=(l+f*Math.sin(a))*Math.sin(a),y=Math.pow(p-f,2),g=u-h-d,v=(-g+Math.sqrt(Math.pow(g,2)+4*u*y,2))/2,m=Math.sqrt(v,2),b=Math.sqrt(v+u,2);t.x(s.x),t.y(s.y),t.radiusX(b),t.radiusY(m),t.rotation(a/(Math.PI/180))},e.prototype.draw=function(){"replayData"!==this.showtype&&this.templayer.batchDraw()},e.prototype.endDraw=function(){var t=this;this.tempAchor.remove(),this.achorText.remove();var e=this.shape.clone();this.isTempAchor||e.find(".editpoi").forEach(function(t){return t.hide()}),this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),e.me=this,e.id(this.uid),"replayData"===this.showtype||e.draw(),e.on("click",function(n){if(t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?t.unfireEdit(e):(console.log("fireEdit"),t.fireEdit(e));var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}n.cancelBubble=!0}),e.on("mousedown touchstart",function(e){console.log("mousedown",t.stage.canvasaction.isSelectMode()),t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),e.on("dragmove",function(){console.log("dragmove")}),e.on("dragend",function(){if(console.log("dragend",t.isSelected),t.isSelected){t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),0],!0];t.stage.canvasaction.sendMessageToOutSider(a),t.stage.canvasaction.pushCatchData(a)}}),e.on("transform",function(){console.log("transform")}),e.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=e.scaleX(),s=e.scaleY(),l=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)})},e.prototype.fireEdit=function(t,e){var n=this;this.isSelected=!0,t.draggable(!0),e||(this.stage.container().style.cursor="move"),this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){console.log("mouseenter"),n.stage.container().style.cursor="move"}),t.on("mouseleave",function(){console.log("mouseleave"),n.stage.getIntersection(n.stage.getPointerPosition(),"Group")!==t&&(n.stage.container().style.cursor="")}),t.find("Circle").forEach(function(t){t.draggable(!0)}),this.showlayer.batchDraw()},e.prototype.unfireEdit=function(t){this.isSelected=!1,t.draggable(!1),this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",t.find("Circle").forEach(function(t){t.draggable(!1)}),this.showlayer.batchDraw()},e.prototype.changeByPoint=function(t,e,n){var o=t.find("Circle"),r=t.findOne("Ellipse"),a=t.find("Text");this.middlePoints[2*n]=e[0],this.middlePoints[2*n+1]=e[1],o&&o[n]&&(o[n].x(e[0]),o[n].y(e[1]),a[n].x(e[0]+i.EDIT_LABLE_DXY.dx),a[n].y(e[1]+i.EDIT_LABLE_DXY.dy),this.reCal(r))},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.CircleEdit=void 0;var t=n(5),i=n(8),o=n(12);e.CircleEdit=function(t){function e(n,r,a,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r,a,s,l));return c.shape=new Konva.Group({draggable:!1,name:"editshape"}),c.templayer.add(c.shape),c.tr=(0,o.makeTransformer)(),c.tr.on("mousedown touchstart",function(t){c.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),r.x=-10,r.y=-10,c.circle=new Konva.Circle(Object.assign({},r,{fill:(0,o.hexToRgba)(r.stroke,.1)})),c.tempAchor=(0,o.makeEditPoi)(r),o.makeMoveHover.bind(c)(c.tempAchor),c.tempAchor.on("dragmove",function(t){t.cancelBubble=!0;var e=t.target,n=e.parent,o=e.getAttr("pIndex");c.middlePoints[o]=e.x(),c.middlePoints[o+1]=e.y(),n.children[o+2].x(e.x()+i.EDIT_LABLE_DXY.dx),n.children[o+2].y(e.y()+i.EDIT_LABLE_DXY.dy),console.log("tempAchor dragmove",o),c.fireEdit(n,!0),c.reCal(n.findOne("Circle"))}),c.tempAchor.on("dragend",function(t){t.cancelBubble=!0;var e=t.target,n=e.getAttr("pIndex");c.stage.canvasaction.localClientId++;var r=e.x(),a=e.y(),s=[r*c.stage.scale().x,a*c.stage.scale().x,c.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.parent.id(),2,n/2],!0];c.stage.canvasaction.sendMessageToOutSider(s),c.stage.canvasaction.pushCatchData(s)}),c.shape.add(c.tempAchor),c.achorTextCode=c.stage.getCharLabel(),c.achorText=(0,o.makeTextPoi)(r,c.achorTextCode),c.shape.add(c.achorText),c.shape.add(c.circle),c.firstAchor=null,c.isTempAchor=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return null},e.prototype.moveAchorText=function(t,e){e.points(),t.find("Text")},e.prototype.fitAchorText=function(t,e){},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return[[0,0,this.clientid,this.toolname,[this.style.strokeWidth,0,this.style.stroke,0],[],[this.uid,this.middlePoints.concat(),this.isTempAchor?1:0]]]},e.prototype.pushPoint=function(t){var e=this.middlePoints.length;if(4===e)this.middlePoints[2]=t.x/this.stage.scale().x,this.middlePoints[3]=t.y/this.stage.scale().x,this.shape.children[this.shape.children.length-1].x(this.middlePoints[2]+i.EDIT_LABLE_DXY.dx),this.shape.children[this.shape.children.length-1].y(this.middlePoints[3]+i.EDIT_LABLE_DXY.dy),this.shape.children[this.shape.children.length-2].x(this.middlePoints[2]),this.shape.children[this.shape.children.length-2].y(this.middlePoints[3]),this.reCal(this.circle);else{this.middlePoints.push(t.x/this.stage.scale().x),this.middlePoints.push(t.y/this.stage.scale().x);var n=this.tempAchor.clone({pIndex:e});n.x(this.middlePoints[e]),n.y(this.middlePoints[e+1]);var o=this.achorText.clone({pIndex:e,visible:this.isTempAchor});o.x(this.middlePoints[e]+i.EDIT_LABLE_DXY.dx),o.y(this.middlePoints[e+1]+i.EDIT_LABLE_DXY.dy),o.text(this.achorTextCode),this.achorTextCode=this.stage.makeCharLabel(),this.shape.add(n),this.shape.add(o),0===e?this.tempAchor.setAttr("status","fixed"):2===e&&(this.tempAchor.setAttr("status","end"),this.reCal(this.circle))}},e.prototype.reCal=function(t){var e={x:this.middlePoints[0],y:this.middlePoints[1]},n={x:this.middlePoints[2],y:this.middlePoints[3]},i=Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2),o=Math.sqrt(i,2);t.x(e.x),t.y(e.y),t.radius(o)},e.prototype.draw=function(){"replayData"!==this.showtype&&this.templayer.batchDraw()},e.prototype.endDraw=function(){var t=this;this.tempAchor.remove(),this.achorText.remove();var e=this.shape.clone();this.isTempAchor||e.find(".editpoi").forEach(function(t){return t.hide()}),this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),e.me=this,e.id(this.uid),"replayData"===this.showtype||e.draw(),e.on("click",function(n){if(t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?(console.log("unfireEdit"),t.unfireEdit(e)):(console.log("fireEdit"),t.fireEdit(e));var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}n.cancelBubble=!0}),e.on("mousedown touchstart",function(e){console.log("mousedown",t.stage.canvasaction.isSelectMode()),t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),e.on("dragmove",function(){console.log("dragmove")}),e.on("dragend",function(n,r,a){if(console.log("dragend",n,r,a),t.isSelected){t.stage.canvasaction.localClientId++;var s=e.x(),l=e.y(),c=[s*t.stage.scale().x,l*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),0],!0];t.stage.canvasaction.sendMessageToOutSider(c),t.stage.canvasaction.pushCatchData(c)}}),e.on("transform",function(){console.log("transform")}),e.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=e.scaleX(),s=e.scaleY(),l=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)})},e.prototype.fireEdit=function(t,e){var n=this;this.isSelected=!0,t.draggable(!0),e||(this.stage.container().style.cursor="move"),this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){console.log("mouseenter"),n.stage.container().style.cursor="move"}),t.on("mouseleave",function(){console.log("mouseleave"),n.stage.getIntersection(n.stage.getPointerPosition(),"Group")!==t&&(n.stage.container().style.cursor="")}),t.find("Circle").forEach(function(t,e){0!==e&&t.draggable(!0)}),this.showlayer.batchDraw()},e.prototype.unfireEdit=function(t){this.isSelected=!1,t.draggable(!1),this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",t.find("Circle").forEach(function(t){t.draggable(!1)}),this.showlayer.batchDraw()},e.prototype.changeByPoint=function(t,e,n){var o=t.find("Circle"),r=o[0],a=t.find("Text");this.middlePoints[2*n]=e[0],this.middlePoints[2*n+1]=e[1],o&&o[n+1]&&(o[n+1].x(e[0]),o[n+1].y(e[1]),a[n].x(e[0]+i.EDIT_LABLE_DXY.dx),a[n].y(e[1]+i.EDIT_LABLE_DXY.dy),this.reCal(r))},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.SimpleEllipseEdit=void 0;var t=n(5),i=n(8),o=n(12);e.SimpleEllipseEdit=function(t){function e(n,i,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,r,a,s));return i.name="editshape",l.shape=new Konva.Ellipse(i),l.templayer.add(l.shape),l.tr=(0,o.makeTransformer)(),l.tr.on("mousedown touchstart",function(t){l.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),l.startData=null,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return this.startData=[t.x,t.y,this.clientid,this.toolname,[this.style.strokeWidth,this.isFill?1:0,this.isFill?this.style.fill:this.style.stroke,this.isShift?1:0],[],[this.uid]],null},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return this.startData&&(this.startData[4][3]=this.isShift?1:0),[this.startData,[t.x,t.y,this.clientid,!0]]},e.prototype.draw=function(){if(this.middlePoints.length>3){var t={x:this.middlePoints[0],y:this.middlePoints[1]},e={x:this.middlePoints[this.middlePoints.length-2],y:this.middlePoints[this.middlePoints.length-1]};if(this.isShift){var n=Math.min(Math.abs((e.x-t.x)/2),Math.abs((e.y-t.y)/2));t.x<e.x?(this.shape.x(t.x+n),this.shape.y(t.y+n)):(this.shape.x(t.x-n),this.shape.y(t.y-n)),this.shape.radius({x:n,y:n})}else this.shape.x((t.x+e.x)/2),this.shape.y((t.y+e.y)/2),this.shape.radius({x:Math.abs(t.x-e.x)/2,y:Math.max(Math.abs(t.y-e.y)/2,2)});"replayData"!==this.showtype&&this.templayer.batchDraw()}},e.prototype.endDraw=function(){var t=this,e=this.shape.clone();this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),e.me=this,e.id(this.uid),"replayData"===this.showtype||e.draw(),e.on("click",function(n){if(t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?t.unfireEdit(e):t.fireEdit(e);var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}n.cancelBubble=!0}),e.on("mousedown touchstart",function(e){t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),e.on("dragmove",function(){console.log("dragmove")}),e.on("dragend",function(){if(console.log("dragend"),t.isSelected){t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),0],!0];t.stage.canvasaction.sendMessageToOutSider(a),t.stage.canvasaction.pushCatchData(a)}}),e.on("transform",function(){console.log("transform")}),e.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=e.scaleX(),s=e.scaleY(),l=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)})},e.prototype.fireEdit=function(t){var e=this;this.isSelected=!0,t.draggable(!0),this.stage.container().style.cursor="move",this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){console.log("mouseenter"),e.stage.container().style.cursor="move"}),t.on("mouseleave",function(){console.log("mouseleave"),e.stage.getIntersection(e.stage.getPointerPosition(),"Ellipse")!==t&&(e.stage.container().style.cursor="")}),this.showlayer.batchDraw()},e.prototype.unfireEdit=function(t){this.isSelected=!1,this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",t.draggable(!1),this.showlayer.batchDraw()},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.SimpleTriangleEdit=void 0;var t=n(5),i=n(8),o=n(12);e.SimpleTriangleEdit=function(t){function e(n,i,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,r,a,s));return i.name="editshape",l.shape=new Konva.Line(i),l.templayer.add(l.shape),l.tr=(0,o.makeTransformer)(),l.tr.on("mousedown touchstart",function(t){l.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),l.shiftPois=null,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return[[this.middlePoints[0]*this.stage.scale().x,this.middlePoints[1]*this.stage.scale().x,this.clientid,this.toolname,[this.style.strokeWidth,this.isFill?this.style.fill:this.style.stroke,this.shiftPois[0]*this.stage.scale().x,this.shiftPois[1]*this.stage.scale().x,(this.shiftPois.length<4?this.shiftPois[0]:this.shiftPois[2])*this.stage.scale().x,(this.shiftPois.length<4?this.shiftPois[1]:this.shiftPois[3])*this.stage.scale().x,this.isShift?1:0,this.isFill?1:0],[],[this.uid],!0]]},e.prototype.draw=function(){if(this.middlePoints.length>3){var t={x:this.middlePoints[0],y:this.middlePoints[1]},e={x:this.middlePoints[this.middlePoints.length-2],y:this.middlePoints[this.middlePoints.length-1]};if(this.isShift){var n=(e.y-t.y)/Math.sqrt(3)+t.x,i=t.x-(e.y-t.y)/Math.sqrt(3);this.shape.points([t.x,t.y,n,e.y,i,e.y]),this.shiftPois=[n,e.y,i,e.y]}else if((""+this.clientid).indexOf(".")>0){var o={x:this.middlePoints[this.middlePoints.length-4],y:this.middlePoints[this.middlePoints.length-3]};this.shape.points([t.x,t.y,o.x,o.y,e.x,e.y]),this.shiftPois=[o.x,o.y,e.x,e.y]}else{var r={x:2*t.x-e.x,y:e.y};r.y===t.y&&(r.y=t.y+1,e.y=e.y+1),this.shape.points([t.x,t.y,e.x,e.y,r.x,r.y]),this.shiftPois=[e.x,e.y,r.x,r.y]}this.shape.closed(!0),"replayData"!==this.showtype&&this.templayer.batchDraw()}},e.prototype.endDraw=function(){var t=this,e=this.shape.clone();this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),e.me=this,e.id(this.uid),"replayData"===this.showtype||e.draw(),e.on("click",function(n){if(t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?t.unfireEdit(e):t.fireEdit(e);var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}n.cancelBubble=!0}),e.on("mousedown touchstart",function(e){t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),e.on("dragmove",function(){console.log("dragmove")}),e.on("dragend",function(){if(console.log("dragend"),t.isSelected){t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),0],!0];t.stage.canvasaction.sendMessageToOutSider(a),t.stage.canvasaction.pushCatchData(a)}}),e.on("transform",function(){console.log("transform")}),e.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=e.scaleX(),s=e.scaleY(),l=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)})},e.prototype.fireEdit=function(t){var e=this;this.isSelected=!0,t.draggable(!0),this.stage.container().style.cursor="move",this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){console.log("mouseenter"),e.stage.container().style.cursor="move"}),t.on("mouseleave",function(){console.log("mouseleave"),e.stage.getIntersection(e.stage.getPointerPosition(),"Line")!==t&&(e.stage.container().style.cursor="")}),this.showlayer.batchDraw()},e.prototype.unfireEdit=function(t){this.isSelected=!1,this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",t.draggable(!1),this.showlayer.batchDraw()},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.LineDashEdit=void 0;var t=n(55);e.LineDashEdit=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return s.line.setAttr("dash",[5,5]),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(t.LineEdit)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.CoordSys=void 0;var t=n(5),i=n(8),o=n(12),r=10;e.CoordSys=function(t){function e(n,i,a,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,a,s,l));return c.shape=new Konva.Group({draggable:!1,name:"editshape"}),c.templayer.add(c.shape),c.tr=(0,o.makeTransformer)({disableMiu:!0}),c.tr.on("mousedown touchstart",function(t){c.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),c.linex=new Konva.Line(Object.assign({},i,{dragBoundFunc:function(t){var e=t.y,n=this.parent,i=n.find("Line"),o=i[1];return e-o.getAbsolutePosition().y>Math.abs(n.me.middlePoints[3]-n.me.middlePoints[1])*n.scaleY()-r?e=Math.abs(n.me.middlePoints[3]-n.me.middlePoints[1])*n.scaleY()-r+o.getAbsolutePosition().y:e-o.getAbsolutePosition().y<-Math.abs(n.me.middlePoints[1]-o.points()[1])*n.scaleY()+r&&(e=-Math.abs(n.me.middlePoints[1]-o.points()[1])*n.scaleY()+r+o.getAbsolutePosition().y),{x:this.getAbsolutePosition().x,y:e}}})),c.linex.setAttr("pIndex",0),c.liney=new Konva.Line(Object.assign({},i,{dragBoundFunc:function(t){var e=t.x;console.log(this.getAbsolutePosition().x,t);var n=this.parent,i=n.find("Line"),o=i[0];return console.log(e,n.x(),n.me.middlePoints[0],o.points()[2],n.scaleX(),n.scaleY()),e-o.getAbsolutePosition().x>Math.abs(n.me.middlePoints[0]-o.points()[2])*n.scaleX()-r?e=Math.abs(n.me.middlePoints[0]-o.points()[2])*n.scaleX()-r+o.getAbsolutePosition().x:e-o.getAbsolutePosition().x<-Math.abs(n.me.middlePoints[2]-n.me.middlePoints[0])*n.scaleX()+r&&(e=-Math.abs(n.me.middlePoints[2]-n.me.middlePoints[0])*n.scaleX()+r+o.getAbsolutePosition().x),{x:e,y:this.getAbsolutePosition().y}}})),c.liney.setAttr("pIndex",1),c.centerPoi=new Konva.Circle({x:-10,y:-10,radius:i.strokeWidth+2,fill:"white",stroke:i.stroke,draggable:!1,pIndex:4,shadowEnabled:!1,shadowColor:i.stroke,shadowBlur:10,shadowOpacity:1}),c.tempAchor=new Konva.RegularPolygon({x:-10,y:-10,sides:3,radius:i.strokeWidth+3,fill:i.stroke,draggable:!1,shadowEnabled:!1,shadowColor:i.stroke,shadowBlur:10,shadowOpacity:1,pIndex:2,dragBoundFunc:function(t){console.log("pos",t);var e=t.x,n=this.parent,i=n.find("Circle"),o=i[0];return e<o.getClientRect().x+r&&(e=o.getClientRect().x+r),{x:e,y:this.getAbsolutePosition().y}}}),o.makeMoveHover.bind(c)(c.tempAchor),o.makeMoveHover.bind(c)(c.centerPoi),c.tempAchorY=c.tempAchor.clone({pIndex:3,dragBoundFunc:function(t){var e=t.y,n=this.parent,i=n.find("Circle"),o=i[0];return e>o.getClientRect().y-r&&(e=o.getClientRect().y-r),{x:this.getAbsolutePosition().x,y:e}}}),c.tempAchor.rotate(-30),c.achorText=(0,o.makeTextPoi)(i,"x"),c.achorTextY=c.achorText.clone({text:"y"}),c.shape.add(c.linex),c.shape.add(c.liney),c.shape.add(c.tempAchor),c.shape.add(c.tempAchorY),c.shape.add(c.achorText),c.shape.add(c.achorTextY),c.shape.add(c.centerPoi),c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startDataTemp=function(t){return null},e.prototype.moveAchorText=function(t,e){},e.prototype.fitAchorText=function(t,e){},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return[[0,0,this.clientid,this.toolname,[this.style.strokeWidth,0,this.style.stroke,0],[],[this.uid,this.middlePoints.concat()]]]},e.prototype.pushPoint=function(t){var e=this.middlePoints.length;console.log("isSHift",this.isShift),4===e?(this.middlePoints[2]=t.x/this.stage.scale().x,this.middlePoints[3]=t.y/this.stage.scale().x):(this.middlePoints.push(t.x/this.stage.scale().x),this.middlePoints.push(t.y/this.stage.scale().x),0===e?this.tempAchor.setAttr("status","fixed"):2===e&&this.tempAchor.setAttr("status","end")),this.isShift&&4===this.middlePoints.length&&(this.middlePoints[3]=this.middlePoints[1]+(this.middlePoints[2]-this.middlePoints[0])),this.reCal(this.shape)},e.prototype.reCal=function(t,e,n){if(Number.isInteger(e))switch(e){case 0:var o=t.find("RegularPolygon"),r=o[0],a=t.find("Text"),s=a[0],l=t.find("Line"),c=l[0],u=t.find("Circle"),h=u[0];c.position(n),h.y(c.points()[c.points().length-1]+n.y),r.y(c.points()[c.points().length-1]+n.y),s.y(c.points()[c.points().length-1]+n.y+i.EDIT_LABLE_DXY.dy);break;case 1:var d=t.find("RegularPolygon"),f=d[1],p=t.find("Text"),y=p[1],g=t.find("Line"),v=g[1],m=t.find("Circle"),b=m[0];v.position(n),b.x(v.points()[0]+n.x),f.x(v.points()[0]+n.x),y.x(v.points()[0]+n.x+i.EDIT_LABLE_DXY.dx);break;case 2:var _=t.find("RegularPolygon"),w=_[0],x=t.find("Text"),T=x[0],S=t.find("Line"),E=S[0];w.position(n),T.position({x:n.x+i.EDIT_LABLE_DXY.dx,y:n.y+i.EDIT_LABLE_DXY.dy}),E.points([E.points()[0],E.points()[1],n.x-E.x(),E.points()[1]]);break;case 3:var P=t.find("RegularPolygon"),C=P[1],O=t.find("Text"),D=O[1],A=t.find("Line"),k=A[1];C.position(n),D.position({x:n.x+i.EDIT_LABLE_DXY.dx,y:n.y+i.EDIT_LABLE_DXY.dy}),k.points([k.points()[0],n.y-k.y(),k.points()[0],k.points()[k.points().length-1]])}else if(2===this.middlePoints.length){var I=t.find("Circle")[0];I.x(this.middlePoints[0]),I.y(this.middlePoints[1])}else{var L={x:this.middlePoints[0],y:this.middlePoints[1]},M={x:this.middlePoints[2],y:this.middlePoints[3]},R=Math.abs(M.x-L.x),N=Math.abs(M.y-L.y);0===R?R=N:0===N&&(N=R);var F=t.find("Line"),j=t.find("RegularPolygon"),U=t.find("Text"),z=j[0],W=j[1],G=F[0],B=F[1],H=U[0],V=U[1],Y=[L.x-R,L.y,L.x+R,L.y],K=[L.x,L.y-N,L.x,L.y+N];G.points(Y),B.points(K),z.position({x:Y[Y.length-2],y:Y[Y.length-1]}),W.position({x:K[0],y:K[1]}),H.position({x:z.x()+i.EDIT_LABLE_DXY.dx,y:z.y()+i.EDIT_LABLE_DXY.dy}),V.position({x:W.x()+i.EDIT_LABLE_DXY.dx,y:W.y()+i.EDIT_LABLE_DXY.dy})}},e.prototype.draw=function(){"replayData"!==this.showtype&&this.templayer.batchDraw()},e.prototype.endDraw=function(){var t=this,e=this.shape.clone();this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),e.me=this,e.id(this.uid),"replayData"===this.showtype||e.draw(),e.on("click",function(n){if(t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?t.unfireEdit(e):(console.log("fireEdit"),t.fireEdit(e));var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}n.cancelBubble=!0}),e.on("mousedown touchstart",function(e){console.log("mousedown",t.stage.canvasaction.isSelectMode()),t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),e.on("dragmove",function(n){if(console.log("dragmove",n.target),n.target!=e){n.cancelBubble=!0;var i=n.target,o=i.getAttr("pIndex");t.fireEdit(e),t.reCal(e,o,i.position())}}),e.on("dragend",function(n){if(console.log("dragend",n.target),t.isSelected){var r=n.target;t.stage.canvasaction.localClientId++;var a=[];if(r==e){var s=e.x(),l=e.y();a=[s*t.stage.scale().x,l*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),0],!0]}else{var c=r.x(),u=r.y(),h=r.getAttr("pIndex");a=[c*t.stage.scale().x,u*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),2,h],!0]}t.stage.canvasaction.sendMessageToOutSider(a),t.stage.canvasaction.pushCatchData(a)}}),e.on("transform",function(){console.log("transform")}),e.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=e.scaleX(),s=e.scaleY(),l=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)})},e.prototype.fireEdit=function(t){var e=this;this.isSelected=!0,t.draggable(!0),this.stage.container().style.cursor="move",this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){console.log("mouseenter"),e.stage.container().style.cursor="move"}),t.on("mouseleave",function(){console.log("mouseleave"),e.stage.getIntersection(e.stage.getPointerPosition(),"Group")!==t&&(e.stage.container().style.cursor="")}),t.find("RegularPolygon").forEach(function(t,e){t.draggable(!0)}),t.find("Line").forEach(function(t,e){t.draggable(!0)}),this.showlayer.batchDraw()},e.prototype.unfireEdit=function(t){this.isSelected=!1,t.draggable(!1),this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",t.find("Line").forEach(function(t){t.draggable(!1)}),t.find("RegularPolygon").forEach(function(t){t.draggable(!1)}),this.showlayer.batchDraw()},e.prototype.changeByPoint=function(t,e,n){this.reCal(t,n,{x:e[0],y:e[1]})},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.TextEdit=void 0;var t=n(5),i=n(8),o=(n(17),n(12));e.TextEdit=function(t){function e(n,i,r,a,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,r,a));return c.shape=new Konva.Text({fill:i.stroke,fontFamily:i.fontFamily||"microsoft yahei",fontSize:i.fontSize||14,name:"editshape"}),c.text=l,c.templayer.add(c.shape),c.tr=(0,o.makeTransformer)(),c.tr.on("mousedown touchstart",function(t){c.stage.canvasaction.isSelectMode()&&(t.cancelBubble=!0)}),c.textarea=document.createElement("div"),c.textarea.contentEditable=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushPoint=function(t){this.middlePoints[0]=t.x/this.stage.scale().x,this.middlePoints[1]=t.y/this.stage.scale().x},e.prototype.startDataTemp=function(t){},e.prototype.centerDataTemp=function(t){},e.prototype.endDataTemp=function(t){return[[t.x,t.y,this.clientid,this.toolname,[this.style.fontSize||14,this.style.stroke],[],[this.uid,this.text]]]},e.prototype.draw=function(){this.middlePoints.length>0&&(this.shape.x(this.middlePoints[0]),this.shape.y(this.middlePoints[1]),this.shape.text(this.text),"replayData"!==this.showtype&&this.templayer.batchDraw())},e.prototype.moveFunc=function(t){console.log("moveFuncmoveFunc"),this.stage.canvasaction.localClientId++;var e=t.x(),n=t.y(),r=[e*this.stage.scale().x,n*this.stage.scale().x,this.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[t.id(),0],!0];this.stage.canvasaction.sendMessageToOutSider(r),this.stage.canvasaction.pushCatchData(r)},e.prototype.endDraw=function(){var t=this,e=this.shape.clone();this.shape.remove(),this.shape.destroy(),this.showlayer.add(e),e.me=this,e.id(this.uid),"replayData"===this.showtype||e.draw(),e.on("click",function(n){if(t.stage.canvasaction.isSelectMode()){var i=t.isSelected;t.stage.canvasaction.removeSelectShape(),t.isSelected=i,t.isSelected?t.unfireEdit(e):(console.log("fireEdit"),t.fireEdit(e));var o=t.stage.canvasaction.options;o&&o.selectShapeCb&&o.selectShapeCb()}n.cancelBubble=!0}),e.on("mousedown touchstart",function(e){console.log("mousedown",t.stage.canvasaction.isSelectMode()),t.stage.canvasaction.isSelectMode()&&(e.cancelBubble=!0)}),e.on("dragmove",function(){console.log("dragmove")}),e.on("dragend",function(){console.log("dragend"),t.isSelected&&t.moveFunc(e)}),e.on("transform",function(){console.log("transform")}),e.on("transformend",function(){console.log("transform end"),t.stage.canvasaction.localClientId++;var n=e.x(),r=e.y(),a=e.scaleX(),s=e.scaleY(),l=[n*t.stage.scale().x,r*t.stage.scale().x,t.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[e.id(),1,a,s],!0];t.stage.canvasaction.sendMessageToOutSider(l),t.stage.canvasaction.pushCatchData(l)}),e.on("dblclick",function(n){t.stage.canvasaction.isSelectMode()&&(t.tr.remove(),e.hide(),e.setAttr("isEdit",!0),t.notedit=!1,t.showTextEditInput(e)),n.cancelBubble=!0})},e.prototype.resizeTextAreaOld=function(t){var e=t.absolutePosition(),n=this.stage.container().getBoundingClientRect(),i={x:n.left+e.x,y:n.top+e.y};this.textarea.style.top=i.y+"px",this.textarea.style.left=i.x+"px",this.textarea.style.fontSize=t.fontSize()*t.scaleY()*this.stage.scaleY()+"px"},e.prototype.resizeTextArea=function(t){var e=t.absolutePosition(),n={x:e.x,y:e.y};this.textarea.style.top=n.y+"px",this.textarea.style.left=n.x+"px",this.textarea.style.fontSize=t.fontSize()*t.scaleY()*this.stage.scaleY()+"px"},e.prototype.showTextEditInput=function(t){var e=t.absolutePosition(),n=t.fontSize()*t.scaleY()*this.stage.scaleY();this.textarea=this.stage.canvasaction.editText.el;var i={x:e.x,y:e.y};this.textarea.style.display="block",this.textarea.style.top=i.y+"px",this.textarea.style.left=i.x+"px",this.textarea.innerText=t.text(),this.textarea.style.fontSize=n+"px",this.textarea.style.outline="1px solid "+t.fill(),this.textarea.style.lineHeight=t.lineHeight(),this.textarea.style.fontFamily=t.fontFamily(),this.textarea.style.textAlign=t.align(),this.textarea.style.color=t.fill(),this.textarea.style.minHeight=n+5+"px",this.textarea.focus();var o=this.stage.canvasaction.options;o&&o.textEditfocusCb&&o.textEditfocusCb()},e.prototype.showTextEditInputOld=function(t){var e=this,n=t.absolutePosition();console.log("textPosition",n);var i=this.stage.container().getBoundingClientRect(),r={x:i.left+n.x,y:i.top+n.y};this.textarea&&this.textarea.remove(),this.textarea=document.createElement("div"),this.textarea.contentEditable=!0,document.body.appendChild(this.textarea),this.textarea.innerText=t.text(),this.textarea.style.position="absolute",this.textarea.style.zIndex="1",this.textarea.style.display="block",this.textarea.style.top=r.y+"px",this.textarea.style.left=r.x+"px",this.textarea.style.minWidth="100px";var a=t.fontSize()*t.scaleY()*this.stage.scaleY();this.textarea.style.fontSize=a+"px",this.textarea.style.border="none",this.textarea.style.padding="0px",this.textarea.style.margin="0px",this.textarea.style.overflow="hidden",this.textarea.style.background="none",this.textarea.style.outline="1px solid "+t.fill(),this.textarea.style.resize="none",this.textarea.style.lineHeight=t.lineHeight(),this.textarea.style.fontFamily=t.fontFamily(),this.textarea.style.textAlign=t.align(),this.textarea.style.color=t.fill(),this.textarea.style.height="fit-content",this.textarea.style.minHeight=a+5+"px",this.textarea.focus(),this.textarea.addEventListener("keyup",this.changeEditHeight.bind(this)),this.textarea.addEventListener("keydown",this.chagneEnterBr.bind(this));var s=this.stage.canvasaction.options;s&&s.textEditfocusCb&&s.textEditfocusCb(),console.log("zmMovedDom,zmMovedDom"),(0,o.zmMovedDom)({dragHandle:this.textarea,dragTarget:this.textarea,parentDom:this.stage.canvasaction.parentDom.querySelector(".konvajs-content"),cb:function(n){var o=n.type;n.x,n.y,window.shapeTest=e.shape,console.log("zmMovedDom cb",o),"move"===o?(t.x((e.textarea.offsetLeft-i.left)/e.stage.scale().x),t.y((e.textarea.offsetTop-i.top-e.stage.y())/e.stage.scale().x)):null===e.shape.parent&&e.moveFunc(t)}})},e.prototype.changeEditHeight=function(t){t.stopPropagation(),this.textarea.scrollHeight>this.textarea.clientHeight&&(this.textarea.style.height=this.textarea.scrollHeight+3+"px")},e.prototype.chagneEnterBr=function(t){t.stopPropagation()},e.prototype.fireEdit=function(t){var e=this;this.isSelected=!0,t.draggable(!0),this.stage.container().style.cursor="move",this.tr&&this.tr.remove(),this.showlayer.add(this.tr),this.tr.attachTo(t),t.off("mouseenter"),t.off("mouseleave"),t.on("mouseenter",function(){console.log("mouseenter"),e.stage.container().style.cursor="move"}),t.on("mouseleave",function(){console.log("mouseleave"),e.stage.container().style.cursor=""}),this.showlayer.batchDraw()},e.prototype.formatTextStr=function(t){if(!t)return"";var e=t.replace(/<div><br><\/div>/g,"\n").replace(/<div>/g,"\n").replace(/<\/div>/g,"").replace(/<br>/g,"\n"),n=document.createElement("DIV");return n.innerHTML=e,n.textContent||n.innerText||""},e.prototype.unfireEdit=function(t){if(console.log("unfireEdit"),this.isSelected=!1,this.textarea.style&&"none"!=this.textarea.style.display&&!this.notedit&&null!=this.notedit){var e=this.formatTextStr(this.textarea.innerHTML),n=this.text;if(this.text=e,t.text(this.text),t.setAttr("isEdit",!1),t.x(this.textarea.offsetLeft/this.stage.scale().x),t.y((this.textarea.offsetTop-this.stage.y())/this.stage.scale().x),t.show(),n!=e){this.stage.canvasaction.localClientId++;var r=t.x(),a=t.y(),s=[r*this.stage.scale().x,a*this.stage.scale().x,this.stage.canvasaction.localClientId,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,[],[(0,o.makeUUID)()],[t.id(),3,this.text],!0];this.stage.canvasaction.sendMessageToOutSider(s),this.stage.canvasaction.pushCatchData(s)}this.removeTextArea()}t.draggable(!1),this.tr&&this.tr.remove(),t.off("mouseenter"),t.off("mouseleave"),this.stage.container().style.cursor="",this.showlayer.batchDraw()},e.prototype.removeTextArea=function(){this.textarea&&(this.textarea.style.display="none")},e.prototype.changeTextVal=function(t,e){this.text=e,t.text(e)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeTextArea()},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.LineArrowDashEdit=void 0;var t=n(56);e.LineArrowDashEdit=function(t){function e(n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a));return s.line.setAttr("dash",[5,5]),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(t.LineArrowEdit)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.EditDeletePage=void 0;var t=n(5);n(8),e.EditDeletePage=function(t){function e(n,i,o,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a,s));return l.data=s,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushPoint=function(t){this.showlayer.removeChildren(),this.endDraw()},e.prototype.startDataTemp=function(t){return null},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return null},e.prototype.draw=function(){},e.prototype.endDraw=function(){"replayData"!==this.showtype&&this.showlayer.batchDraw()},e.prototype.changeRegular=function(){},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.EditRecover=void 0;var t=n(5),i=null;e.EditRecover=function(t){function e(n,i,o,r,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i,o,r,a,s));return l.data=s,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.redrawData=function(){this.showlayer.removeChildren(),this.stage.canvasaction.redraw(),this.endDraw()},e.prototype.pushPoint=function(t){var e=this;clearTimeout(i),i=setTimeout(function(){console.log("redrawdata"),e.redrawData(),"replayData"===e.showtype&&e.showlayer.batchDraw()},20)},e.prototype.startDataTemp=function(t){return null},e.prototype.centerDataTemp=function(t){return null},e.prototype.endDataTemp=function(t){return null},e.prototype.draw=function(){},e.prototype.endDraw=function(){"replayData"!==this.showtype&&this.showlayer.batchDraw()},e.prototype.changeRegular=function(){},e}(t.Shape)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.CanvasAction=void 0;var t=n(32),i=n(8),o=n(12),r=n(185);i.DRAWTOOL_RECT_EDIT,i.DRAWTOOL_CIRCLE_EDIT,i.DRAWTOOL_POLYGON_EDIT,i.DRAWTOOL_EDIT_REGULAR_SHAPE_CHANGE,e.CanvasAction=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.stage=t,this.msgport=null,this.dataCallBack=null,this.tooltype="brush",this.initEvent=this.initEvent.bind(this),this.shape=null,this.scaletoserver=null,this.cacheDataInstance=n,this.sendMessageToOutSider=this.sendMessageToOutSider.bind(this),this.isShift=!1,this.isFill=!1,this.isTempAchor=!0,this.keyDown=this.keyDown.bind(this),this.keyUp=this.keyUp.bind(this),this.localStyle={stroke:"#EF4C4F",strokeWidth:2},this.localClientId=0,this.pushCatchData=this.pushCatchData.bind(this),this.dataToServer=this.dataToServer.bind(this),this.isMouseEventFilter=this.isMouseEventFilter.bind(this),this.isMouseClickedDraw=this.isMouseClickedDraw.bind(this),this.mouseClickedDrawLogic=this.mouseClickedDrawLogic.bind(this),this.handleDownLogic=this.handleDownLogic.bind(this),this.handleDbClick=this.handleDbClick.bind(this),this.handleMoveLogic=this.handleMoveLogic.bind(this),this.handleStopLogic=this.handleStopLogic.bind(this),this.mouseClickedDrawStopLogic=this.mouseClickedDrawStopLogic.bind(this),this.outerStage=this.outerStage.bind(this),this.drawOuterStage=this.drawOuterStage.bind(this),this.deleteTempShape=this.deleteTempShape.bind(this),this.deletePageData=this.deletePageData.bind(this),this.recoverData=this.recoverData.bind(this),this.deleteSelectData=this.deleteSelectData.bind(this),this.calcRecoverNum=this.calcRecoverNum.bind(this),this.options=r,this.transformScale=1,this.clickedDrawTools=[i.DRAWTOOL_POLYGON_EDIT,i.DRAWTOOL_ELLIPSE_EDIT,i.DRAWTOOL_CIRCLE_EDIT,i.DRAWTOOL_LINE_EDIT,i.DRAWTOOL_TEXTTOOL_EDIT,i.DRAWTOOL_LINEDASH_EDIT,i.DRAWTOOL_LINEARROW_EDIT,i.DRAWTOOL_LINEARROWDASH_EDIT,i.DRAWTOOL_COORDSYS_EDIT],this.mousemovetime=performance.now(),this.mousedowntime=performance.now(),this.recoverLeftNums={},this.disableRecover=!0,this.isMouseUpPaiting=!1,this.isMouseMovePaiting=!1,this.filterTimer=r.filterTimer||16,this.isMobileDevice=(0,o.isMobile)()}return e.prototype.handleDbClick=function(t){console.log("handleDbClick")},e.prototype.handleDownLogic=function(e){if(!(this.tooltype===i.DRAWTOOL_TEXTTOOL_EDIT&&this.isMobileDevice&&performance.now()-this.mousedowntime<200)){this.mousedowntime=performance.now();var n=e.evt&&(e.evt.data||e.evt.targetTouches&&e.evt.targetTouches[0]&&e.evt.targetTouches[0].force);if(!this.isMouseEventFilter())if(this.isMouseClickedDraw())this.mouseClickedDrawLogic(e);else{e&&e.evt&&2==e.evt.button&&this.options&&this.options.rightMouseDownCb&&this.options.rightMouseDownCb();var r=(0,t.makeShapeInstance)(this.tooltype);this.shape&&this.shape.shape&&this.shape.shape.remove(),this.localClientId=this.localClientId+1;var a=Object.assign({},this.localStyle);this.isFill||delete a.fill,this.shape=new r(this.stage,a,this.localClientId,this.tooltype),this.shape.isShift=this.isShift,this.shape.isFill=this.isFill,this.shape.uid=(0,o.makeUUID)(),n&&(this.shape.pressure=n);var s=this.stage.getPointerPosition();if(s){s.x=s.x/this.transformScale,s.y=(s.y-this.stage.y())/this.transformScale;var l=this.shape.startDataTemp(s);l&&(this.sendMessageToOutSider(l),this.pushCatchData(l)),this.shape.pushPoint(s),this.isMouseUpPaiting=!0,this.isMouseMovePaiting=!0}}}},e.prototype.focusTextArea=function(){console.log("this.shape &&this.shape.textarea 1212"),this.isMobileDevice&&this.tooltype===i.DRAWTOOL_TEXTTOOL_EDIT&&this.shape&&this.shape.textarea&&(this.shape.textarea.focus(),console.log("this.shape &&this.shape.textarea 3434"))},e.prototype.handleMoveLogic=function(t){if(this.isMouseMovePaiting&&!(performance.now()-this.mousemovetime<this.filterTimer)){this.mousemovetime=performance.now();var e=t.evt&&(t.evt.data||t.evt.targetTouches&&t.evt.targetTouches[0]&&t.evt.targetTouches[0].force);e&&(this.shape.pressure=e),this.shape.isShift=this.isShift;var n=this.stage.getPointerPosition();if(n){n.x=n.x/this.transformScale,n.y=(n.y-this.stage.y())/this.transformScale,this.shape.pushPoint(n),this.shape.draw();var i=this.shape.centerDataTemp(n);i&&(this.sendMessageToOutSider(i),this.pushCatchData(i))}}},e.prototype.mouseClickedDrawStopLogic=function(t){r.init.bind(this)(t)},e.prototype.handleStopLogic=function(t){var e=t.evt&&(t.evt.data||t.evt.targetTouches&&t.evt.targetTouches[0]&&t.evt.targetTouches[0].force);if(!this.isMouseEventFilter()&&this.isMouseUpPaiting)if(this.isMouseClickedDraw())this.mouseClickedDrawStopLogic(t);else{t&&t.evt&&2==t.evt.button&&this.options&&this.options.rightMouseUpCb&&this.options.rightMouseUpCb();var n=this.stage.getPointerPosition();if(n&&(n.x=n.x/this.transformScale,n.y=(n.y-this.stage.y())/this.transformScale),this.shape.isShift=this.isShift,this.shape){e&&(this.shape.pressure=e),n&&this.shape.pushPoint(n),this.shape.draw(),this.shape.endDraw();var i=n?this.shape.endDataTemp(n):this.shape.endDataTemp({x:this.shape.middlePoints[this.shape.middlePoints.length-2]*this.stage.scale().x,y:this.shape.middlePoints[this.shape.middlePoints.length-1]*this.stage.scale().x});if(i)for(var o=0;o<i.length;o++)this.sendMessageToOutSider(i[o]),this.pushCatchData(i[o]);this.shape=null}this.isMouseUpPaiting=!1,this.isMouseMovePaiting=!1}},e.prototype.keyDownEvent=function(){window.addEventListener("keydown",this.keyDown)},e.prototype.keyUpEvent=function(){window.addEventListener("keyup",this.keyUp)},e.prototype.setLocalStyle=function(t){this.localStyle=t},e.prototype.keyDown=function(t){16===t.keyCode?this.isShift=!0:46===t.keyCode||(27===t.keyCode?this.removePolyGonTemp():90===t.keyCode&&t.ctrlKey&&(console.log("ctrl z"),this.disableRecover||this.recoverData()))},e.prototype.removePolyGonTemp=function(){this.shape&&this.isMouseClickedDraw()&&this.deleteTempShape()},e.prototype.keyUp=function(t){16===t.keyCode&&(this.isShift=!1)},e.prototype.removeEvent=function(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("keyup",this.keyUp)},e.prototype.pushCatchData=function(t){this.cacheDataInstance.layerCachData&&this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId]||(this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId]=[]),this.cacheDataInstance.layerCachData[this.cacheDataInstance.currentLayerId].push(this.dataToServer(t)),this.calcRecoverNum(t)},e.prototype.calcRecoverNum=function(t){try{t[0],t[1],t[2];var e=t[3];if(e&&"string"==typeof e){var n=this.recoverLeftNums[this.cacheDataInstance.currentLayerId];void 0===n&&(n=[]),e!==i.DRAWTOOL_EDIT_RECOVER?n.push(t):n.splice(-1),this.recoverLeftNums[this.cacheDataInstance.currentLayerId]=n.slice(-i.RECOVER_NUM)}}catch(t){}},e.prototype.drawTextAction=function(e,n,i){var r=(0,t.makeShapeInstance)(this.tooltype);this.shape&&this.shape.shape&&this.shape.shape.remove(),this.localClientId=this.localClientId+1,this.shape=new r(this.stage,this.localStyle,this.localClientId,this.tooltype,"",i),this.shape.uid=(0,o.makeUUID)(),this.shape.pushPoint({x:e,y:n});var a=this.shape.endDataTemp({x:e,y:n});if(a)for(var s=0;s<a.length;s++)this.sendMessageToOutSider(a[s]),this.pushCatchData(a[s]);this.shape.draw(),this.shape.endDraw()},e.prototype.isMouseEventFilter=function(){return this.tooltype===i.DRAWTOOL_TEXTTOOL||this.tooltype.indexOf("nodraw")>0},e.prototype.isMouseClickedDraw=function(t){return this.clickedDrawTools.includes(t||this.tooltype)},e.prototype.mouseClickedDrawLogic=function(e){var n=this.options.drawingProcessCb;if(this.shape)n&&n({tool:this.tooltype,step:"middle"}),e&&e.evt&&2==e.evt.button&&(this.removePolyGonTemp(),this.options.rightMouseDownCb&&this.options.rightMouseDownCb({kind:"rightClearClickedDraw"}));else{this.localClientId=this.localClientId+1;var r=(0,t.makeShapeInstance)(this.tooltype),a=Object.assign({},this.localStyle);this.shape=new r(this.stage,a,this.localClientId,this.tooltype),this.isFill||delete a.fill,this.shape.isFill=this.isFill,this.shape.uid=(0,o.makeUUID)(),this.shape.isTempAchor=this.isTempAchor,this.tooltype===i.DRAWTOOL_POLYGON_EDIT&&(this.isMouseMovePaiting=!0),n&&n({tool:this.tooltype,step:"first"})}this.isMouseUpPaiting=!0},e.prototype.setSelectMode=function(){this.tooltype=i.DRAWTOOL_SELCTE_SHAPE},e.prototype.isSelectMode=function(){return this.tooltype===i.DRAWTOOL_SELCTE_SHAPE},e.prototype.outerStage=function(){this.stage.fire("mouseup")},e.prototype.drawOuterStage=function(){this.stage.fire("mouseup"),this.tooltype===i.DRAWTOOL_SELCTE_SHAPE&&this.stage.stopDrag()},e.prototype.closeDraw=function(){this.outerStage()},e.prototype.initEvent=function(){this.keyDownEvent(),this.keyUpEvent(),this.stage.on("mousedown touchstart",this.handleDownLogic),this.stage.on("contentMouseout.proto",this.drawOuterStage),this.stage.on("dblclick dbltap",this.handleDbClick),this.stage.on("mousemove touchmove",this.handleMoveLogic),this.stage.on("mouseup touchend",this.handleStopLogic)},e.prototype.setToolKind=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==i.DRAWTOOL_SELCTE_SHAPE?(this.removeSelectShape(),this.stage.showlayer.hitGraphEnabled(!1)):this.stage.showlayer.hitGraphEnabled(!0),this.deleteTempShape(),this.tooltype=t,this.isTempAchor=e,this.shape&&this.shape.shape&&this.shape.destroy(),this.shape=null},e.prototype.deleteTempShape=function(){if(this.shape&&this.shape.shape){var t=this.shape.shape.find&&this.shape.shape.find(".editpoi").length;t&&this.stage.changeCharLabel(1-t),this.shape.destroy(),this.shape=null,this.stage.templayer.batchDraw()}this.isMouseUpPaiting=!1,this.isMouseMovePaiting=!1,this.stage.container().style.cursor="",this.isShift=!1},e.prototype.removeSelectShape=function(){try{this.stage.showlayer.find(".editshape").forEach(function(t){t.me&&t.me.unfireEdit&&t.me.unfireEdit(t)}),this.stage.showlayer.batchDraw(),this.options&&this.options.selectShapeCb&&this.options.selectShapeCb()}catch(t){}},e.prototype.getSelectData=function(){var t=this.stage.showlayer.find(".editshape");return t.filter(function(t){return t.me.isSelected})},e.prototype.hasSelectedData=function(){for(var t=this.stage.showlayer.find(".editshape"),e=!1,n=0;n<t.length;n++)if(t[n].me.isSelected){e=!0;break}return e},e.prototype.deletePageData=function(){this.deleteTempShape();var e=(0,t.makeShapeInstance)(i.DRAWTOOL_EDIT_PAGE_DELETE);this.shape&&this.shape.shape&&this.shape.shape.remove(),this.localClientId=this.localClientId+1,this.shape=new e(this.stage,{},this.localClientId,i.DRAWTOOL_EDIT_PAGE_DELETE,null),this.shape.uid=(0,o.makeUUID)();var n={x:0,y:0};this.localClientId++;var r=[n.x,n.y,this.localClientId,i.DRAWTOOL_EDIT_PAGE_DELETE,[],[],[this.shape.uid],!0];this.sendMessageToOutSider(r),this.pushCatchData(r),this.shape.pushPoint(n),this.shape=null},e.prototype.recoverData=function(){var e=this.cacheDataInstance,n=e.layerCachData[e.currentLayerId];n||(n=[]),n.length;var r=this.recoverLeftNums[e.currentLayerId];if(r&&r.length>0){var a=r[r.length-1],s=(a[0],a[1],a[2],a[3],(0,t.makeShapeInstance)(i.DRAWTOOL_EDIT_RECOVER));this.shape&&this.shape.shape&&this.shape.shape.remove(),this.localClientId=this.localClientId+1,this.shape=new s(this.stage,{},this.localClientId,i.DRAWTOOL_EDIT_RECOVER,null);var l={x:0,y:0};this.localClientId++;var c=[l.x,l.y,this.localClientId,i.DRAWTOOL_EDIT_RECOVER,[],[],[(0,o.getActionItemUid)(a)],!0];this.sendMessageToOutSider(c),this.pushCatchData(c),this.shape.pushPoint(l),this.shape=null;var u=this.options.recoverProcess;u&&u()}},e.prototype.deleteSelectData=function(){var e=this.stage.showlayer.find(".editshape");if(this.deleteTempShape(),this.shape=null,0!==e.length){var n=[];if(e.forEach(function(t){t.me.isSelected&&n.push(t.id())}),0!==n.length){var r=(0,t.makeShapeInstance)(i.DRAWTOOL_EDIT_SHAPE_DELETE);this.shape&&this.shape.shape&&this.shape.shape.remove(),this.localClientId=this.localClientId+1,this.shape=new r(this.stage,{},this.localClientId,this.tooltype,null,n),this.shape.uid=(0,o.makeUUID)();var a={x:0,y:0};this.localClientId++;var s=[a.x,a.y,this.localClientId,i.DRAWTOOL_EDIT_SHAPE_DELETE,[],[this.shape.uid],n,!0];this.sendMessageToOutSider(s),this.pushCatchData(s),this.shape.pushPoint(a),this.options&&this.options.selectShapeCb&&this.options.selectShapeCb(),this.deleteTempShape(),this.shape=null}}},e.prototype.dataToServer=function(t){var e=t[0],n=t[1],o=t.slice(2),r=e/this.scaletoserver,a=n/this.scaletoserver;if(o[1]===i.DRAWTOOL_TRIANGLE||o[1]===i.DRAWTOOL_SIMPLE_TRIANGLE_EDIT){var s=o[0],l=o[1],c=o[2],u=o.slice(3),h=c[2]/this.scaletoserver,d=c[3]/this.scaletoserver,f=c[4]/this.scaletoserver,p=c[5]/this.scaletoserver;return[r,a,s,l,[c[0],c[1],h,d,f,p,c[6],c[7]]].concat(u)}if(o[1]===i.DRAWTOOL_LINEARROW){var y=o[0],g=o[1],v=o[2],m=o.slice(3),b=v[2]/this.scaletoserver,_=v[3]/this.scaletoserver;return[r,a,y,g,[v[0],v[1],b,_]].concat(m)}return[r,a].concat(o)},e.prototype.sendMessageToOutSider=function(t){this.dataCallBack&&this.dataCallBack(this.dataToServer(t))},e}()})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.init=function(e){if(!this.isMouseEventFilter()){var n=this.options.drawingProcessCb,r=this.stage.getPointerPosition();if(r&&(r.x=r.x/this.transformScale,r.y=(r.y-this.stage.y())/this.transformScale),this.shape)if(this.shape.toolname===t.DRAWTOOL_POLYGON_EDIT)if(this.shape.tempAchor.isEnd){if(this.shape.controlPoints.length<6)return;this.isMouseMovePaiting=!1,this.shape.endDraw();var a=this.shape.endDataTemp(r);if(a)for(var s=0;s<a.length;s++)this.sendMessageToOutSider(a[s]),this.pushCatchData(a[s]);this.shape=null,n&&n({tool:this.tooltype,step:"end"})}else this.shape.pushControlPoint(r);else if(o.includes(this.shape.toolname)){if(console.log("poi",r),this.shape.pushPoint(r),this.shape.draw(),"fixed"===this.shape.tempAchor.getAttr("status"))console.log("fire move move"),this.isMouseMovePaiting=!0;else if("end"===this.shape.tempAchor.getAttr("status")){this.isMouseMovePaiting=!1,this.shape.endDraw();var l=this.shape.endDataTemp(r);if(l)for(var s=0;s<l.length;s++)this.sendMessageToOutSider(l[s]),this.pushCatchData(l[s]);this.shape=null,n&&n({tool:this.tooltype,step:"end"})}}else if(this.shape.toolname===t.DRAWTOOL_TEXTTOOL_EDIT){if(this.shape.textarea.innerText.replace(/ /g,"")){this.shape.text=this.shape.formatTextStr(this.shape.textarea.innerHTML),this.shape.shape.text(this.shape.text),this.shape.endDraw(),this.shape.removeTextArea(),i.x=this.shape.shape.x()*this.stage.scale().x,i.y=this.shape.shape.y()*this.stage.scale().x,console.log("xixixixix",this.shape.shape.x(),this.shape.shape.y(),i);var c=this.shape.endDataTemp(i);if(c)for(var s=0;s<c.length;s++)this.sendMessageToOutSider(c[s]),this.pushCatchData(c[s]);return this.shape.notedit=!0,this.shape=null,void(n&&n({tool:this.tooltype,step:"end"}))}console.log("psuhPoint poi",r),this.shape.pushPoint(r),this.shape.shape.x(this.shape.middlePoints[0]),this.shape.shape.y(this.shape.middlePoints[1]),this.shape.showTextEditInput(this.shape.shape),i=r}this.isMouseUpPaiting=!1}};var t=n(8),i=null,o=[t.DRAWTOOL_CIRCLE_EDIT,t.DRAWTOOL_ELLIPSE_EDIT,t.DRAWTOOL_LINE_EDIT,t.DRAWTOOL_LINEDASH_EDIT,t.DRAWTOOL_LINEARROW_EDIT,t.DRAWTOOL_LINEARROWDASH_EDIT,t.DRAWTOOL_COORDSYS_EDIT]})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.CacheData=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerCachData={},this.currentLayerId="1"}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.EditText=void 0;var t=n(17),i=n(12);e.EditText=function(){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=n,this.el=(0,t.el)("div.zm-sketchpad-edittext",{contentEditable:!0,style:{position:"absolute",zIndex:"1",display:"none",minWidth:"100px",border:"none",padding:"0px",margin:"0px",overflow:"hidden",background:"none",resize:"none",height:"fit-content"}})}return e.prototype.onmount=function(){var t=this;console.log("mounted Hello"),this.canvas.stage.on("yChange",function(e){var n=e.oldVal,i=e.newVal,o=i-n,r=t.el.offsetTop;t.el.style.top=r+o+"px"}),(0,i.zmMovedDom)({dragHandle:this.el,dragTarget:this.el,cb:function(e){var n=e.type;if(e.x,e.y,t.canvas.canvasaction.shape){var i=t.canvas.canvasaction.shape.shape;t.canvas.stage.container().getBoundingClientRect(),console.log("zmMovedDom cb",n),"move"===n?(i.x(t.el.offsetLeft/t.canvas.stage.scale().x),i.y((t.el.offsetTop-t.canvas.stage.y())/t.canvas.stage.scale().x)):null===i&&t.canvas.canvasaction.shape.moveFunc(i)}}})},e}()})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.RecordControl=void 0;var t,i=n(17);n(32),(t=n(34))&&t.__esModule,n(8),e.RecordControl=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.el=(0,i.el)("div.recordcontrol",(0,i.el)("div.flexrow",this.playorpause=(0,i.el)("a.pointer",{onclick:function(t){var e=""===n.playorpause.textContent;n.playorpause.textContent=e?"":"",e||n.canvas.recordPlay()}},""),this.playtimetip=(0,i.el)("div","21:00/31:00"),this.progress=(0,i.el)("progress.controlprogress",{value:0,max:100}))),this.data={playingtime:0}}return t.prototype.init=function(){},t.prototype.onmount=function(){this.init()},t.prototype.onunmount=function(){},t.prototype.update=function(t){(0,i.setAttr)(this.progress,{value:t.playingtime/t.duration*100})},t}()})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.api=void 0;var t,i=n(31),o=(t=n(190))&&t.__esModule?t:{default:t};e.api=function(t){var e=new o.default,n=void 0;(0,i.listen)(t,{hello:function(t){r("hello.subject",t)},playingtime:function(t){r("hello.playingtime",t)},duration:function(t){r("hello.duration",t)}});var r=function(i,o){e.set(i,o),n||(n=window.requestAnimationFrame(function(){n=!1,t.update(e.get())}))}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){this.data={}};e.prototype.get=function(t){if(!t)return this.data;for(var e=t.split("."),n=this.data,i=0;i<e.length;i++){var o=e[i];if(!(o in n))return;n=n[o]}return n},e.prototype.set=function(t,e){for(var n=t.split("."),i=this.data=Object.assign({},this.data),o=0;o<n.length;o++){var r=n[o];o===n.length-1?i[r]=e:i=i[r]=Object.assign({},i[r])}};var n=e;t.default=n})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";e.__esModule=!0,e.init=function(t,e){c=e,_(t)},e.mockTest=function(t){c=t;var e=0,n=m;console.log("data",n);var i=setInterval(function(){var t;e<n.length?((t=n[e]).nX=t.nX/21050,t.nY=t.nY/14700,_(t),e++):clearInterval(i)},1)},e.mockOneTest=function(t){c=window.zmSketchInstance;var e=m[t];e.nX=e.nX/21050,e.nY=e.nY/14700,_(e)},e.hideRoboPen=function(){a&&!a.style.transform.includes("-1000px")&&(a.style.transform="translate(-1000px, -1000px)")};var t=n(12),i=!1,o={},r=9/16,a=new Image,s=800,l=450;a.style.position="fixed",a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDcvMDcvMTUv3CSZAAACQ0lEQVRYhb3XP2saYRzA8a96t0kpJQ5dhIDUIDkiOrVCbIMeaEKSPRLM1qVrh+5Bim/AF1Bfg4VmCmRoKJbuHbqlfyBNqp4aPX9d7uTSnPVP7vzBLerj5/s8x4EiIizjAh4B74Am8HL8+pLwJ8AnYAgI0ALeiAgB6wO+TSAQiAGnwGOXt1/7vfN1a7dSq9VkdXVVrBOwr57fuBGNRn+vrKyIpmnSaDQkFos5Az77iffi8fiVaZrSbDYlFApJPB6Xer0uiqKYwAWw7geeAHpra2vXnU5H7Dk/P5dIJCKqqg6BP8Azz58CC+9qmnZtGIb8O5qm/QAGwNPxGq/xjY2NVr/fv4NnMpnv1n1/fmudV3gwGOwlk8m2G57NZn9a+Is7az3EO2741tbWL7edexJg46lUquuG53K5SwvfnPgd98XT6XTPDdd1/WoavnCAjR8cHLgeu67r17PgCwXYeKlUcj32QqHQnhWfOwBIhEKh/iS8WCwa8+BzBdj44eHhjRu+vb3dnRefOcDGy+Xy0A3f2dnpL4LPFDAN393dHSyKTw1w4KYf+H8DgISiKDdHR0ejCfjwvvjEgGn43t6e6QXuGuDAxW/8TgCQUFV1MAnf398feYnfCpgBF6/xcQDwIBwOG/l8fqm4M6AIyPHx8VJxZ8Bb+6dypVJZGm7ZpIEz5x+GarUqpVLJd9wO2AQunQGABIPBkaqqWT9xEUEBXgEPAQP4Gg6Hv7Tb7Q+j0ejENM0LfB4F+AZ8BN4DJ61W68xv1Dl/AQ+g4z6prP8/AAAAAElFTkSuQmCC",a.style.left="0px",a.style.top="-32px",a.style.transform="translate(-1000px, -1000px)",a.style.zIndex=10,document.body.appendChild(a);var c=null,u=!1,h=1,d=.4,f=1.6,p=.03,y=0,g=0,v=1e6,m=[],b="pressurepen";function _(t){w(t)}function w(e){var n=e.nStatus,m=e.nX,_=void 0===m?0:m,x=e.nY,T=void 0===x?0:x,S=e.nPress,E=void 0===S?1:S,P=1;u?(P=E/1024,h>d?P<h*(1-p)?(P=h*(1-p))<d&&(P=d):P>h*(1+p)&&(P=h*(1+p)):P>d?P>h*(1+p)&&(P=h*(1+p)):P=d):(u=!0,(h=E/1024)<d&&(h=d),P=h);var C=f*(h=P),O=c.canvas.stage,D=o.onPenDraw,A=void 0===D||D,k=o.drawAppLeft,I=void 0===k?O._getContentPosition().left:k,L=o.drawAppTop,M=void 0===L?O._getContentPosition().top:L,R=o.drawAppScrollTop,N=void 0===R?c.el.parentElement.scrollTop:R,F=o.drawAppWidth,j=void 0===F?O.width():F,U=o.drawAppHeight,z=void 0===U?O.width()*r:U,W=o.drawAppContainer,G=void 0===W?O.getContent():W,B=w._nStatus,H=w._clientX,V=w._clientY;if(A&&G){var Y=I+j*_,K=M+z*T,X=s*_,q=c.canvas.canvasaction.options&&c.canvas.canvasaction.options.disableScaleStage?Math.abs(O.y()):N,$=q*s/j+l*T;if(console.log("",n,21050*_,14700*T,E,h,C,X,$),B!=n||H!=Y||V!=K){w._nStatus=n,w._clientX=Y,w._clientY=K;var Q=[],J=c.canvas.scaletoserver;if(17==n){//!onMove && drawAppContainer.dispatchEvent(createEvent('mousedown', clientX, clientY, press));
if(a.style.transform="translate("+Y+"px, "+K+"px)",y=X,g=$,i)Q=[X,$,v,C];else{var Z=c.canvas.canvasaction.localStyle,tt=Z.stroke,et=Z.strokeWidth;Q=[X,$,v,b,[et,tt],C,[(0,t.makeUUID)()]]}c.canvas.replayDataItem(Q,J,"mockpen"),c.canvas.canvasaction.dataCallBack(Q),i=!0}else{if(u=!1,a.style.transform="translate("+(n?Y:-1e3)+"px, "+(n?K:-1e3)+"px)",!i)return;i=!1,Q=[y,g,v,C,!0],c.canvas.replayDataItem(Q,J,"mockpen"),c.canvas.canvasaction.dataCallBack(Q),v+=1}c.canvas.cacheDataInstance.layerCachData[c.canvas.cacheDataInstance.currentLayerId]||(c.canvas.cacheDataInstance.layerCachData[c.canvas.cacheDataInstance.currentLayerId]=[]),c.canvas.cacheDataInstance.layerCachData[c.canvas.cacheDataInstance.currentLayerId].push(Q)}}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(47)],void 0===(r="function"==typeof(i=function(t,e){"use strict";var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=i(e),t.default=class extends e.default{setToolKind(t,n){e.default.zmSketchInstance.canvas.canvasaction.setToolKind(t,n)}setLocalStyle(t){e.default.zmSketchInstance.canvas.canvasaction.setLocalStyle(t)}setIsFill(t){e.default.zmSketchInstance.canvas.canvasaction.isFill=t}deleteSelectData(){e.default.zmSketchInstance.canvas.canvasaction.deleteSelectData(),this.setToolKind("eraserrectangle")}deletePageData(){e.default.zmSketchInstance.canvas.canvasaction.deletePageData(),this.setToolKind("eraserrectangle")}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(11),n(22),n(14),n(194),n(196),n(220),n(223),n(225),n(15),n(227)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s,l,c,u,h,d){"use strict";var f=n(0),p=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=p(e),i=f(i),r=f(r),a=f(a),s=f(s),l=f(l),c=f(c),u=f(u);const y={zml:a.default,pdf:s.default,zmg:l.default,draftboard:u.default};function g(t){const{courseware:n}=(0,e.useContext)(h.PlayerContext),{coursewareId:i,coursewareList:o}=n,{userInfo:{role:a}}=r.default.getState(),{isZmlExaming:s}=t,l=o.find(t=>t.id===i),u=l&&"zml"===l.type,d=l&&"zmg"===l.type;return e.default.createElement("div",{className:"zml-box ".concat(a===PLAYER_USER_TYPE.student&&(u||d)&&s?"zml-top":"")},o.map((t,n)=>e.default.createElement("div",{key:n,className:"zml-content",style:{zIndex:i===t.id?0:-1}},e.default.createElement(y[t.type]||c.default,{coursewareInfo:t,active:i===t.id},null))))}g.propTypes={isZmlExaming:i.default.bool};var v=(0,o.connect)(t=>{let{isZmlExaming:e}=t;return{isZmlExaming:e}},()=>({}))(g);t.default=v})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(11),n(14),n(24),n(195),n(15)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s){"use strict";var l=n(0),c=n(10);function u(t){const{userInfo:n}=o.default.getState(),{role:i,usage:l,mode:c}=n,{pageNum:u,courseware:h,eventControllersInstance:d}=(0,e.useContext)(s.PlayerContext),{whiteBoardController:f}=d.controllers,{coursewareList:p}=h,{value:y}=u,g=(0,e.useRef)(null),{active:v,coursewareInfo:m}=t,b=(0,e.useRef)(null),_=(0,e.useRef)();function w(t){_.current&&g.current.handleScroll({deltaY:t?50:-50})}function x(e){const{action:n,data:i}=e;if("pageNumber"===n){const e=p.find(e=>e.id===t.coursewareInfo.id);e&&(e.pageTotal=i)}}return _.current=v,(0,r.default)(d,"closeZMLExam",()=>{g.current.clearAnswering()}),(0,e.useEffect)(()=>(g.current=new a.default(m.content,x,d,m.id),f.on("teacherWheel",w),()=>{g.current.destroyed(),f.removeListener("teacherWheel",w)}),[]),(0,e.useEffect)(()=>{g.current&&v&&(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{g.current.setPageNo(y),i===PLAYER_USER_TYPE.teacher&&g.current.handleScroll({deltaY:5e6})},200))},[y,v]),g.current&&e.default.createElement("iframe",{className:"zmlIframe",id:"iframeId",src:"".concat(m.origin,"?role=").concat(i===PLAYER_USER_TYPE.teacher||"player"===c?"teacher":"student","&device=PC&usage=").concat(l||"bigClass"),style:{width:"100%",height:"100%",display:"block",border:"none",outline:"none"}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u,e=c(e),i=l(i),o=l(o),r=l(r),a=l(a),u.propTypes={coursewareInfo:i.default.object,active:i.default.bool}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(15),n(14),n(20)],void 0===(r="function"==typeof(i=function(t,e,i,o,r){"use strict";var a=n(0);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function l(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?s(Object(i),!0).forEach(function(n){(0,e.default)(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=a(e),o=a(o),r=a(r),t.default=class{constructor(t,n,i,a){(0,e.default)(this,"zmlUrl",""),(0,e.default)(this,"zmlWindow",null),(0,e.default)(this,"handleMessage",null),(0,e.default)(this,"eventControllersInstance",{}),(0,e.default)(this,"isReady",!1),(0,e.default)(this,"isDataReady",!1),(0,e.default)(this,"readyTime",0),(0,e.default)(this,"mountedTime",0),(0,e.default)(this,"histroyMessage",[]),(0,e.default)(this,"chekckoutDeadline",null),(0,e.default)(this,"handlerIframeMsg",async t=>{let{data:e}=t;const{action:n,kjType:i,data:a}=e;if(n&&"zmg"!==i)if("setHeightRatio"===n&&(this.heightRatio=a,this.scrollRatio&&this.eventControllersInstance.controllers.whiteBoardController.emit("drawtoolScroll",{scrollRatio:this.scrollRatio,heightRatio:this.heightRatio})),"ready"!==n){if("returnPageNumber"===n)return this.handleMessage({action:"pageNumber",data:a}),this.eventControllersInstance.send("QtAction",{action:"zmlCoursePageTotal",data:a}),void this.eventControllersInstance.send("zmlCoursePageTotal",a);if("dataReady"!==n){if("questionOperation"===n){const t=[0,0,-1,"zmlMessage",["questionOperation",a]],{operation:{answer:e,doAnswer:n,rightAnswerStr:i},questionId:r,role:s}=a,{userInfo:{role:l}}=o.default.getState();if(""!==a.questionTypeName&&this.isAnswerData&&this.isAnswerData.state&&!n&&(console.log("zml"),this.sendCommonMsgToQt("endZmlSingleQuestion",{questionId:r})),l===PLAYER_USER_TYPE.student&&"student"===s){let t,n="";"string"==typeof i&&Array.isArray(e)?(t=i,e.forEach((t,e)=>{!0===t&&(n+=String.fromCodePoint(65+e))})):t="",console.log("");let o=1;if(this.pageInfo&&this.pageInfo.newPageInfo){const{typeId:t}=this.pageInfo.newPageInfo;t&&t<=3&&(o=t)}this.sendCommonMsgToQt("studentZmlQuestionDone",{questionId:r,questionTypeId:o,isHistroy:!1,rightAnswer:t,answerStr:n})}return l!==PLAYER_USER_TYPE.student&&this.sendIsAnsweringToQt(!!n,a),e&&e.length&&this.eventControllersInstance.send("playerTrackEvent",{eventId:"ZML_ANSWER_SUBMIT",ukeEventId:"".concat(r)}),void this.eventControllersInstance.send("whiteboard_data",t)}if("returnMediaData"===n){let t=a;const e=await this.eventControllersInstance.send("getVideoDisable"),n=e&&"true"==e.config.items.openVideoPlayer;return a&&a.length>0&&!n&&(t=a.map(t=>t&&t.length>0?t.filter(t=>"video"!==t.type):t)),window.zmlAllVideo=t,void this.eventControllersInstance.controllers.whiteBoardController.emit("zml_all_video",t)}if("sendInteractionArea"===n){const t=a&&a.interactionArea||[];return console.log("areas",t),void o.default.dispatch((0,r.default)("zmlCoverEleList",t.map(t=>l(l({},t),{},{handleClick:t=>{this.postMessage({action:"mockClick",data:t})}}))))}if("scrollTop"===n){const t=[0,0,-1,"zmlMessage",["scrollTop",a]];return this.eventControllersInstance.send("whiteboard_data",t),this.scrollRatio=a.scrollRatio,void this.eventControllersInstance.controllers.whiteBoardController.emit("drawtoolScroll",l(l({},a),{},{heightRatio:this.heightRatio}))}if("sendClickAnswerDetail"===n){const t=[0,0,-1,"zmlMessage",["sendClickAnswerDetail",a]];return this.eventControllersInstance.send("whiteboard_data",t),void this.eventControllersInstance.send("playerTrackEvent",{eventId:"CLASSROOM_COMPLETION_ANSWER_DETAILS",eventParam:{}})}if("showPageIndex"===n&&(this.setPageNo(a),this.eventControllersInstance.send("QtAction",{action:"pptSwitchPage",data:{id:this.coursewareId,pageNo:a}}),this.eventControllersInstance.send("playerTrackEvent",{eventId:"ZBJ_ZML_DJML",eventParam:{pageNo:a}})),"toggleShowSideBar"===n&&this.eventControllersInstance.send("playerTrackEvent",{eventId:a?"ZBJ_ZML_ZKML":"ZBJ_ZML_SQML",eventParam:{}}),"sendPageInfo"===n&&(this.pageInfo=a),n){console.log("action",n,a);const t=[0,0,-1,"zmlMessage",[n,a]];this.eventControllersInstance.send("whiteboard_data",t)}}else{const t=document.getElementsByClassName("zmlIframe")[0];if(this.zmlWindow=t.contentWindow,this.chekckoutDeadline&&clearTimeout(this.chekckoutDeadline),console.log("zml-dataReady",this.histroyMessage),this.getAllVideo(),this.setZmlUserGroup(!0),this.histroyMessage.length&&(this.histroyMessage.forEach(t=>{this.postMessage(t)}),this.histroyMessage=[]),!this.isDataReady){const t=(new Date).getTime(),e=t-this.readyTime;this.eventControllersInstance.send("playerTrackEvent",{eventId:"COURSEWARE_ZML_DATAREADY",eventParam:{time:e}}),this.eventControllersInstance.send("playerTrackEvent",{eventId:"ZML_DATAREADY",eventParam:{success:!0,interval:e,host:this.zmlUrl}}),this.isDataReady=!0}this.eventControllersInstance.send("zmlLoadSuccess")}}else if(this.setZmlInitialize(),!this.isReady){this.readyTime=(new Date).getTime();const t=this.readyTime-this.mountedTime;this.eventControllersInstance.send("playerTrackEvent",{eventId:"COURSEWARE_ZML_READY",eventParam:{time:t}}),this.eventControllersInstance.send("playerTrackEvent",{eventId:"ZML_READY",eventParam:{success:!0,interval:t,host:this.zmlUrl}}),this.isReady=!0}}),(0,e.default)(this,"sendCommonMsgToQt",(t,e)=>{this.eventControllersInstance.send("QtAction",{action:"sendCommonMsgToQt",data:{event:t,data:e}})}),this.eventControllersInstance=i,this.zmlUrl=t,this.coursewareId=a,this.handleMessage=n,this.mountedTime=(new Date).getTime(),this.histroyMessage=[],this.handlerIframeMsg=this.handlerIframeMsg.bind(this),this.setZmlUserGroup=this.setZmlUserGroup.bind(this),this.heightRatio=0,this.scrollRatio=0,this.timer=null,this.isAnswerData=null,this.pageInfo=null,window.addEventListener("message",this.handlerIframeMsg),this.eventControllersInstance.controllers.otherController.on("user_connect",t=>{t&&t.data&&this.setZmlUserGroup()}),this.eventControllersInstance.controllers.whiteBoardController.on("zmlMessage",(t,e)=>{const{action:n,data:{operation:i,role:a,questionId:s}}=t,{userInfo:{role:c}}=o.default.getState();if("questionOperation"===n){const n=i&&i.doAnswer;if(c===PLAYER_USER_TYPE.teacher&&"student"!==a&&this.sendIsAnsweringToQt(!!n,t.data,e),c===PLAYER_USER_TYPE.tutor&&(t.data={}),c===PLAYER_USER_TYPE.student){if(i&&!e&&"student"!==a){const{doAnswer:t,hasAnswered:e,showAnswer:n}=i;!e||n||t||(console.log("zml"),this.sendCommonMsgToQt("teaherZmlQuestionClose",{questionId:s}))}if("student"===a){let{answer:t,rightAnswerStr:e}=i,n="";"string"==typeof e&&Array.isArray(t)?t.forEach((t,e)=>{!0===t&&(n+=String.fromCodePoint(65+e))}):e="",console.log("",n);let o=1;if(this.pageInfo&&this.pageInfo.newPageInfo&&this.pageInfo.newPageInfo.qid===s){const{typeId:t}=this.pageInfo.newPageInfo;t&&t<=3&&(o=t)}this.sendCommonMsgToQt("studentZmlQuestionDone",{questionId:s,questionTypeId:o,isHistroy:!0,rightAnswer:e,answerStr:n})}n?(this.isAnswerData=t.data,console.log(" this.isAnswerData:",this.isAnswerData)):this.isAnswerData=null}o.default.dispatch((0,r.default)("isZmlExaming",!!n))}"scrollTop"===n&&c!==PLAYER_USER_TYPE.teacher&&(this.scrollRatio=t.data.scrollRatio,this.heightRatio&&this.eventControllersInstance.controllers.whiteBoardController.emit("drawtoolScroll",l(l({},t.data),{},{heightRatio:this.heightRatio}))),this.postMessage(t)}),this.checkoutZmlLoadSuccess()}postMessage(t){this.zmlWindow?(this.zmlWindow.postMessage(t,"*"),console.log("",t)):(console.log("-",t),this.histroyMessage.push(t))}setZmlInitialize(){const{userInfo:t}=o.default.getState(),{firstName:e,id:n}=t,r=zmLocalStorage.setVersion,a={appId:i.APP_ID,appVersion:r,deviceId:"",userId:n,lessonType:"regular-lesson",classScale:"CLASS_OPEN",courseBuType:"ZM_UKE",coursewareCategory:3,coursewareBuType:"ZM_UKE",sessionId:""},s={setPagesUrl:JSON.stringify({url:this.zmlUrl}),setUserInfo:l(l({avatar:""},t),{},{name:e,sid:n}),setTrackData:a},c=this.zmlUrl?0:-1,u=document.getElementsByClassName("zmlIframe")[0];u.contentWindow.postMessage({action:"initialize",status:c,data:s},"*")}setPageNo(t){console.log("-",t),this.postMessage({action:"showPage",data:t})}getAllVideo(){this.postMessage({action:"getMediaData"})}async setZmlUserGroup(t){t&&await this.eventControllersInstance.send("current_user_connect");const{userInfo:{role:e}}=o.default.getState();if(e!==PLAYER_USER_TYPE.tutor){const{studentsMap:t}=o.default.getState();if(t){const e=Object.values(t).map(t=>l(l({},t),{},{sid:t.userId,id:t.userId}));this.postMessage({action:"setUsersInfo",data:{students:e}})}}}handleScroll(t){this.postMessage({action:"mockScroll",data:t})}sendIsAnsweringToQt(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.timer&&clearTimeout(this.timer),this.isAnswerData={state:t,isHistroy:n,data:t?[0,0,-1,"zmlMessage",["questionOperation",l(l({},e),{},{operation:{doAnswer:!1,hasAnswered:!0,notShowModal:!1,showAnswer:!1,tag:"doAnswer"}})]]:null},this.timer=setTimeout(()=>{this.sendCommonMsgToQt("zmlIsDoAnswer",this.isAnswerData)},100)}checkoutZmlLoadSuccess(){this.chekckoutDeadline&&clearTimeout(this.chekckoutDeadline),this.chekckoutDeadline=setTimeout(()=>{console.log("zml"),this.eventControllersInstance.send("zmlLoadfail")},9e4)}destroyed(){window.removeEventListener("message",this.handlerIframeMsg),this.chekckoutDeadline&&clearTimeout(this.chekckoutDeadline)}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(11),n(197),n(15),n(199),n(219)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s){"use strict";var l=n(0),c=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=h,e=c(e),i=l(i),a=c(a);const u=new Set;function h(t){const{coursewareInfo:n,active:i}=t,{id:s,$id:l,content:c,host:h}=n,{pageNum:d,eventControllersInstance:f}=(0,e.useContext)(r.PlayerContext),[p,y]=(0,e.useState)({class:"",src:""}),[g,v]=(0,e.useState)(!0),m=(0,e.useRef)(0),b=(0,e.useRef)(h||r.pdfHost.IMG),_=(0,e.useRef)(null),{value:w}=d;async function x(t){if(i){const e="".concat(b.current).concat(s,"/slide-").concat(c[w]||0,".png");f.send("playerTrackEvent",{eventId:"COURSEWARE_PPT_START",eventParam:{url:e}});try{const n=await(0,a.default)(e,{timeout:5e3});if(m.current!==w)return;const i=URL.createObjectURL(n),o=new Image;o.src=i,o.onload=()=>{if(m.current!==w)return;const t=o.naturalWidth/o.naturalHeight>16/9,e=t?"overRate":"inRate";y({class:e,src:i}),v(!1),function(t){for(let e=t;e<Math.min(t+5,c.length);e++){const t="".concat(b.current).concat(s,"/slide-").concat(c[e]||0,".png");u.has(t)||(u.add(t),(0,a.preloadImageByUrl)(t))}}(w+1)},f.send("playerTrackEvent",{eventId:"COURSEWARE_PPT_SUCCESS",eventParam:{url:i}})}catch(e){b.current===r.pdfHost.IMG?(b.current=r.pdfHost.DOC,x(t),T(r.pdfHost.IMG)):b.current===r.pdfHost.DOC?(b.current=r.pdfHost.OSS,x(t),T(r.pdfHost.DOC)):(b.current(r.pdfHost.IMG),T(r.pdfHost.OSS))}}}function T(t){f.send("playerTrackEvent",{eventId:"PDF_LOADFAIL",eventParam:{host:t}})}return(0,e.useEffect)(()=>{v(!0),m.current=w,_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{console.log("pdf",w),x()},200)},[w,i]),e.default.createElement("div",{className:"pdf-box",id:"iframeId",style:{width:"100%",height:"100%",border:"none",outline:"none"}},p.src&&e.default.createElement("img",{src:p.src,className:"pdf-".concat(p.class)}),i&&e.default.createElement("div",{className:"pdf-loading",style:{display:g?"flex":"none"}},e.default.createElement(o.LoadingComponent,{style:{top:"50%"},$id:l})))}h.propTypes={coursewareInfo:i.default.object,active:i.default.bool}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(46),n(11),n(198)],void 0===(r="function"==typeof(i=function(t,e,i,o,r){"use strict";var a=n(0),s=n(10);function l(t){const{$id:n,style:i}=t;return(0,e.useEffect)(()=>{},[]),e.default.createElement("div",{className:"requestLoading-box",style:i||{}},e.default.createElement("div",{id:n}),"...")}Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingComponent=l,t.default=function(t){const n="loading-".concat((new Date).getTime()),o=document.createElement("div");return o.id=n,document.body.appendChild(o),i.default.render(e.default.createElement(l,{content:t,$id:"".concat(n,"-svga")}),o),()=>{document.body.removeChild(o)}},e=s(e),i=a(i),o=a(o),l.propTypes={$id:o.default.any,style:o.default.object}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(200)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function a(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r(Object(i),!0).forEach(function(n){(0,e.default)(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(t,e){const n={responseType:"blob",cancelToken:s.token},{data:o}=await i.default.get(t,a(a({},n),e));return o},t.preloadImageByUrl=function(t){const e=new Image;e.src=t,e.onload=()=>{console.log(t,"image ready")}},t.domElementExist=l,t.fetchScript=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(l("script","src",t))return;const n=document.querySelector("body"),i=document.createElement("script");i.src=t,i.async=e,n&&n.appendChild(i)},t.fetchStyle=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stylesheet";if(l("link","href",t))return;const n=document.querySelector("head"),i=document.createElement("link");i.rel=e,i.href=t,n&&n.appendChild(i)},t.prefetch=function(t,e,n){if(l("link","href",t))return;const i=document.querySelector("head"),o=document.createElement("link");e&&(o.rel=e),n&&(o.as=n),o.href=t,i&&i.appendChild(o)},e=o(e);const s=(i=o(i)).default.CancelToken.source();function l(t,e,n){const i=document.querySelectorAll(t);if(!i)return!1;if(i){const t=Array.from(i);return t.findIndex(t=>t[e]===n)>-1}return!1}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=n(201)})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16),i=n(57),o=n(203),r=n(37);function a(t){var n=new o(t),r=i(o.prototype.request,n);return e.extend(r,o.prototype,n),e.extend(r,n),r}var s=a(r);s.Axios=o,s.create=function(t){return a(e.merge(r,t))},s.Cancel=n(61),s.CancelToken=n(217),s.isCancel=n(60),s.all=function(t){return Promise.all(t)},s.spread=n(218),t.exports=s,t.exports.default=s})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";
/*!
   * Determine if an object is a Buffer
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   */t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(37),i=n(16),o=n(212),r=n(213);function a(t){this.defaults=t,this.interceptors={request:new o,response:new o}}a.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(e,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var n=[r,void 0],o=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){n.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){n.push(t.fulfilled,t.rejected)});n.length;)o=o.then(n.shift(),n.shift());return o},i.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,n,o){return this.request(i.merge(o||{},{method:t,url:e,data:n}))}}),t.exports=a})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(t){n=r}}();var s,l=[],c=!1,u=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&d())}function d(){if(!c){var t=a(h);c=!0;for(var e=l.length;e;){for(s=l,l=[];++u<e;)s&&s[u].run();u=-1,e=l.length}s=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||c||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16);t.exports=function(t,n){e.forEach(t,function(e,i){i!==n&&i.toUpperCase()===n.toUpperCase()&&(t[n]=e,delete t[i])})}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(59);t.exports=function(t,n,i){var o=i.config.validateStatus;i.status&&o&&!o(i.status)?n(e("Request failed with status code "+i.status,i.config,null,i.request,i)):t(i)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t,e,n,i,o){return t.config=e,n&&(t.code=n),t.request=i,t.response=o,t}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,n,o){if(!n)return t;var r;if(o)r=o(n);else if(e.isURLSearchParams(n))r=n.toString();else{var a=[];e.forEach(n,function(t,n){null!=t&&(e.isArray(t)?n+="[]":t=[t],e.forEach(t,function(t){e.isDate(t)?t=t.toISOString():e.isObject(t)&&(t=JSON.stringify(t)),a.push(i(n)+"="+i(t))}))}),r=a.join("&")}return r&&(t+=(-1===t.indexOf("?")?"?":"&")+r),t}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var n,o,r,a={};return t?(e.forEach(t.split("\n"),function(t){if(r=t.indexOf(":"),n=e.trim(t.substr(0,r)).toLowerCase(),o=e.trim(t.substr(r+1)),n){if(a[n]&&i.indexOf(n)>=0)return;a[n]="set-cookie"===n?(a[n]?a[n]:[]).concat([o]):a[n]?a[n]+", "+o:o}}),a):a}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16);t.exports=e.isStandardBrowserEnv()?function(){var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function o(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=o(window.location.href),function(n){var i=e.isString(n)?o(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16);t.exports=e.isStandardBrowserEnv()?{write:function(t,n,i,o,r,a){var s=[];s.push(t+"="+encodeURIComponent(n)),e.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),e.isString(o)&&s.push("path="+o),e.isString(r)&&s.push("domain="+r),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){e.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16),i=n(214),o=n(60),r=n(37),a=n(215),s=n(216);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){l(t),t.baseURL&&!a(t.url)&&(t.url=s(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=e.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var n=t.adapter||r.adapter;return n(t).then(function(e){return l(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(l(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(16);t.exports=function(t,n,i){return e.forEach(i,function(e){t=e(t,n)}),t}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";var e=n(61);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(t){n=t});var i=this;t(function(t){i.reason||(i.reason=new e(t),n(i.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t,e=new i(function(e){t=e});return{token:e,cancel:t}},t.exports=i})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[],void 0===(r="function"==typeof(i=function(){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(11),n(221),n(24),n(15),n(14),n(222)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s,l){"use strict";var c=n(0),u=n(10);function h(t){const{userInfo:{role:n}}=s.default.getState(),{eventControllersInstance:i}=(0,e.useContext)(a.PlayerContext),c=(0,e.useRef)(),[u,h]=(0,e.useState)(),{coursewareInfo:d}=t;function f(){}return(0,r.default)(i,"zmgLocalhost",function(t){console.log("handleZmgLocalhost:",t),h(t.data)}),(0,e.useEffect)(()=>(i.send("get_zmgLocalhost"),c.current=new o.default(f,i),()=>{c.current.destroyed()}),[]),e.default.createElement(e.default.Fragment,null,!(u||d.content)&&e.default.createElement("div",{className:l.default.loading},""),e.default.createElement("iframe",{id:"zmg-iframe",className:"zmgIframe",src:u||d.content,style:{width:"100%",height:"100%",display:"block",border:"none",outline:"none"}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=h,e=u(e),i=c(i),o=c(o),r=c(r),s=c(s),l=c(l),h.propTypes={coursewareInfo:i.default.object,active:i.default.bool}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(13),n(14)],void 0===(r="function"==typeof(i=function(t,e,i){"use strict";var o=n(0);function r(t){const{id:e,name:n,avatar:i,userId:o,role:r}=t;return{userId:"".concat(e||o),role:r.toLowerCase(),avatar:i,name:n,mobile:"".concat(e||o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=o(e),i=o(i),t.default=class{constructor(t,n){(0,e.default)(this,"zmlWindow",null),(0,e.default)(this,"handleMessage",null),(0,e.default)(this,"eventControllersInstance",{}),(0,e.default)(this,"histroyMessage",[]),(0,e.default)(this,"chekckoutDeadline",null),(0,e.default)(this,"handlerIframeMsg",async t=>{let{data:e}=t;const{action:n,kjType:i,data:o}=e;if(n&&"zmg"===i)if("gameReady"===n){this.eventControllersInstance.send("zmgLoadSuccess");const t=document.querySelector(".zmgIframe");this.zmlWindow=t.contentWindow,this.setUserInfo(),this.setUsersInfo(),this.histroyMessage.length&&(this.histroyMessage.forEach(t=>{this.postMessage(t)}),this.histroyMessage=[])}else"getHistory"===n?this.eventControllersInstance.send("zmgGetHistory",e):this.eventControllersInstance.send("zmg_data",e)}),this.eventControllersInstance=n,this.handleMessage=t,this.handlerIframeMsg=this.handlerIframeMsg.bind(this),window.addEventListener("message",this.handlerIframeMsg),this.eventControllersInstance.controllers.zmgController.on("zmgMessage",t=>{this.postMessage(t)}),this.eventControllersInstance.controllers.zmgController.on("respondHistory",t=>{this.postMessage(t.data)}),this.eventControllersInstance.controllers.otherController.on("user_connect",t=>{t&&t.data&&this.setAddUsersInfo(t.data)}),this.eventControllersInstance.controllers.otherController.on("user_disconnect",t=>{t&&t.data&&this.setDelUsersInfo(t.data)})}postMessage(t){this.zmlWindow?(this.zmlWindow.postMessage(t,"*"),console.log("zmg",t)):(console.log("zmg-",t),this.histroyMessage.push(t))}setSpliteUsersInfo(){}setAddUsersInfo(t){this.postMessage({action:"setAddUsersInfo",data:{students:[r(t)]}})}setDelUsersInfo(t){console.log("setDelUsersInfo",t),this.postMessage({action:"setDelUsersInfo",data:{students:[r(t)]}})}setUserInfo(){const{userInfo:t}=i.default.getState();this.postMessage({action:"setUserInfo",data:r(t)})}setLessonInfo(){const{userInfo:{lessonId:t,lessonName:e}}=i.default.getState();this.postMessage({action:"setLessonInfo",data:{lessonId:t,courseName:e}})}async setUsersInfo(){const t=await this.eventControllersInstance.send("current_user_connect"),{students:e,teacher:n,tutors:i}=t,o=Object.values(e).filter(t=>t.online),a=o.concat([...i,n]).map(r);this.postMessage({action:"setAddUsersInfo",data:{students:a}}),this.postMessage({action:"setUsersInfo",data:{students:a}}),this.postMessage({action:"setSpliteUsersInfo",data:{students:Object.values(e).map(r)}})}destroyed(){window.removeEventListener("message",this.handlerIframeMsg)}}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(11),n(224)],void 0===(r="function"==typeof(i=function(t,e,i,o){"use strict";var r=n(0),a=n(10);function s(t){const{coursewareInfo:n,active:i}=t;return e.default.createElement("div",{className:"other-box",style:{width:"100%",height:"100%",border:"none",outline:"none"}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,e=a(e),i=r(i),new Set,s.propTypes={coursewareInfo:i.default.object,active:i.default.bool}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(11),n(226)],void 0===(r="function"==typeof(i=function(t,e,i,o){"use strict";var r=n(0);function a(t){const{className:n}=t;return e.default.createElement("div",{className:"blackboard-box ".concat(n),id:"iframeId"})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,e=r(e),i=r(i),a.propTypes={className:i.default.string}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){},function(t,e,n){},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(62),n(15),n(230),n(11),n(233)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s){"use strict";var l=n(0),c=n(10);function u(t){const[n,a]=(0,e.useState)(!1),s=(0,e.useRef)(null),{coursewareId:l,pageTotal:c,currentPage:u,active:h}=t,{eventControllersInstance:d}=(0,e.useContext)(o.PlayerContext);return(0,e.useEffect)(()=>{h&&s.current.scrollToIndex({index:u})},[l,u,h]),e.default.createElement("div",{className:"outline-container"},e.default.createElement("div",{style:{width:n?"308px":"0px"},className:"outline-content"},e.default.createElement("div",{className:"outline-header"},n?"":""),h&&e.default.createElement(i.Virtuoso,{ref:s,className:"outline-scroll",totalCount:c,item:t=>e.default.createElement(r.default,{key:"".concat(l+t),coursewareId:l,pageNumb:t,currentPage:u})})),e.default.createElement("div",{className:"outline-handle",onClick:()=>(t=>{a(!t),d.send("playerTrackEvent",{eventId:t?"CLASSROOM_OUTLINE_OFF":"CLASSROOM_OUTLINE_ON"})})(n)},e.default.createElement("svg",{id:"icon-arrowright",className:"outline-arrow ".concat(n?"":"outline-inunfold"),viewBox:"0 0 1024 1024"},e.default.createElement("path",{d:"M323.731 93.334c14.331 0 27.677 5.512 37.657 15.529l365.34 365.99c1.337 1.306 2.38 2.417 3.234 3.607l2.16 2.723c10.653 10.703 15.888 23.296 15.888 36.627 0 13.571-5.351 26.26-15.053 35.73l-367.853 363.953c-9.951 9.813-23.238 15.222-37.401 15.222-13.848 0-26.931-5.25-36.832-14.769-9.841-9.549-15.507-22.867-15.506-36.518 0-13.484 5.365-26.259 15.134-35.969l331.846-328.283-336.081-336.964c-9.607-9.666-14.915-22.296-14.915-35.619 0-13.958 5.673-27.055 15.937-36.876 9.768-9.271 22.734-14.381 36.444-14.381z"}))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=c(e),r=l(r),a=l(a),u.propTypes={coursewareId:a.default.string,pageTotal:a.default.number,currentPage:a.default.number,active:a.default.bool};var h=u;t.default=h})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){(function(n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(r="function"==typeof(i=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,i){return t[0]===e&&(n=i,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var o=i[n];t.call(e,o[1],o[0])}},e}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==n&&n.Math===Math?n:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),r="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},a=2,s=20,l=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,u=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,o=0;function s(){n&&(n=!1,t()),i&&c()}function l(){r(s)}function c(){var t=Date.now();if(n){if(t-o<a)return;i=!0}else n=!0,i=!1,setTimeout(l,e);o=t}return c}(this.refresh.bind(this),s)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;l.some(function(t){return!!~n.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),h=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},d=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||o},f=b(0,0,0,0);function p(t){return parseFloat(t)||0}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){return e+p(t["border-"+n+"-width"])},0)}function g(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return f;var i=d(t).getComputedStyle(t),o=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var o=i[n],r=t["padding-"+o];e[o]=p(r)}return e}(i),r=o.left+o.right,a=o.top+o.bottom,s=p(i.width),l=p(i.height);if("border-box"===i.boxSizing&&(Math.round(s+r)!==e&&(s-=y(i,"left","right")+r),Math.round(l+a)!==n&&(l-=y(i,"top","bottom")+a)),!function(t){return t===d(t).document.documentElement}(t)){var c=Math.round(s+r)-e,u=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return b(o.left,o.top,s,l)}var v="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof d(t).SVGGraphicsElement}:function(t){return t instanceof d(t).SVGElement&&"function"==typeof t.getBBox};function m(t){return i?v(t)?function(t){var e=t.getBBox();return b(0,0,e.width,e.height)}(t):g(t):f}function b(t,e,n,i){return{x:t,y:e,width:n,height:i}}var _=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=m(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),w=function(){return function(t,e){var n,i,o,r,a,s,l,c=(i=(n=e).x,o=n.y,r=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),h(l,{x:i,y:o,width:r,height:a,top:o,right:i+r,bottom:a+o,left:i}),l);h(this,{target:t,contentRect:c})}}(),x=function(){function t(t,n,i){if(this.activeObservations_=[],this.observations_=new e,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new _(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new w(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),T="undefined"!=typeof WeakMap?new WeakMap:new e,S=function(){return function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),i=new x(e,n,this);T.set(this,i)}}();["observe","unobserve","disconnect"].forEach(function(t){S.prototype[t]=function(){var e;return(e=T.get(this))[t].apply(e,arguments)}});var E=void 0!==o.ResizeObserver?o.ResizeObserver:S;t.default=E})?i.apply(e,o):i)||(t.exports=r)}).call(this,n(19))},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(30),n(15),n(11),n(231),n(232)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s){"use strict";var l=n(0),c=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=c(e),r=l(r),s=l(s);const u="?x-oss-process=image/resize,w_261,h_147";function h(t){const{eventControllersInstance:n}=(0,e.useContext)(o.PlayerContext),[r,a]=(0,e.useState)(!0),l=(0,e.useRef)(null),{coursewareId:c,pageNumb:h,currentPage:d}=t;return(0,e.useEffect)(()=>{const t="".concat(o.pdfHost.OSS,"/").concat(c,"/slide-").concat(h,".png").concat(u);(0,i.preloadImageByUrl)(t).then(()=>{l.current.src=t}).catch(t=>{console.log(">>e",t)}).finally(()=>{a(!1)})},[]),e.default.createElement("div",{className:"outline-item-container ".concat(d===h?"outline-item-active":""),onClick:function(){n.send("QtAction",{action:"pptSwitchPage",data:{id:c,pageNo:h}})}},e.default.createElement("div",{className:"outline-item-content"},e.default.createElement("img",{ref:l,src:s.default,className:"outline-item-img"}),r&&e.default.createElement("div",{id:"outline-loading-item",className:"outline-item-loading"},e.default.createElement("svg",{className:"outline-item-icon",id:"icon-loading",viewBox:"0 0 1024 1024"},e.default.createElement("path",{d:"M164.592 786.848l56.56 56.56 147.088-147.072-56.576-56.576-147.072 147.088z m678.816-565.696l-56.56-56.56-147.088 147.072 56.56 56.576 147.088-147.088z m-678.816 0l147.088 147.088 56.56-56.56-147.088-147.088-56.56 56.56zM272 464H64v80h208v-80z m367.76 232.32l147.088 147.088 56.56-56.56-147.072-147.088-56.576 56.56zM464 944h80V736h-80v208z m272-480v80h208v-80H736zM464 272h80V64h-80v208z",fill:"#565D64"})))),e.default.createElement("p",{className:"outline-item-pageNumb"},e.default.createElement("span",{className:"outline-item-pageTag"},h+1)))}h.propTypes={coursewareId:r.default.string,pageNumb:r.default.number,currentPage:r.default.number};var d=h;t.default=d})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAYAAACuwEE+AAAG4klEQVR4Xu2daY/cRBRFb0OAsASFHREJJCIUJLZAJEDw/78gQIBAEBaxBrETCEuADIMusiOr6WnXHbvtNnXqy2hm3nPVu++oXJvtlSQdHh6elHRG0ilJN/pvFBRoFDiQdEXSpdVqdXXVwHJO0gkkQoEtClyTdNHAnJV0GqlQoECBywbmPLehAqkwsQIHBuYCWqBAqQIAU6oUdv8qADCAECkAMJFcGAMMDEQKAEwkF8YAAwORAgATyYUxwMBApADARHJhDDAwECkAMJFcGAMMDEQKAEwkF8YAAwORAgATyYUxwMBApADARHJhDDAwECkAMJFcGAMMDEQKAEwkF8YAAwORAgATyYUxwMBApADARHJhDDAwECkAMJFcGAMMDEQKAEwkF8YAAwORAgATyYUxwMBApADARHJhDDAwECkAMJFcGAMMDEQKAEwkF8YAAwORAgATyYUxwMBApMCSgfG3ER6RdI+km/wK2SjyeYz9oYdfJH0m6ad5mjCs1qUCY1j8yvtbh4U/m/ehpPckfTdbC45Z8VKB8Qc1HjpmzPvi9pekVyT9vS8NKmnHUoF5XtItTYC/Svran30qCXhmm9slPdhpw9uSfpy5TVH1SwXmZUk3NJF+LOmLKOr5jP3xspc61V+U9M18zclrBphcsyEeADNEvQG+SQ/j2dO+3K4AZkDSh7iWAHNvM+2+TZI/P/etJN++PLWdqwDMTMr3AXO/JH/Hcr147eOtmdrsagFmJvH7gHlB0s3Nrej75mu57azqHUk/zNRugJlJ+G3AGAxPu12+kvSBpDskPdv8zausn87UboCZSfhtwHgV+MVmq8DfW3aP4lvUo01b55yGA8weAuMmPSnprg1t82zpVUlXZ2o3wMwkfN8YxrelpyWd7LTPsHzY3KZmajaD3rmE7wOmnZE8IMnL8Z5We0XV2whDinfF75T0pyTf7tJCD5MqNpJ9CTAjVXX9Ml7X8VS93ZLw7OvdcFEQYMbOSuH1pgbGxyg8y3LCu+VzSZ8Utrnt9dhLCgQby3RKYLy18EyzlrPefo+LvBD4c2Fg9DCFQo1tNiUwDzdbDEfF4BnX64VbDgAzNgmF15sKGC/4+WRf3/HPdoGwr/kA06fQjv4/BTAe3Hrc4s3LklKy5QAwJUruwGYKYNJjoD5y+Zok/zyqAMwOYCi5ZArMqc5WQcnZmNPNanHfrWi9rd7UdE8DMCVZnNCmFBgvtD3VLN65eb83CfXPo4r3op7rnBlOw/Jmp8c0mwo9TKrmSPalwBgW9xbd4lmNp8J/HNGWxyXdN6CdPqDlWdOm/SqAGSDsENcSYPwYischm8pvDTTr4w2DYmCGFm8bvLlhFRhghip7TP8+YLwy69tKu4y/qRo/geiepj2y6QNXFyT5ljRG8Zkbn73pFoAZQ9ljXGMbMB6oeu3Eayh9xUc2/WyQHybbdPvq89/2fw+u32gejW3tAGaIogN8twHj5629OltavIlocNoDVqV+JXYeXHs80z7dCDAlqu3A5ihgPH32vk86Hd5BE69f8ktJHzW/Acwuld5y7U3AeLziccs+PqDfPhILMHsETLoyO2XTfeDKq8Ae13C8YUrlm7rWexifpPM53n0ufrXH+wAzT4q6wPgQk58KaJ87mqdFZbV6LNNdG+Jh/DLdBlt1gfEMZNt6y+DKRryA13y6p/YAZkRxt12qC8xEVe6kGoDZiaz/vSjATCT0ejX/h/fDzCTdKNXSw4wiY/9F6GH6NdqJxVJ7GD877bMuSy9+rmlRb9JcKjBPSLp74bR4Ec9v0fSi3mLKUoHxTrT3jJYynd4ERHePCWAmUMBvZ3hsIQt2XTncsxgWv3ak5HzxBFKWV7HUHqaN0LvS7m2W9Op4b2Nse7KgPHszWC4dmBkkq7tKgKk7/3H0ABNLVrcDwNSd/zh6gIklq9sBYOrOfxw9wMSS1e0AMHXnP44eYGLJ6nYAmLrzH0cPMLFkdTsATN35j6MHmFiyuh0Apu78x9EDTCxZ3Q4AU3f+4+gBJpasbgeAqTv/cfQAE0tWtwPA1J3/OHqAiSWr2wFg6s5/HD3AxJLV7QAwdec/jh5gYsnqdgCYuvMfRw8wsWR1OwBM3fmPoweYWLK6HQCm7vzH0QNMLFndDgBTd/7j6AEmlqxuB4CpO/9x9AATS1a3A8DUnf84eoCJJavbAWDqzn8cPcDEktXtADB15z+OHmBiyep2AJi68x9HDzCxZHU7AEzd+Y+jB5hYsrodAKbu/MfRA0wsWd0OBub82se361aE6LcpcGBgzko6jU4oUKDAZQNzUtI5SScKHDCpV4Frki76E3hqoDkj6RS3p3qJOCLyA0lXJF1arVZX/wERJ80PbtZ1nAAAAABJRU5ErkJggg=="},function(t,e,n){},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(62),n(15),n(235),n(11),n(237)],void 0===(r="function"==typeof(i=function(t,e,i,o,r,a,s){"use strict";var l=n(0),c=n(10);function u(t){const{eventControllersInstance:n}=(0,e.useContext)(o.PlayerContext),{whiteBoardController:a}=n.controllers,[s,l]=(0,e.useState)(!0),c=(0,e.useRef)(null),{coursewareId:u,currentPage:h}=t,[d,f]=(0,e.useState)([]),[p,y]=(0,e.useState)([]),[g,v]=(0,e.useState)(0);function m(t,e){const i=p[t];if(!i)return;const o={mediaId:i.id,mediaUrl:i.src,mediaName:i.name,mode:e||"manual",pageNo:h,type:i.type};n.send("QtAction",{action:"openPlayer",data:o}),v(t)}return(0,e.useEffect)(()=>(a.on("zml_all_video",t=>{f(t)}),()=>{a.removeAllListeners("zml_all_video")}),[]),(0,e.useEffect)(()=>{d&&d.length&&y(d[h])},[d,h]),(0,e.useEffect)(()=>{c.current&&c.current.scrollToIndex({index:0}),!d.length&&window.zmlAllVideo&&f(window.zmlAllVideo)},[h]),(0,e.useEffect)(()=>{l(!0),v(0),n.send("QtAction",{action:"closePlayer"}),setTimeout(()=>{m(0,"auto")},1e3)},[p]),p&&p.length?e.default.createElement("div",{className:"videoList-box-container"},e.default.createElement("div",{style:{width:s?"240px":"0px"},className:"videoList-box-content"},e.default.createElement("div",{className:"videoList-box-header"},s?"":""),e.default.createElement(i.Virtuoso,{ref:c,key:h,className:"videoList-box-scroll",totalCount:p.length,item:t=>e.default.createElement(r.default,{video:p,coursewareId:u,pageNumb:t,active:g,setActive:t=>{v(t)},openPlay:m})})),e.default.createElement("div",{className:"videoList-box-handle",onClick:()=>l(!s)},e.default.createElement("svg",{id:"icon-arrowright",className:"videoList-box-arrow ".concat(s?"":"videoList-box-inunfold"),viewBox:"0 0 1024 1024"},e.default.createElement("path",{d:"M323.731 93.334c14.331 0 27.677 5.512 37.657 15.529l365.34 365.99c1.337 1.306 2.38 2.417 3.234 3.607l2.16 2.723c10.653 10.703 15.888 23.296 15.888 36.627 0 13.571-5.351 26.26-15.053 35.73l-367.853 363.953c-9.951 9.813-23.238 15.222-37.401 15.222-13.848 0-26.931-5.25-36.832-14.769-9.841-9.549-15.507-22.867-15.506-36.518 0-13.484 5.365-26.259 15.134-35.969l331.846-328.283-336.081-336.964c-9.607-9.666-14.915-22.296-14.915-35.619 0-13.958 5.673-27.055 15.937-36.876 9.768-9.271 22.734-14.381 36.444-14.381z"})))):null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e=c(e),r=l(r),a=l(a),u.propTypes={coursewareId:a.default.string,currentPage:a.default.number};var h=u;t.default=h})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){var i,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e,n(6),n(11),n(236)],void 0===(r="function"==typeof(i=function(t,e,i,o){"use strict";var r=n(0),a=n(10);function s(t){const{video:n,pageNumb:i,openPlay:o,active:r}=t,a=n[i];return e.default.createElement("div",{className:"videoList-container ".concat(r===i?"videoList-active":""),onClick:()=>o(i)},e.default.createElement("img",{src:{audio:"https://web-data.zmlearn.com/image/vfNiNkb1Hb2mVqHnsKj2Cn/mp3.png",video:"https://web-data.zmlearn.com/image/fm9n92FAyBJ4RzjL4bSyQm/mp4.png"}[a.type]}),e.default.createElement("span",{className:"videoList-videolistitem",title:a.name},a.name))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,e=a(e),i=r(i),s.propTypes={coursewareId:i.default.string,pageNumb:i.default.number,currentPage:i.default.number,active:i.default.number,setActive:i.default.func,openUnfold:i.default.func,video:i.default.array,openPlay:i.default.func}})?i.apply(e,o):i)||(t.exports=r)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){}]).default});